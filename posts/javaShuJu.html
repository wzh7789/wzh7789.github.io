<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><div id="myscoll"></div><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Javaæ•°æ®ç»“æ„ | Wzhçš„çº¸ç®±ğŸ§Š</title><meta name="keywords" content="JAVA,åŸºç¡€è¯­è¨€"><meta name="author" content="çˆ±å­¦æŠ€æœ¯çš„å°å´ğŸµ"><meta name="copyright" content="çˆ±å­¦æŠ€æœ¯çš„å°å´ğŸµ"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="äº†è§£ç»“æ„">
<meta property="og:type" content="article">
<meta property="og:title" content="Javaæ•°æ®ç»“æ„">
<meta property="og:url" content="https://w-zx.cc/posts/javaShuJu.html">
<meta property="og:site_name" content="Wzhçš„çº¸ç®±ğŸ§Š">
<meta property="og:description" content="äº†è§£ç»“æ„">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://imgbed.link/file/27056">
<meta property="article:published_time" content="2023-04-17T04:13:03.000Z">
<meta property="article:modified_time" content="2023-05-17T13:33:19.000Z">
<meta property="article:author" content="çˆ±å­¦æŠ€æœ¯çš„å°å´ğŸµ">
<meta property="article:tag" content="JAVA">
<meta property="article:tag" content="åŸºç¡€è¯­è¨€">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://imgbed.link/file/27056"><link rel="shortcut icon" href="/"><link rel="canonical" href="https://w-zx.cc/posts/javaShuJu"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/6.0.0/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.staticfile.org/fancyapps-ui/4.0.31/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: undefined,
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.js',
      css: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Javaæ•°æ®ç»“æ„',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-05-17 21:33:19'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="https://cdn1.tianli0.top/npm/element-ui@2.15.6/packages/theme-chalk/lib/index.css"><style id="themeColor"></style><style id="rightSide"></style><style id="transPercent"></style><style id="blurNum"></style><style id="settingStyle"></style><span id="fps"></span><style id="defineBg"></style><style id="menu_shadow"></style><link rel="stylesheet" href="https://npm.elemecdn.com/ethan4116-blog/lib/css/plane_v2.css"><svg aria-hidden="true" style="position:absolute; overflow:hidden; width:0; height:0"><symbol id="icon-sun" viewBox="0 0 1024 1024"><path d="M960 512l-128 128v192h-192l-128 128-128-128H192v-192l-128-128 128-128V192h192l128-128 128 128h192v192z" fill="#FFD878" p-id="8420"></path><path d="M736 512a224 224 0 1 0-448 0 224 224 0 1 0 448 0z" fill="#FFE4A9" p-id="8421"></path><path d="M512 109.248L626.752 224H800v173.248L914.752 512 800 626.752V800h-173.248L512 914.752 397.248 800H224v-173.248L109.248 512 224 397.248V224h173.248L512 109.248M512 64l-128 128H192v192l-128 128 128 128v192h192l128 128 128-128h192v-192l128-128-128-128V192h-192l-128-128z" fill="#4D5152" p-id="8422"></path><path d="M512 320c105.888 0 192 86.112 192 192s-86.112 192-192 192-192-86.112-192-192 86.112-192 192-192m0-32a224 224 0 1 0 0 448 224 224 0 0 0 0-448z" fill="#4D5152" p-id="8423"></path></symbol><symbol id="icon-moon" viewBox="0 0 1024 1024"><path d="M611.370667 167.082667a445.013333 445.013333 0 0 1-38.4 161.834666 477.824 477.824 0 0 1-244.736 244.394667 445.141333 445.141333 0 0 1-161.109334 38.058667 85.077333 85.077333 0 0 0-65.066666 135.722666A462.08 462.08 0 1 0 747.093333 102.058667a85.077333 85.077333 0 0 0-135.722666 65.024z" fill="#FFB531" p-id="11345"></path><path d="M329.728 274.133333l35.157333-35.157333a21.333333 21.333333 0 1 0-30.165333-30.165333l-35.157333 35.157333-35.114667-35.157333a21.333333 21.333333 0 0 0-30.165333 30.165333l35.114666 35.157333-35.114666 35.157334a21.333333 21.333333 0 1 0 30.165333 30.165333l35.114667-35.157333 35.157333 35.157333a21.333333 21.333333 0 1 0 30.165333-30.165333z" fill="#030835" p-id="11346"></path></symbol></svg><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-categories-card@1.0.0/lib/categorybar.css"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload="this.media='screen'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Wzhçš„çº¸ç®±ğŸ§Š" type="application/atom+xml">
</head><body><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><div class="loading-img"></div><div class="loading-image-dot"></div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/26921" onerror="onerror=null;src='/assets/r1.jpg'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">50</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">34</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">13</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-home"></use></svg><span class="menu_word" style="font-size:17px"> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--article"></use></svg><span class="menu_word" style="font-size:17px"> æ–‡ç« </span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-guidang1">                   </use></svg><span class="menu_word" style="font-size:17px"> å½’æ¡£</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-sekuaibiaoqian">                   </use></svg><span class="menu_word" style="font-size:17px"> æ ‡ç­¾</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-fenlei">                   </use></svg><span class="menu_word" style="font-size:17px"> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-pinweishenghuo"></use></svg><span class="menu_word" style="font-size:17px"> ä¼‘é—²</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/life/music/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-yinle">                   </use></svg><span class="menu_word" style="font-size:17px"> å…«éŸ³ç›’</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/movies/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-dianying1">                   </use></svg><span class="menu_word" style="font-size:17px"> å½±é™¢</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/games/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-youxishoubing">                   </use></svg><span class="menu_word" style="font-size:17px"> æ¸¸æˆ</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-xiangzi"></use></svg><span class="menu_word" style="font-size:17px"> å…«å®ç®±</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/box/gallery/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-tubiaozhizuomoban">                   </use></svg><span class="menu_word" style="font-size:17px"> ç”»å»Š</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/animation/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-nvwumao">                   </use></svg><span class="menu_word" style="font-size:17px"> åŠ¨ç”»</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/nav/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-zhifengche">                   </use></svg><span class="menu_word" style="font-size:17px"> ç½‘å€å¯¼èˆª</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shejiaoxinxi"></use></svg><span class="menu_word" style="font-size:17px"> ç¤¾äº¤</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/social/fcircle/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-pengyouquan">                   </use></svg><span class="menu_word" style="font-size:17px"> æœ‹å‹åœˆ</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-liuyan">                   </use></svg><span class="menu_word" style="font-size:17px"> ç•™è¨€æ¿</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/social/link/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-lianjie">                   </use></svg><span class="menu_word" style="font-size:17px"> å‹äººå¸</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-wangye"></use></svg><span class="menu_word" style="font-size:17px"> ç½‘ç«™</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/site/census/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--tongjibiao">                   </use></svg><span class="menu_word" style="font-size:17px"> ç½‘ç«™ç»Ÿè®¡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/echarts/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shujutongji1">                   </use></svg><span class="menu_word" style="font-size:17px"> æ–‡ç« ç»Ÿè®¡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/time/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-xianxingshalou">                   </use></svg><span class="menu_word" style="font-size:17px"> æ—§æ—¶å…‰</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-maoliang"></use></svg><span class="menu_word" style="font-size:17px"> ä¸ªäºº</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/personal/bb/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-qunliaotian">                   </use></svg><span class="menu_word" style="font-size:17px"> å” å¨</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/love/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-love-sign">                   </use></svg><span class="menu_word" style="font-size:17px"> å›å¿†</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/about/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-paperplane">                   </use></svg><span class="menu_word" style="font-size:17px"> å…³äº</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Wzhçš„çº¸ç®±ğŸ§Š</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-home"></use></svg><span class="menu_word" style="font-size:17px"> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--article"></use></svg><span class="menu_word" style="font-size:17px"> æ–‡ç« </span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-guidang1">                   </use></svg><span class="menu_word" style="font-size:17px"> å½’æ¡£</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-sekuaibiaoqian">                   </use></svg><span class="menu_word" style="font-size:17px"> æ ‡ç­¾</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-fenlei">                   </use></svg><span class="menu_word" style="font-size:17px"> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-pinweishenghuo"></use></svg><span class="menu_word" style="font-size:17px"> ä¼‘é—²</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/life/music/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-yinle">                   </use></svg><span class="menu_word" style="font-size:17px"> å…«éŸ³ç›’</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/movies/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-dianying1">                   </use></svg><span class="menu_word" style="font-size:17px"> å½±é™¢</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/games/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-youxishoubing">                   </use></svg><span class="menu_word" style="font-size:17px"> æ¸¸æˆ</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-xiangzi"></use></svg><span class="menu_word" style="font-size:17px"> å…«å®ç®±</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/box/gallery/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-tubiaozhizuomoban">                   </use></svg><span class="menu_word" style="font-size:17px"> ç”»å»Š</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/animation/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-nvwumao">                   </use></svg><span class="menu_word" style="font-size:17px"> åŠ¨ç”»</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/nav/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-zhifengche">                   </use></svg><span class="menu_word" style="font-size:17px"> ç½‘å€å¯¼èˆª</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shejiaoxinxi"></use></svg><span class="menu_word" style="font-size:17px"> ç¤¾äº¤</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/social/fcircle/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-pengyouquan">                   </use></svg><span class="menu_word" style="font-size:17px"> æœ‹å‹åœˆ</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-liuyan">                   </use></svg><span class="menu_word" style="font-size:17px"> ç•™è¨€æ¿</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/social/link/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-lianjie">                   </use></svg><span class="menu_word" style="font-size:17px"> å‹äººå¸</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-wangye"></use></svg><span class="menu_word" style="font-size:17px"> ç½‘ç«™</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/site/census/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--tongjibiao">                   </use></svg><span class="menu_word" style="font-size:17px"> ç½‘ç«™ç»Ÿè®¡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/echarts/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shujutongji1">                   </use></svg><span class="menu_word" style="font-size:17px"> æ–‡ç« ç»Ÿè®¡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/time/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-xianxingshalou">                   </use></svg><span class="menu_word" style="font-size:17px"> æ—§æ—¶å…‰</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-maoliang"></use></svg><span class="menu_word" style="font-size:17px"> ä¸ªäºº</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/personal/bb/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-qunliaotian">                   </use></svg><span class="menu_word" style="font-size:17px"> å” å¨</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/love/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-love-sign">                   </use></svg><span class="menu_word" style="font-size:17px"> å›å¿†</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/about/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-paperplane">                   </use></svg><span class="menu_word" style="font-size:17px"> å…³äº</span></a></li></ul></div></div><center id="name-container"><a id="page-name" href="javascript:scrollToTop()">PAGE_NAME</a></center><div id="nav-right"><div id="search-button"><a class="search faa-parent animated-hover" title="æ£€ç´¢ç«™å†…ä»»ä½•ä½ æƒ³è¦çš„ä¿¡æ¯"><svg class="faa-tada icon" style="height:24px;width:24px;fill:currentColor;position:relative;top:6px" aria-hidden="true"><use xlink:href="#icon-valentine_-search-love-find-heart"></use></svg><span> æœç´¢</span></a></div><a class="meihua faa-parent animated-hover" onclick="toggleWinbox()" title="ç¾åŒ–è®¾ç½®-è‡ªå®šä¹‰ä½ çš„é£æ ¼" id="meihua-button"><svg class="faa-tada icon" style="height:26px;width:26px;fill:currentColor;position:relative;top:8px" aria-hidden="true"><use xlink:href="#icon-tupian1"></use></svg></a><a class="sun_moon faa-parent animated-hover" onclick="switchNightMode()" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢" id="nightmode-button"><svg class="faa-tada" style="height:25px;width:25px;fill:currentColor;position:relative;top:7px" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon">       </use></svg></a><div id="toggle-menu"><a><i class="fas fa-bars fa-fw"></i></a></div></div></div></nav><div id="post-info"><h1 class="post-title">Javaæ•°æ®ç»“æ„</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><svg class="meta_icon post-meta-icon" style="width:30px;height:30px;position:relative;top:10px"><use xlink:href="#icon-rili"></use></svg><span class="post-meta-label">å‘è¡¨äº </span><time class="post-meta-date-created" datetime="2023-04-17T04:13:03.000Z" title="å‘è¡¨äº 2023-04-17 12:13:03">2023-04-17</time><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:18px;height:18px;position:relative;top:5px"><use xlink:href="#icon-gengxin1"></use></svg><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2023-05-17T13:33:19.000Z" title="æ›´æ–°äº 2023-05-17 21:33:19">2023-05-17</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:18px;height:18px;position:relative;top:5px"><use xlink:href="#icon-biaoqian"></use></svg><a class="post-meta-categories" href="/categories/JAVA/">JAVA</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><svg class="meta_icon post-meta-icon" style="width:25px;height:25px;position:relative;top:8px"><use xlink:href="#icon-charuword"></use></svg><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">3.4w</span><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:20px;height:20px;position:relative;top:5px"><use xlink:href="#icon-shizhong"></use></svg><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>142åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Javaæ•°æ®ç»“æ„"><svg class="meta_icon post-meta-icon" style="width:25px;height:25px;position:relative;top:5px"><use xlink:href="#icon-eye"></use></svg><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1>13 Java æ•°æ®ç»“æ„</h1>
<blockquote>
<p>æ•°æ®ç»“æ„åˆ†ä¸ºä¸¤ç§ï¼šçº¿æ€§ç»“æ„ã€éçº¿æ€§ç»“æ„</p>
</blockquote>
<p><strong>çº¿æ€§ç»“æ„ï¼š</strong></p>
<ul>
<li>
<p>æœ€å¸¸ç”¨çš„æ•°æ®ç»“æ„ã€‚æ•°æ®å…ƒç´ é—´å­˜åœ¨ä¸€å¯¹ä¸€çº¿æ€§å…³ç³»ã€‚</p>
</li>
<li>
<p>çº¿æ€§ç»“æ„æœ‰ 2 ç§ä¸åŒçš„å­˜å‚¨ç»“æ„ï¼šé¡ºåºå‚¨å­˜ç»“æ„ï¼Œé“¾å¼å‚¨å­˜ç»“æ„</p>
<p>é¡ºåºå­˜å‚¨ç»“æ„ä¸­å…ƒç´ å­˜å‚¨åœ¨è¿ç»­çš„å†…å­˜ç©ºé—´ä¸­ã€‚</p>
<p>é“¾å¼å‚¨å­˜ç»“æ„ä¸­å…ƒç´ å‚¨å­˜åœ¨éè¿ç»­çš„ç©ºé—´ä¸­ï¼Œå…ƒç´ èŠ‚ç‚¹ä¸­å­˜æ”¾æ•°æ®å…ƒç´ åŠç›¸é‚»å…ƒç´ çš„åœ°å€ä¿¡æ¯</p>
</li>
<li>
<p>å¸¸è§çš„çº¿æ€§ç»“æ„æœ‰ï¼šæ•°ç»„ã€é˜Ÿåˆ—ã€é“¾è¡¨ã€æ ˆç­‰</p>
</li>
</ul>
<p><strong>éçº¿æ€§ç»“æ„ï¼š</strong></p>
<ul>
<li>éçº¿æ€§ç»“æ„åŒ…æ‹¬ï¼šäºŒç»´æ•°ç»„ã€å¤šç»´æ•°ç»„ã€å¹¿ä¹‰è¡¨ã€æ ‘ç»“æ„ã€å›¾ç»“æ„</li>
</ul>
<h2 id="13-1-é›†åˆçš„æ¡†æ¶ä½“ç³»">13.1 é›†åˆçš„æ¡†æ¶ä½“ç³»</h2>
<blockquote>
<p>Java æä¾›äº†ä¸€ç³»åˆ—é›†åˆå®¹å™¨ï¼Œä»¥æ–¹ä¾¿ç¨‹åºå‘˜åŠ¨æ€ä¿å­˜å…ƒç´ ã€‚å¹¶æä¾›äº†ä¸€ç³»åˆ—æ–¹ä¾¿çš„æ“ä½œå¯¹è±¡çš„æ–¹æ³•ã€‚</p>
<p>Java é›†åˆä¸»è¦åˆ†ä¸ºä¸¤ç»„ï¼šå•åˆ—é›†åˆï¼ˆCollectionï¼‰ã€åŒåˆ—é›†åˆï¼ˆMapï¼‰</p>
</blockquote>
<p><a href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg=="><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i-melody.github.io/img/Java_InputImage/%E9%9B%86%E5%90%88%E4%BD%93%E7%B3%BB%E5%9B%BE_13.1.webp" alt="img"></a></p>
<p><em>ï¼ˆé›†åˆä½“ç³»å›¾_13.1ï¼‰</em></p>
<ul>
<li>
<p><strong>Collection æ¥å£</strong>ï¼ˆå•åˆ—é›†åˆï¼‰ï¼šå¯ä»¥å­˜æ”¾å¤šä¸ªå…ƒç´ ã€‚æ¯ä¸ªå…ƒç´ å¯ä»¥æ˜¯ Object</p>
<p>Collection æ¥å£æœ‰ä¸¤ä¸ªé‡è¦å­æ¥å£ï¼šListï¼ˆæœ‰åºé›†åˆï¼‰å’Œ Setï¼ˆæ— åºé›†åˆï¼‰</p>
</li>
<li>
<p><strong>Map æ¥å£</strong>ï¼ˆåŒåˆ—é›†åˆï¼‰ï¼šç”¨äºä¿å­˜å…·æœ‰æ˜ å°„å…³ç³»çš„æ•°æ®ï¼škey - valueï¼ˆåŒåˆ—å…ƒç´ ï¼‰</p>
<p>key å’Œ value å¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å¼•ç”¨æ•°æ®ç±»å‹ã€‚å…¶ä¸­ key ä¸èƒ½é‡å¤ï¼Œvalue å¯ä»¥é‡å¤</p>
<p>key å’Œ value å­˜åœ¨å•ä¸€å¯¹åº”å…³ç³»ã€‚é€šè¿‡ç‰¹å®šçš„ key ä¸€å®šèƒ½æ‰¾åˆ°æŒ‡å®šçš„ value</p>
</li>
</ul>
<h2 id="13-2-å•åˆ—é›†åˆæ¥å£-Collection">13.2 å•åˆ—é›†åˆæ¥å£ Collection</h2>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="symbol">Collection</span>&lt;<span class="symbol">E</span>&gt; <span class="symbol">extends</span> <span class="symbol">Lterable</span>&lt;<span class="symbol">E</span>&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Collection å®ç°å­ç±»å¯ä»¥å­˜æ”¾å¤šä¸ªå…ƒç´ ã€‚æ¯ä¸ªå…ƒç´ å¯ä»¥æ˜¯ Object</p>
<p>æœ‰äº› Collection å®ç°å­ç±»èƒ½å­˜æ”¾é‡å¤çš„å…ƒç´ ï¼Œæœ‰äº›ä¸èƒ½</p>
<p>æœ‰äº› Collection å®ç°å­ç±»æ˜¯æœ‰åºçš„ï¼ˆListï¼‰ ï¼Œæœ‰äº›ä¸æ˜¯ï¼ˆSetï¼‰</p>
<p>Collection æ¥å£æ²¡æœ‰ç›´æ¥çš„å®ç°å­ç±»ï¼Œéƒ½æ˜¯é€šè¿‡å…¶å­æ¥å£å®ç°çš„</p>
</blockquote>
<h3 id="å¸¸ç”¨æ–¹æ³•ï¼š">å¸¸ç”¨æ–¹æ³•ï¼š</h3>
<ul>
<li>
<p><code>add</code>ï¼šæ·»åŠ å•ä¸ªå…ƒç´ </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ArrayList</span> <span class="variable">list</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">list.add(<span class="string">&quot;å“ˆå“ˆå•Š&quot;</span>);</span><br><span class="line">list.add(<span class="number">10</span>);				<span class="comment">// ç›¸å½“äºList.add(new Integer(10));</span></span><br><span class="line">list.add(<span class="literal">true</span>);				<span class="comment">// åŒä¸Š</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>remove</code>ï¼šåˆ é™¤å•ä¸ªå…ƒç´ </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">list.remove(<span class="number">0</span>)				<span class="comment">// åˆ é™¤ç¼–å· 0 çš„å…ƒç´ ã€‚ä¸Šä¾‹ä¸­ä¼šåˆ é™¤ &quot;å“ˆå“ˆå•Š&quot;</span></span><br><span class="line">list.remove((Integer)<span class="number">10</span>);	<span class="comment">// åˆ é™¤ä¸Šä¾‹çš„ 10 è¦è¿™æ ·å†™</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>contains</code>ï¼šæ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨</p>
</li>
<li>
<p><code>size</code>ï¼šè·å–å…ƒç´ ä¸ªæ•°</p>
</li>
<li>
<p><code>isEmpty</code>ï¼šåˆ¤æ–­æ˜¯å¦ä¸ºç©º</p>
</li>
<li>
<p><code>clear</code>ï¼šæ¸…ç©º</p>
</li>
<li>
<p><code>addAll</code>ï¼šæ·»åŠ å¤šä¸ªå…ƒç´ </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ArrayList</span> <span class="variable">list2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">list2.add(<span class="number">111</span>);</span><br><span class="line">list2.add(<span class="string">&quot;idea&quot;</span>);</span><br><span class="line">list.addAll(list2);			<span class="comment">// è¿™é‡Œå¯ä»¥è¾“å…¥æ‰€æœ‰å®ç°äº† Collection æ¥å£çš„é›†åˆ</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>containsAll</code>ï¼šæ£€æŸ¥å¤šä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">list.contaionsAll(list2);	<span class="comment">// åŒä¸Šï¼Œæ”¾ä¸€ä¸ªå®ç°äº† Collection æ¥å£çš„é›†åˆ</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>removeAll</code>ï¼šåˆ é™¤å¤šä¸ªå…ƒç´ </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">list.removeAll(list2);		<span class="comment">// åŒä¸Š</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>Iterator iterator()</code>ï¼šè¿”å›æŒ‡å‘é›†åˆå¼€å§‹ä½ç½®çš„è¿­ä»£å™¨</p>
</li>
</ul>
<h3 id="13-2-1-è¿­ä»£å™¨-Iterator">13.2.1 è¿­ä»£å™¨ Iterator</h3>
<blockquote>
<p>Iterator å¯¹è±¡ç§°ä¸ºè¿­ä»£å™¨ï¼Œä¸»è¦ç”¨äºéå† Collection é›†åˆä¸­çš„å…ƒç´ ã€‚</p>
<p>Collection ç»§æ‰¿çš„ Iterable æ¥å£ä¸­ï¼Œæä¾›äº† <code>iterator()</code> æ–¹æ³•ï¼Œä¼šè¿”å›ä¸€ä¸ªæ–°çš„è¿­ä»£å™¨ã€‚</p>
<p>Iterator å¯¹è±¡ä»…ç”¨äºéå†é›†åˆï¼Œæœ¬èº«ä¸å­˜æ”¾å…ƒç´ </p>
<p>IDEA ä¸­ï¼Œè¿­ä»£å™¨ while å¾ªç¯çš„æ¨¡æ¿å¿«æ·é”®ï¼š<code>itit</code></p>
</blockquote>
<p><strong>å¸¸ç”¨æ–¹æ³•ï¼š</strong></p>
<ul>
<li><code>boolean hasNext()</code>ï¼šè¯¥æ–¹æ³•åˆ¤æ–­æ˜¯å¦æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚</li>
<li><code>T next()</code>ï¼šè¯¥æ–¹æ³•ä¼šå°†æŒ‡é’ˆä¸‹ç§»ï¼Œç„¶åè¿”å›ä¸‹ç§»åçš„ä½ç½®ä¸Šçš„å…ƒç´ </li>
</ul>
<p><strong>ç”¨è¿­ä»£å™¨éå†å…ƒç´ ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Collection&lt;Object&gt; c = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">Iterator&lt;Object&gt; iterator = c.iterator();		<span class="comment">// [1]</span></span><br><span class="line"><span class="keyword">while</span> (iterator.hasNext())&#123;						<span class="comment">// [2]</span></span><br><span class="line">	<span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> iterator.next();				<span class="comment">// [3]</span></span><br><span class="line">	System.out.println(obj);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>
<p>è·å–è¿­ä»£å™¨</p>
</li>
<li>
<p>åˆ¤æ–­æœ‰æ— ä¸‹ä¸€å…ƒç´ </p>
</li>
<li>
<p>å°†è¿­ä»£å™¨åç§»ï¼Œå¹¶è¿”å›é‚£ä¸ªåç§»ä½ç½®ä¸Šçš„å…ƒç´ </p>
<p>while å¾ªç¯ç»“æŸåï¼ŒæŒ‡é’ˆæŒ‡å‘æœ€åå…ƒç´ çš„ä½ç½®ã€‚å†æ¬¡ <code>next()</code> ä¼šæŠ¥é”™ã€‚å¦‚æœéœ€è¦å†ä½¿ç”¨ï¼Œéœ€è¦é‡ç½®è¿­ä»£å™¨ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iterator = list.iterator();				<span class="comment">// é‡ç½®äº†è¿­ä»£å™¨</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><strong>for eachï¼ˆå¢å¼º for å¾ªç¯ï¼‰ï¼š</strong></p>
<blockquote>
<p>for each çš„è¯­æ³•ä¸ for å¾ªç¯ç›¸ä¼¼ï¼Œä½†æ˜¯å¯ä»¥éå† Collection å’Œ æ•°ç»„ ä¸­çš„å…ƒç´ </p>
<p>IDEA ä¸­ï¼Œå¢å¼º for å¾ªç¯çš„æ¨¡æ¿å¿«æ·é”®ï¼š<code>I</code></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (Object o : list)&#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>for each å¯åœ¨ Collection é›†åˆä¸­ä½¿ç”¨ã€‚</li>
<li>for each çš„åº•å±‚åœ¨æœ¬è´¨ä¸Šä¹Ÿæ˜¯ <code>Iterator</code>ã€‚å¯ä»¥ç†è§£ä¸ºç®€åŒ–ç‰ˆæœ¬çš„è¿­ä»£å™¨éå†ã€‚</li>
</ul>
<h2 id="13-3-æœ‰åºé›†åˆæ¥å£-List">13.3 æœ‰åºé›†åˆæ¥å£ List</h2>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">List</span>&lt;E&gt; <span class="keyword">extends</span> <span class="title class_">Collection</span>&lt;E&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>List æ˜¯ Collection æ¥å£çš„å­ç±»æ¥å£</p>
<p>List æ˜¯æœ‰åºï¼ˆæ·»åŠ é¡ºåºå’Œå–å‡ºé¡ºåºä¸€è‡´ï¼‰çš„ï¼Œå¯é‡å¤çš„</p>
<p>List ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æœ‰å…¶å¯¹åº”çš„é¡ºåºç´¢å¼•ï¼ˆä» 0 å¼€å§‹ç¼–å·ï¼‰</p>
</blockquote>
<h3 id="å¸¸ç”¨æ–¹æ³•ï¼š-2">å¸¸ç”¨æ–¹æ³•ï¼š</h3>
<ul>
<li>
<p><code>add(int, obj)</code>ï¼šåœ¨ int ä½ç½®æ’å…¥ obj å…ƒç´ ã€‚è¿”å› true</p>
<p><code>add(obj)</code>ï¼šåœ¨æœ«å°¾æ’å…¥ objã€‚è¿”å› true</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">list.add(<span class="number">111</span>);</span><br><span class="line">list.add(<span class="number">0</span>, <span class="number">110</span>);						<span class="comment">// åœ¨ç¬¬ 1 ä¸ªä½ç½®æ’å…¥æ•°å­— 110</span></span><br></pre></td></tr></table></figure>
<p><code>addElement(obj)</code>ï¼šåœ¨æœ«å°¾æ’å…¥ objã€‚æ— è¿”å›å€¼ã€‚ä½ è¯´è¦è¿™æ–¹æ³•æœ‰å•¥ç”¨ï¼Ÿåå­—è¿˜é•¿ä¸€æˆª</p>
</li>
<li>
<p><code>addAll(int, collection)</code>ï¼šåœ¨ int ä½ç½®æ’å…¥ collection ä¸­çš„æ‰€æœ‰å…ƒç´ </p>
</li>
<li>
<p><code>get(int)</code>ï¼šè¿”å› int ä½ç½®çš„å…ƒç´ </p>
</li>
<li>
<p><code>indexOf(obj)</code>ï¼šè¿”å› obj é¦–æ¬¡å‡ºç°æ—¶çš„ä½ç½®</p>
</li>
<li>
<p><code>lastIndexOf(obj)</code>ï¼šè¿”å› obj æœ€åä¸€æ¬¡å‡ºç°æ—¶çš„ä½ç½®</p>
</li>
<li>
<p><code>remove(int)</code>ï¼šç§»é™¤ int ä½ç½®çš„å…ƒç´ ï¼Œå¹¶è¿”å›é‚£ä¸ªè¢«ç§»é™¤çš„å…ƒç´ </p>
</li>
<li>
<p><code>set(int, obj)</code>ï¼šè®¾ç½® int ä½ç½®çš„å…ƒç´ ä¸º objã€‚ç›¸å½“äºæ›¿æ¢ã€‚è¿”å›é‚£ä¸ªè¢«æ›¿æ¢å…ƒç´ çš„ä¸‹æ ‡</p>
<p><code>setElement(obj, int)</code>ï¼šè®¾ç½® int ä½ç½®çš„å…ƒç´ ä¸º objã€‚æ— è¿”å›å€¼</p>
</li>
<li>
<p><code>subList(int1, int2)</code>ï¼šè¿”å› [int1, int2) èŒƒå›´çš„å…ƒç´ æ„æˆçš„å­é›†åˆ</p>
</li>
</ul>
<h3 id="13-3-1-å¯å˜æ•°ç»„-ArrayList">13.3.1 å¯å˜æ•°ç»„ ArrayList</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayList</span>&lt;E&gt; <span class="keyword">extends</span> <span class="title class_">AbstractList</span>&lt;E&gt;</span><br><span class="line">     <span class="keyword">implements</span> <span class="title class_">List</span>&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ArrayList æ˜¯ List çš„å®ç°å­ç±»ã€‚å…¶åº•å±‚ç”±æ•°ç»„æ¥å®ç°å­˜å‚¨ã€‚</p>
<p>ArrayList å¯ä»¥å­˜æ”¾ null</p>
</blockquote>
<h4 id="ArrayList-çš„æºç ï¼š">ArrayList çš„æºç ï¼š</h4>
<ol>
<li>
<p>ArrayList ä¸­ç»´æŠ¤äº†ä¸€ä¸ª Object ç±»å‹çš„æ•°ç»„ elementDataã€‚è¯¥æ•°ç»„å°±æ˜¯ç”¨æ¥å­˜æ”¾å…ƒç´ çš„æ•°ç»„</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">transient</span> Object[] elementData;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>åˆ›å»º ArrayList å¯¹è±¡æ—¶ï¼Œå¦‚æœä½¿ç”¨æ— å‚æ„é€ å™¨ï¼Œåˆ™ elementData[] åˆå§‹å®¹é‡ä¸º 0</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">ArrayList</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>å¦‚æœä½¿ç”¨æŒ‡å®šå¤§å°æ„é€ å™¨ï¼Œåˆ™åˆå§‹å®¹é‡ä¸ºæŒ‡å®šå¤§å°ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object[] EMPTY_ELEMENTDATA = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">ArrayList</span><span class="params">(<span class="type">int</span> initialCapacity)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (initialCapacity &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>.elementData = <span class="keyword">new</span> <span class="title class_">Object</span>[initialCapacity];</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (initialCapacity == <span class="number">0</span>) &#123;</span><br><span class="line">	<span class="comment">/* è¿™ä¸ªåœºåˆï¼Œä¸é»˜è®¤æ„é€ å™¨çš„ä¸åŒä¹‹å¤„åœ¨äº</span></span><br><span class="line"><span class="comment">		æ‰©å®¹æ—¶ï¼Œè¯¥ 0 å®¹é‡å˜ä¸º 1ï¼Œè€Œé»˜è®¤æ„é€ å™¨ä¼šå˜ä¸º 10 */</span></span><br><span class="line">        <span class="built_in">this</span>.elementData = EMPTY_ELEMENTDATA;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(...);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æ‰©å®¹çš„åœºåˆï¼š</p>
<p>å¦‚æœæ˜¯ <strong>æ— å‚æ„é€ å™¨ç”Ÿæˆçš„åˆå§‹ 0 é•¿åº¦çš„ elementData</strong>ï¼Œåˆ™å°†å…¶å®¹é‡ç½®ä¸º 10ã€‚</p>
<p>å¦åˆ™å®¹é‡æ‰©å®¹ä¸º 1.5 å€ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* æ‰©å®¹æ–¹æ³•ï¼Œä¼ å…¥çš„å‚æ•° minCapacity æ˜¯å®¹å™¨ç°æœ‰å…ƒç´ æ•°é‡ + 1 çš„å€¼</span></span><br><span class="line"><span class="comment">	å¦‚æœæ˜¯æ— å‚æ„é€ å™¨ç”Ÿæˆçš„é»˜è®¤æ•°ç»„ï¼Œæ­¤æ—¶ä¼ å…¥å›ºå®šå€¼ 10 */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">grow</span><span class="params">(<span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">oldCapacity</span> <span class="operator">=</span> elementData.length;</span><br><span class="line">    <span class="comment">/* è®¡ç®—æ–°çš„å®¹é‡ï¼ˆæ—§å®¹é‡çš„ 1.5 å€ï¼‰</span></span><br><span class="line"><span class="comment">    	æ­¤å¤„ &gt;&gt; ä¸ºä½è¿ç®—ç¬¦ï¼Œç­‰åŒäº newC = oldC + oldC / 2; */</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">newCapacity</span> <span class="operator">=</span> oldCapacity + (oldCapacity &gt;&gt; <span class="number">1</span>);</span><br><span class="line">    <span class="comment">/* è¿™é‡Œå¦‚æœåŸå®¹é‡æ˜¯ç‰¹æ®Šå€¼ï¼ˆ1 æˆ– 0ï¼‰ï¼Œå®¹é‡ä¼šå˜ä¸ºé‚£ä¸ª minCapacity çš„å€¼ */</span></span><br><span class="line">    <span class="keyword">if</span> (newCapacity - minCapacity &lt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = minCapacity;</span><br><span class="line">    <span class="keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = hugeCapacity(minCapacity);</span><br><span class="line">    elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="13-3-2-å¯å˜æ•°ç»„-Vector">13.3.2 å¯å˜æ•°ç»„ Vector</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Vector</span>&lt;E&gt;</span><br><span class="line">    <span class="keyword">extends</span> <span class="title class_">AbstractList</span>&lt;E&gt;</span><br><span class="line">    <span class="keyword">implements</span> <span class="title class_">List</span>&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Vector æ˜¯ List çš„å®ç°å­ç±»ã€‚å…¶åº•å±‚ç”±æ•°ç»„æ¥å®ç°å­˜å‚¨</p>
<p>Vector ä¸ ArrayList åŸºæœ¬ç­‰åŒã€‚ArrayList æ•ˆç‡æ›´é«˜ï¼ŒVector çº¿ç¨‹å®‰å…¨ã€‚</p>
<p>åœ¨å¼€å‘ä¸­ï¼Œéœ€è¦è€ƒè™‘çº¿ç¨‹å®‰å…¨æ—¶ï¼Œå»ºè®®ä½¿ç”¨ Vector ï¼Œè€Œé ArrayListã€‚</p>
</blockquote>
<h4 id="Vector-çš„æºç ï¼š">Vector çš„æºç ï¼š</h4>
<ol>
<li>
<p>åº•å±‚ç»´æŠ¤äº†ä¸€ä¸ª Object ç±»å‹çš„æ•°ç»„ elementDataã€‚ç”¨ä»¥å­˜æ”¾å…ƒç´ </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> Object[] elementData;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ä½¿ç”¨æ— å‚æ„é€ å™¨åˆ›å»ºå¯¹è±¡æ—¶ï¼Œé»˜è®¤å¤§å°æ˜¯ 10</p>
<p>ä½¿ç”¨æœ‰å‚æ„é€ å™¨çš„åœºåˆï¼Œé»˜è®¤æ˜¯é‚£ä¸ªæŒ‡å®šå¤§å°ï¼ˆinitialCapaticyï¼‰</p>
<p>ä¹Ÿèƒ½åœ¨æ„é€ å™¨ä¸­æŒ‡å®šé‚£ä¸ªæ‰©å®¹çš„å¢é•¿é€Ÿåº¦ï¼ˆcapacityIncrementï¼‰</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">Vector</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>(<span class="number">10</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Vector</span><span class="params">(<span class="type">int</span> initialCapacity)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>(initialCapacity, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Vector</span><span class="params">(<span class="type">int</span> initialCapacity, <span class="type">int</span> capacityIncrement)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>();</span><br><span class="line">    <span class="keyword">if</span> (initialCapacity &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(...);</span><br><span class="line">    <span class="built_in">this</span>.elementData = <span class="keyword">new</span> <span class="title class_">Object</span>[initialCapacity];</span><br><span class="line">    <span class="built_in">this</span>.capacityIncrement = capacityIncrement;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æ‰©å®¹çš„åœºåˆï¼Œå®¹é‡å˜æˆ 2 å€</p>
<p>ä½¿ç”¨æœ‰å‚æ„é€ å™¨æ”¹å˜äº† capacityIncrement çš„åœºåˆï¼Œå¢é‡æ˜¯é‚£ä¸ªæŒ‡å®šæ•°å€¼</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">grow</span><span class="params">(<span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">oldCapacity</span> <span class="operator">=</span> elementData.length;</span><br><span class="line">    <span class="comment">/* è®¡ç®—æ–°çš„å®¹é‡ï¼ˆæŒ‰ç…§æŒ‡å®šçš„å¢é€Ÿæ‰©å®¹ï¼‰</span></span><br><span class="line"><span class="comment">    	é‚£ä¸ªæŒ‡å®šæ— æ•ˆæˆ–æœªæŒ‡å®šæ—¶ï¼Œå®¹é‡å˜ä¸º 2 å€ */</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">newCapacity</span> <span class="operator">=</span> oldCapacity + ((capacityIncrement &gt; <span class="number">0</span>) ?</span><br><span class="line">                                     capacityIncrement : oldCapacity);</span><br><span class="line">    <span class="keyword">if</span> (newCapacity - minCapacity &lt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = minCapacity;</span><br><span class="line">    <span class="keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = hugeCapacity(minCapacity);</span><br><span class="line">    elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="13-3-3-é“¾è¡¨-LinkedList">13.3.3 é“¾è¡¨ LinkedList</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LinkedList</span>&lt;E&gt;</span><br><span class="line">    <span class="keyword">extends</span> <span class="title class_">AbstractSequentialList</span>&lt;E&gt;</span><br><span class="line">    <span class="keyword">implements</span> <span class="title class_">List</span>&lt;E&gt;, Deque&lt;E&gt;, Cloneable, java.io.Serializable</span><br></pre></td></tr></table></figure>
<blockquote>
<p>LinkedList æ˜¯ List çš„å®ç°å­ç±»ï¼Œåº•å±‚ä»¥é“¾è¡¨å½¢å¼å­˜å‚¨å…ƒç´ ã€‚</p>
<p>é“¾è¡¨æ˜¯ä¸€ç§<strong>éçº¿æ€§ç»“æ„</strong>ï¼šå…¶ä»¥èŠ‚ç‚¹æ–¹å¼å­˜å‚¨ï¼ŒèŠ‚ç‚¹é—´åœ¨å†…å­˜ä¸Šçš„ä½ç½®ä¸è¿ç»­ã€‚</p>
<p>é“¾è¡¨æ˜¯æœ‰åºçš„åˆ—è¡¨ã€‚å•å‘é“¾è¡¨æ¯ä¸ªèŠ‚ç‚¹åŒ…å« data åŸŸå’Œ next åŸŸã€‚é‚£äº› next åŸŸæŒ‡å‘ä¸‹ä¸€èŠ‚ç‚¹çš„ä½ç½®ã€‚</p>
<p>åŒå‘é“¾è¡¨åœ¨å•å‘é“¾è¡¨çš„åŸºç¡€ä¸Šï¼Œæ¯ä¸ªèŠ‚ç‚¹åŠ å…¥ prev åŒºåŸŸä»¥æŒ‡ç¤ºå…¶å‰æ–¹èŠ‚ç‚¹ã€‚è¿™æ ·ï¼Œå°±èƒ½å®ç°åŒå‘æŸ¥æ‰¾ã€‚åŒå‘é“¾è¡¨å¯ä»¥ä¸ä¾é è¾…åŠ©èŠ‚ç‚¹è€Œå®ç°è‡ªæˆ‘åˆ é™¤ã€‚</p>
<p>LinkedList åº•å±‚å®ç°äº† åŒå‘é“¾è¡¨ å’Œ åŒç«¯é˜Ÿåˆ— ç‰¹ç‚¹ã€‚</p>
<p>LinkedList å¯ä»¥æ·»åŠ  nullï¼Œå¯æ·»åŠ é‡å¤å…ƒç´ ã€‚ä½†æ²¡æœ‰å®ç°åŒæ­¥ï¼Œå› æ­¤çº¿ç¨‹ä¸å®‰å…¨ã€‚</p>
</blockquote>
<h4 id="å¸¸ç”¨æ–¹æ³•ï¼š-3">å¸¸ç”¨æ–¹æ³•ï¼š</h4>
<ul>
<li>
<p><code>void addLast(E e)</code>ï¼šå°¾æ’ä¸€ä¸ªæ–°çš„å…ƒç´ </p>
<p>LinkedList çš„ add æ–¹æ³•å³è°ƒç”¨è¯¥æ–¹æ³•</p>
</li>
<li>
<p><code>void addFirst(E e)</code>ï¼šå¤´æ’ä¸€ä¸ªæ–°çš„å…ƒç´ </p>
</li>
<li>
<p><code>E removeLast()</code>ï¼šç§»é™¤å¹¶è¿”å›å°¾éƒ¨å…ƒç´ ã€‚ä¸ºç©ºæ—¶æŠ¥é”™</p>
<p><code>E poll()</code>ï¼šç§»é™¤å¹¶è¿”å›å°¾éƒ¨å…ƒç´ ã€‚ä¸ºç©ºæ—¶è¿”å› null</p>
<p><code>E removeFirst()</code>ï¼šç§»é™¤å¹¶è¿”å›å¤´éƒ¨å…ƒç´ ã€‚ä¸ºç©ºæ—¶æŠ¥é”™</p>
</li>
<li>
<p><code>E getLast()</code>ï¼šä»…è¿”å›å°¾éƒ¨å…ƒç´ ã€‚ä¸ºç©ºæ—¶æŠ¥é”™</p>
<p><code>E peek()</code>ï¼šè¿”å›å°¾éƒ¨å…ƒç´ ã€‚ä¸ºç©ºæ—¶è¿”å› null</p>
<p><code>E element()</code>ï¼šè¿”å›å¤´éƒ¨å…ƒç´ ã€‚ä¸ºç©ºæ—¶è¿”å› null</p>
<p><code>E getFirst()</code></p>
</li>
</ul>
<h4 id="LinkedList-çš„æºç ">LinkedList çš„æºç </h4>
<ol>
<li>
<p>LinkedList åªæœ‰é»˜è®¤æ„é€ å™¨å’Œä¸€ä¸ªæ‹·è´æ„é€ å™¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">LinkedList</span><span class="params">()</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">LinkedList</span><span class="params">(Collection&lt;? extends E&gt; c)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>();</span><br><span class="line">    addAll(c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>LinkedList åº•å±‚ç»´æŠ¤äº†ä¸€ä¸ª åŒå‘é“¾è¡¨</p>
<p>ä¸¤ä¸ªå±æ€§ firstã€last åˆ†åˆ«æŒ‡å‘ é¦–èŠ‚ç‚¹ å’Œ å°¾èŠ‚ç‚¹</p>
<p>æ¯ä¸ªèŠ‚ç‚¹ï¼ˆNode å¯¹è±¡ï¼‰ï¼Œé‡Œé¢åˆç»´æŠ¤äº† prevã€nextã€item å±æ€§ã€‚</p>
<p>å…¶ä¸­é€šè¿‡ prev æŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé€šè¿‡ next æŒ‡å‘åä¸€ä¸ªèŠ‚ç‚¹ã€‚æœ€ç»ˆå®ç°åŒå‘é“¾è¡¨ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">transient</span> Node&lt;E&gt; first;</span><br><span class="line"><span class="keyword">transient</span> Node&lt;E&gt; last;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span>&lt;E&gt; &#123;</span><br><span class="line">    E item;</span><br><span class="line">    Node&lt;E&gt; next;</span><br><span class="line">    Node&lt;E&gt; prev;</span><br><span class="line"></span><br><span class="line">    Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) &#123;</span><br><span class="line">        <span class="built_in">this</span>.item = element;</span><br><span class="line">        <span class="built_in">this</span>.next = next;</span><br><span class="line">        <span class="built_in">this</span>.prev = prev;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>LinkedList ä¸éœ€è¦æ‰©å®¹ã€‚å…¶å¢åˆ å…ƒç´ æ—¶åªè¦æ”¹å˜èŠ‚ç‚¹çš„æŒ‡å‘å³å¯ã€‚</p>
<p>ä¹Ÿå› æ­¤ï¼Œå…¶æ·»åŠ ã€åˆ é™¤å…ƒç´ æ•ˆç‡æ¯”æ•°ç»„æ›´é«˜</p>
</li>
</ol>
<h4 id="ArrayList-å’Œ-LinkedList-çš„æ¯”è¾ƒï¼š">ArrayList å’Œ LinkedList çš„æ¯”è¾ƒï¼š</h4>
<table>
<thead>
<tr>
<th></th>
<th>åº•å±‚ç»“æ„</th>
<th>å¢åˆ æ•ˆç‡</th>
<th>æ”¹æŸ¥æ•ˆç‡</th>
</tr>
</thead>
<tbody>
<tr>
<td>ArrayList</td>
<td>å¯å˜æ•°ç»„</td>
<td>ä½ï¼ˆæ•°ç»„æ‰©å®¹ï¼‰</td>
<td>é«˜</td>
</tr>
<tr>
<td><code>LinkedList</code></td>
<td>åŒå‘é“¾è¡¨</td>
<td>é«˜ï¼ˆé“¾è¡¨è¿½åŠ ï¼‰</td>
<td>ä½</td>
</tr>
</tbody>
</table>
<p>åº”è¯¥æ ¹æ®å®é™…æƒ…å†µæ¥é€‰æ‹©ä½¿ç”¨çš„é›†åˆï¼š</p>
<ul>
<li>å¦‚æœæ”¹æŸ¥æ“ä½œå¤šï¼Œé€‰æ‹© ArrayListã€‚ä¸€èˆ¬æ¥è¯´ï¼Œåœ¨ç¨‹åºä¸­ï¼Œ80% - 90% éƒ½æ˜¯æŸ¥è¯¢ã€‚å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œé€‰æ‹© ArrayListã€‚</li>
<li>å¦‚æœå¢åˆ æ“ä½œå¤šï¼Œé€‰æ‹© LinkedList</li>
</ul>
<h3 id="13-3-4-ç¨€ç–æ•°ç»„">13.3.4 ç¨€ç–æ•°ç»„</h3>
<blockquote>
<p>äºŒç»´æ•°ç»„çš„å¾ˆå¤šå€¼æ˜¯é»˜è®¤å€¼ 0ï¼Œå› æ­¤è®°å½•äº†å¾ˆå¤šæ²¡æœ‰æ„ä¹‰çš„æ•°æ®ã€‚å› æ­¤ï¼Œå¯ä»¥ä½¿ç”¨ç¨€ç–æ•°ç»„ã€‚</p>
</blockquote>
<p>ç¨€ç–æ•°ç»„çš„å¤„ç†æ–¹æ³•ï¼š</p>
<ol>
<li>è®°å½•æ•°ç»„å…±æœ‰å‡ è¡Œå‡ åˆ—ï¼Œæœ‰å¤šå°‘ä¸ªä¸åŒçš„å€¼</li>
<li>æŠŠå…·æœ‰ä¸åŒå€¼çš„å…ƒç´ çš„è¡Œåˆ—åŠå€¼è®°å½•åœ¨ä¸€ä¸ªå°è§„æ¨¡æ•°ç»„ä¸­ï¼Œä»è€Œç¼©å°ç¨‹åºè§„æ¨¡</li>
</ol>
<p><strong>äºŒç»´æ•°ç»„è½¬æ¢ä¸ºç¨€ç–æ•°ç»„ï¼š</strong></p>
<p>ä¸‹é¢ç”¨ ArrayList æ¨¡æ‹Ÿä¸€ä¸ªç¨€ç–æ•°ç»„ã€‚</p>
<p>äºŒç»´æ•°ç»„ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[][] map = &#123;&#123;<span class="number">0</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span> ,<span class="number">0</span> , <span class="number">0</span>&#125;,</span><br><span class="line">              &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, -<span class="number">1</span>&#125;,</span><br><span class="line">              &#123;<span class="number">15</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">4</span>, <span class="number">0</span>, <span class="number">0</span>&#125;,</span><br><span class="line">              &#123;<span class="number">0</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;,</span><br><span class="line">              &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;,</span><br><span class="line">              &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>&#125;,</span><br><span class="line">              &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;&#125;;</span><br></pre></td></tr></table></figure>
<p>éå†åŸå§‹çš„äºŒç»´æ•°ç»„ï¼Œå¾—åˆ°æœ‰æ•ˆæ•°æ®çš„ä¸ªæ•° sumï¼Œå¹¶å°†äºŒç»´æ•°ç»„çš„æœ‰æ•ˆæ•°æ®å­˜å…¥ç¨€ç–æ•°ç»„</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">List&lt;<span class="type">int</span>[]&gt; sparseArray = <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line"></span><br><span class="line">sparseArray.add(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;map.length, map[<span class="number">0</span>].length, <span class="number">0</span>&#125;);	<span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">y</span> <span class="operator">=</span> <span class="number">0</span>; y &lt; map.length; y++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">0</span>; x &lt; map[<span class="number">0</span>].length; x++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (map[y][x] != <span class="number">0</span>) &#123;</span><br><span class="line">            sparseArray.add(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;y, x, map[y][x]&#125;);</span><br><span class="line">            sparseArray.get(<span class="number">0</span>)[<span class="number">2</span>]++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ç¨€ç–æ•°ç»„è½¬åŒ–ä¸ºäºŒç»´æ•°ç»„ï¼š</strong></p>
<p>è¯»å–ç¨€ç–æ•°ç»„çš„æ¯ä¸€è¡Œï¼ŒæŒ‰ç…§å…¶ç¬¬ä¸€è¡Œæ•°æ®ï¼Œåˆ›å»ºåŸå§‹çš„äºŒç»´æ•°ç»„ã€‚</p>
<p>è¯»å–åå‡ è¡Œæ•°æ®ï¼Œå°†å€¼èµ‹ç»™äºŒç»´æ•°ç»„</p>
<h3 id="13-3-5-æ ˆ-Stack">13.3.5 æ ˆ Stack</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Stack</span>&lt;E&gt; <span class="keyword">extends</span> <span class="title class_">Vector</span>&lt;E&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Stack æ˜¯ Vector çš„å­ç±»ã€‚ä»¥æ•°ç»„æ¨¡æ‹Ÿäº†æ ˆçš„æ•°æ®ç»“æ„ã€‚</p>
<p>æ ˆæ˜¯ä¸€ä¸ªå…ˆå…¥åå‡ºçš„æœ‰åºåˆ—è¡¨ã€‚å…¶å…ƒç´ ä¹‹æ’å…¥åˆ é™¤åªèƒ½åœ¨è¯¥çº¿æ€§è¡¨çš„åŒä¸€ç«¯è¿›è¡Œã€‚</p>
<p>å…¶å…è®¸å¢åˆ çš„ä¸€ç«¯ç§°ä¸ºæ ˆé¡¶ï¼Œå¦ä¸€ç«¯å³ä¸ºæ ˆåº•ã€‚</p>
<p>æœ€å…ˆæ”¾å…¥çš„å…ƒç´ ä½äºæ ˆåº•ï¼Œæœ€åæ”¾å…¥çš„å…ƒç´ ä½äºæ ˆé¡¶ã€‚</p>
<p>æ”¾å…¥å…ƒç´ ç§°ä¸ºå…¥æ ˆï¼ˆpushï¼‰ï¼Œå–å‡ºå…ƒç´ ç§°ä¸ºå‡ºæ ˆï¼ˆpopï¼‰</p>
</blockquote>
<ul>
<li>å­ç¨‹åºçš„è°ƒç”¨</li>
<li>å¤„ç†é€’å½’è°ƒç”¨</li>
<li>è¡¨è¾¾å¼çš„è½¬æ¢ä¸æ±‚å€¼</li>
<li>äºŒå‰æ ‘çš„éå†</li>
<li>å›¾å½¢çš„æ·±åº¦ä¼˜å…ˆæœç´¢æ³•</li>
</ul>
<h4 id="å¸¸ç”¨æ–¹æ³•ï¼š-4">å¸¸ç”¨æ–¹æ³•ï¼š</h4>
<ul>
<li>
<p><code>E push(E item)</code>ï¼šå°†å…ƒç´  item å‹å…¥æ ˆã€‚è¿”å›å€¼æ˜¯ item è‡ªå·±</p>
</li>
<li>
<p><code>E pop()</code>ï¼šè®©æ ˆé¡¶å…ƒç´ å‡ºæ ˆ</p>
</li>
<li>
<p><code>E peek()</code>ï¼šä»…è·å–æ ˆé¡¶å…ƒç´ </p>
</li>
<li>
<p><code>int search(Object o)</code>ï¼šæŸ¥æ‰¾è¯¥å…ƒç´ æœ€åå‡ºç°çš„ä½ç½®ã€‚</p>
<p>æ ˆåº•ä¸º 1ï¼Œæ ˆé¡¶ä¸º size()ï¼Œä¸å­˜åœ¨è¿”å› -1</p>
</li>
</ul>
<h4 id="13-3-5-1-æ ˆæ¨¡æ‹Ÿè®¡ç®—å™¨">13.3.5.1 æ ˆæ¨¡æ‹Ÿè®¡ç®—å™¨</h4>
<blockquote>
<p>ä½¿ç”¨æ ˆç»“æ„å®Œæˆå¯¹è®¡ç®—å™¨çš„å®ç°</p>
</blockquote>
<p>è¦è¿›è¡Œè®¡ç®—ï¼Œéœ€è¦è·å¾—è¡¨è¾¾å¼ã€‚</p>
<p>è¡¨è¾¾å¼åˆ†ä¸ºä¸‰ç§ï¼š</p>
<ul>
<li>
<p><strong>ä¸­ç¼€è¡¨è¾¾å¼ï¼š</strong></p>
<p>ä¸­ç¼€è¡¨è¾¾å¼å³ç”Ÿæ´»ä¸­å¸¸è§çš„è¿ç®—è¡¨è¾¾å¼ã€‚æ¯”å¦‚ï¼š(3 + 4) * 5 - 6</p>
<p>ä¸­ç¼€è¡¨è¾¾å¼æ˜¯äººæœ€ç†Ÿæ‚‰çš„ã€‚ä½†æ˜¯å¯¹äºè®¡ç®—æœºæ¥è¯´å´ä¸å¥½æ“ä½œã€‚å› æ­¤ï¼Œè®¡ç®—æ—¶å¸¸å°†å…¶è½¬åŒ–ä¸ºå…¶ä»–è¡¨è¾¾å¼è¿›è¡Œæ“ä½œã€‚</p>
</li>
<li>
<p><strong>å‰ç¼€è¡¨è¾¾å¼ï¼š</strong></p>
<p>å‰ç¼€è¡¨è¾¾å¼ï¼ˆæ³¢å…°è¡¨è¾¾å¼ï¼‰æ˜¯ä¸€ç§æ²¡æœ‰æ‹¬å·çš„è¡¨è¾¾å¼ã€‚å…¶å°†è¿ç®—ç¬¦å†™åœ¨å‰é¢ï¼Œæ“ä½œæ•°å†™åœ¨åé¢</p>
<blockquote>
<p>(3 + 4) * 5 - 6 çš„å‰ç¼€è¡¨è¾¾å¼ä¸ºï¼š + 3 * 4 - 5 6</p>
<p>(1 + 2) * (3 + 4) çš„å‰ç¼€è¡¨è¾¾å¼ä¸ºï¼š* + 1 2 + 3 4</p>
</blockquote>
<p>å‰ç¼€è¡¨è¾¾å¼çš„è®¡ç®—æœºæ±‚å€¼ï¼š</p>
<ul>
<li>ä»<strong>å³</strong>å‘<strong>å·¦</strong>æ‰«æè¡¨è¾¾å¼</li>
<li>å°†æ•°å­—å‹å…¥å †æ ˆ</li>
<li>é‡åˆ°è¿ç®—ç¬¦çš„åœºåˆï¼Œå¯¹æ•°å­—æ ˆé¡¶å…ƒç´ ä¸æ¬¡é¡¶å…ƒç´ è¿›è¡Œè®¡ç®—ï¼Œå¹¶æŠŠé‚£ä¸ªç»“æœå…¥æ ˆ</li>
<li>é‡å¤è¯¥æ“ä½œï¼Œæœ€ç»ˆæ•°å­—æ ˆçš„å”¯ä¸€å‰©ä½™æ•°å­—å³ä¸ºè¿ç®—ç»“æœ</li>
</ul>
</li>
<li>
<p><strong>åç¼€è¡¨è¾¾å¼ï¼š</strong></p>
<p>åç¼€è¡¨è¾¾å¼ï¼ˆé€†æ³¢å…°è¡¨è¾¾å¼ï¼‰ä¸å‰ç¼€è¡¨è¾¾å¼ç›¸ä¼¼ã€‚ä½†å…¶è¿ç®—ç¬¦ä½äºæ“ä½œæ•°ä¹‹å</p>
<blockquote>
<p>(3 + 4) * 5 - 6 çš„åç¼€è¡¨è¾¾å¼ä¸ºï¼š 3 4 + 5 * 6 -</p>
<p>(1 + 2) * (3 + 4) çš„åç¼€è¡¨è¾¾å¼ä¸ºï¼š1 2 + 3 4 + *</p>
</blockquote>
<p>åç¼€è¡¨è¾¾å¼çš„è®¡ç®—æœºæ±‚å€¼ï¼š</p>
<ul>
<li>ä»<strong>å·¦</strong>å‘<strong>å³</strong>æ‰«æè¡¨è¾¾å¼</li>
<li>å°†æ•°å­—å‹å…¥å †æ ˆ</li>
<li>é‡åˆ°è¿ç®—ç¬¦çš„åœºåˆï¼Œå¯¹æ•°å­—æ ˆé¡¶å…ƒç´ ä¸æ¬¡é¡¶å…ƒç´ è¿›è¡Œè®¡ç®—ï¼Œå¹¶æŠŠé‚£ä¸ªç»“æœå…¥æ ˆ</li>
<li>é‡å¤è¯¥æ“ä½œï¼Œæœ€ç»ˆæ•°å­—æ ˆçš„å”¯ä¸€å‰©ä½™æ•°å­—å³ä¸ºè¿ç®—ç»“æœ</li>
</ul>
</li>
</ul>
<p>å¯¹äºäººç±»æ¥è¯´ï¼Œä¸­ç¼€è¡¨è¾¾å¼æœ€ä¸ºç†Ÿæ‚‰ã€‚ä½†å¯¹äºè®¡ç®—æœºæ¥è¯´ï¼Œå‰ç¼€ã€åç¼€è¡¨è¾¾å¼æ›´å®¹æ˜“è¯†åˆ«ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥å°†ä¸­ç¼€è¡¨è¾¾å¼è½¬åŒ–ä¸ºåç¼€è¡¨è¾¾å¼ï¼Œå†è¿›è¡Œè¿ç®—ã€‚</p>
<p><strong>ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢ä¸ºåç¼€è¡¨è¾¾å¼ï¼š</strong></p>
<ol>
<li>
<p>åˆå§‹åŒ–ä¸¤ä¸ªæ ˆï¼šè¿ç®—ç¬¦æ ˆ operator_stackã€è¡¨è¾¾å¼æ ˆ formula_stack</p>
</li>
<li>
<p>ä»å·¦åˆ°å³æ‰«æä¸­ç¼€è¡¨è¾¾å¼</p>
</li>
<li>
<p>é‡åˆ°æ“ä½œæ•°æ—¶ï¼Œå°†å…¶å‹å…¥è¡¨è¾¾å¼æ ˆ formula_stack</p>
</li>
<li>
<p>é‡åˆ°è¿ç®—ç¬¦æ—¶ï¼Œæ¯”è¾ƒå…¶ä¸ operator_stack æ ˆé¡¶è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§ã€‚</p>
<ul>
<li>operator_stack ä¸ºç©ºï¼Œæˆ–æ ˆé¡¶ä¸º <code>(</code> çš„åœºåˆï¼Œè®©è¿ç®—ç¬¦å…¥æ ˆ</li>
<li>ä¼˜å…ˆçº§é«˜äºæ ˆé¡¶è¿ç®—ç¬¦çš„åœºåˆï¼Œè®©å…¶å…¥æ ˆ</li>
<li>ä¼˜å…ˆçº§ä½äºæˆ–ç­‰äºæ ˆé¡¶è¿ç®—ç¬¦çš„åœºåˆï¼Œå°†é‚£ä¸ªå †é¡¶è¿ç®—ç¬¦å¼¹å‡ºå¹¶å‹å…¥ formula_stackã€‚ä¹‹åï¼Œé‡å¤è¯¥æ­¥éª¤ã€‚</li>
</ul>
</li>
<li>
<p>é‡åˆ°æ‹¬å·æ—¶ï¼š</p>
<ul>
<li>é‡åˆ° <code>(</code> æ—¶ï¼Œå‹å…¥ operator_stack</li>
<li>é‡åˆ° <code>)</code> æ—¶ï¼Œç›´åˆ°é‡åˆ° <code>(</code> å‰ï¼Œä¾æ¬¡å¼¹å‡º operator_stack å †é¡¶çš„è¿ç®—ç¬¦ï¼Œå¹¶å‹å…¥ formula_stackã€‚ä¹‹åå°†è¿™ä¸€å¯¹æ‹¬å·ä¸¢å¼ƒã€‚</li>
</ul>
</li>
<li>
<p>åˆ°è¾¾è¡¨è¾¾å¼æœ€å³è¾¹æ—¶ï¼Œä¾æ¬¡å¼¹å‡º operator_stack å †é¡¶çš„è¿ç®—ç¬¦ï¼Œå‹å…¥ formula_stackã€‚</p>
</li>
<li>
<p>æ­¤æ—¶ï¼Œformula_stack å³ä¸ºåç¼€è¡¨è¾¾å¼ã€‚</p>
<p>ä½¿ç”¨ Java çš„ toArray æ–¹æ³•å°†å…¶è½¬ä¸ºæ•°ç»„ã€‚æˆ–å°†å…¶ä¾æ¬¡å¼¹å‡ºï¼Œå¹¶é€†åºè¾“å‡ºã€‚</p>
</li>
</ol>
<p><strong>è®¡ç®—å™¨çš„å®ç°ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Calculator</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Map&lt;Character, Integer&gt; priority = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        priority.put(<span class="string">&#x27;+&#x27;</span>, <span class="number">1</span>);</span><br><span class="line">        priority.put(<span class="string">&#x27;-&#x27;</span>, <span class="number">1</span>);</span><br><span class="line">        priority.put(<span class="string">&#x27;*&#x27;</span>, <span class="number">2</span>);</span><br><span class="line">        priority.put(<span class="string">&#x27;/&#x27;</span>, <span class="number">2</span>);</span><br><span class="line">        priority.put(<span class="string">&#x27;Ã—&#x27;</span>, <span class="number">2</span>);</span><br><span class="line">        priority.put(<span class="string">&#x27;Ã·&#x27;</span>, <span class="number">2</span>);</span><br><span class="line">        priority.put(<span class="string">&#x27;(&#x27;</span>, -<span class="number">100</span>);</span><br><span class="line">        priority.put(<span class="string">&#x27;)&#x27;</span>, -<span class="number">10</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">double</span> <span class="title function_">calculate</span><span class="params">(String formula)</span> &#123;</span><br><span class="line">        String[] ss = formula.split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">        Stack&lt;String&gt; operator_stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">        Stack&lt;String&gt; formula_stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (String s : ss) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s.matches(<span class="string">&quot;\\d+([.]\\d+)?&quot;</span>)) &#123;</span><br><span class="line">                formula_stack.push(s);</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (operator_stack.empty() || s.equals(<span class="string">&quot;(&quot;</span>)) &#123;</span><br><span class="line">                operator_stack.push(s);</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">String</span> <span class="variable">temp</span> <span class="operator">=</span> operator_stack.peek();</span><br><span class="line">            <span class="keyword">while</span> (priority.get(s.charAt(<span class="number">0</span>)) &lt;= priority.get(temp.charAt(<span class="number">0</span>))) &#123;</span><br><span class="line">                formula_stack.push(operator_stack.pop());</span><br><span class="line">                <span class="keyword">if</span> (operator_stack.empty()) <span class="keyword">break</span>;</span><br><span class="line">                temp = operator_stack.peek();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (s.equals(<span class="string">&quot;)&quot;</span>)) &#123;</span><br><span class="line">                operator_stack.pop();</span><br><span class="line">            &#125; <span class="keyword">else</span> operator_stack.push(s);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (!operator_stack.empty()) &#123;</span><br><span class="line">            formula_stack.push(operator_stack.pop());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> anti_Poland(String.join(<span class="string">&quot; &quot;</span>, formula_stack.toArray(<span class="keyword">new</span> <span class="title class_">String</span>[]&#123;&#125;)));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">double</span> <span class="title function_">anti_Poland</span><span class="params">(String formula)</span> &#123;</span><br><span class="line">        String[] ss = formula.split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">        Stack&lt;Double&gt; ns = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (String s : ss) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="type">double</span> <span class="variable">num</span> <span class="operator">=</span> Double.parseDouble(s);</span><br><span class="line">                ns.push(num);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                <span class="keyword">switch</span> (s) &#123;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&quot;+&quot;</span>:</span><br><span class="line">                        ns.push(ns.pop() + ns.pop());</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&quot;*&quot;</span>:</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&quot;Ã—&quot;</span>:</span><br><span class="line">                        ns.push(ns.pop() * ns.pop());</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&quot;/&quot;</span>:</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&quot;Ã·&quot;</span>:</span><br><span class="line">                        ns.push(<span class="number">1</span> / ns.pop() * ns.pop());</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&quot;-&quot;</span>:</span><br><span class="line">                        ns.push(-ns.pop() + ns.pop());</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">default</span>:</span><br><span class="line">                        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;Illegal operator&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ns.pop();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="13-3-6-è·³è¡¨-SkipList">13.3.6 è·³è¡¨ SkipList</h3>
<p>è·³è¡¨æ˜¯ä¸€ç§ç‰¹æ®Šçš„é“¾è¡¨ã€‚æ™®é€šçš„é“¾è¡¨è™½ç„¶æ·»åŠ ã€åˆ é™¤èŠ‚ç‚¹çš„é€Ÿåº¦å¾ˆå¿«ï¼ˆO(1)ï¼‰ï¼Œä½†æ˜¯è¦æŸ¥æ‰¾èŠ‚ç‚¹å´å¾ˆæ…¢ï¼ˆO(n)ï¼‰ã€‚è·³è¡¨æ˜¯ä¸€ä¸ªå¤šå±‚æ¬¡çš„é“¾è¡¨ï¼Œå…¶åœ¨é“¾è¡¨çš„åŸºç¡€ä¸Šå¢åŠ äº†å¤šçº§ç´¢å¼•ï¼Œå®ç°äº† O(ã’n) çš„æŸ¥æ‰¾é€Ÿåº¦ã€‚</p>
<p>è·³è¡¨å°†åŸæœ¬æ•°æ®å±‚çš„æ•°æ®æŒ‰ç…§ä¸€å®šé—´éš”æŠ½å–èŠ‚ç‚¹å½¢æˆç´¢å¼•å±‚ï¼Œä¹‹åå†ä»ç´¢å¼•å±‚æŠ½å–èŠ‚ç‚¹å½¢æˆç¬¬äºŒçº§ç´¢å¼•ï¼Œä»¥æ­¤ç±»æ¨å½¢æˆå¤šå±‚ç´¢å¼•ã€‚</p>
<p>è·³è¡¨çš„æŸ¥è¯¢é€Ÿåº¦å¾—åˆ°äº†ä¼˜åŒ–ï¼Œä½†å ç”¨ç©ºé—´æ›´å¤§ã€‚æœ¬è´¨ä¸Šæ˜¯ä¸€ç§ç©ºé—´æ¢æ—¶é—´çš„åšæ³•ã€‚</p>
<p><strong>æŸ¥è¯¢</strong></p>
<p>ä»æœ€ç¨€ç–çš„ç´¢å¼•å±‚ï¼ˆæœ€ä¸Šå±‚ï¼‰å¼€å§‹ï¼Œç¡®å®šé‚£ä¸ªå¾…æŸ¥æ‰¾æ•°æ®æ‰€åœ¨çš„èŒƒå›´ï¼Œé€å±‚å‘ä¸‹å¹¶ç¡®å®šèŒƒå›´ï¼Œç›´è‡³æ•°æ®å±‚ã€‚</p>
<p><strong>å¢åˆ </strong></p>
<p>åˆ é™¤å…ƒç´ æ—¶ï¼Œå¦‚æœé‚£ä¸ªå…ƒç´ æ˜¯ç´¢å¼•å…ƒç´ ï¼Œé‚£äº›ç´¢å¼•ä¹Ÿä¼šè¢«åˆ é™¤ã€‚åŒæ—¶ï¼Œå¦‚æœåªå‘æ•°æ®å±‚ä¸­å¢åŠ å…ƒç´ ï¼Œå¯èƒ½ä½¿ç´¢å¼•é—´éš”è¿‡å¤§ï¼Œä»è€Œé™ä½æŸ¥æ‰¾æ•ˆç‡ã€‚å¦‚æœåœ¨å¢åŠ å…ƒç´ æ—¶è¿˜èƒ½ä¿æŒç´¢å¼•æ•°é‡çš„åŠ¨æ€å¹³è¡¡ï¼Œå°±èƒ½é˜²æ­¢è·³è¡¨é€€åŒ–ï¼Œä¿æŒè·³è¡¨æ•ˆç‡ã€‚</p>
<p>è·³è¡¨ç»™å‡ºçš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼šåœ¨å¢åŠ å…ƒç´ æ—¶äº§ç”Ÿä¸€ä¸ªéšæœºå€¼ï¼Œè®©è¿™ä¸ªéšæœºå€¼å†³å®šè¯¥æ–°èŠ‚ç‚¹æ˜¯å¦æˆä¸ºç´¢å¼•èŠ‚ç‚¹ï¼Œä»¥åŠæˆä¸ºå‡ çº§ç´¢å¼•èŠ‚ç‚¹ã€‚</p>
<p><strong>å®ç°è·³è¡¨</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Skiplist</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> level;					<span class="comment">// è¯¥è·³è¡¨çš„åˆè®¡å±‚æ•°ï¼ŒåŒ…æ‹¬æ•°æ®å±‚å’Œç´¢å¼•å±‚</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Random seed;					<span class="comment">// éšæœºæ•°ç§å­</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Node root;					<span class="comment">// é“¾è¡¨å¼€å¤´</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Node end;						<span class="comment">// é“¾è¡¨ç»“å°¾</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span> &#123;					<span class="comment">// é“¾è¡¨èŠ‚ç‚¹ç±»</span></span><br><span class="line">        <span class="type">int</span> val;				<span class="comment">// å€¼</span></span><br><span class="line">        <span class="type">int</span> count;				<span class="comment">// å‚¨å­˜çš„å€¼çš„æ•°é‡</span></span><br><span class="line">        Node[] next;			<span class="comment">// æŒ‡å‘çš„ä¸‹ä¸€èŠ‚ç‚¹</span></span><br><span class="line">        Node[] prev;			<span class="comment">// æŒ‡å‘çš„ä¸Šä¸€èŠ‚ç‚¹</span></span><br><span class="line">        						<span class="comment">// éœ€è¦æŒ‡å‡ºçš„æ˜¯ï¼šnext å’Œ prev çš„é•¿åº¦æŒ‡ç¤ºäº†èŠ‚ç‚¹æ‰€åœ¨çš„æœ€é«˜å±‚çº§</span></span><br><span class="line">        						<span class="comment">// é•¿åº¦ä¸º 1 æ—¶ä»…å¤„åœ¨æ•°æ®å±‚ï¼Œ2 æ—¶ä¹Ÿä½äºä¸€çº§ç´¢å¼•ï¼Œä»¥æ­¤ç±»æ¨</span></span><br><span class="line">        						<span class="comment">// ä¹Ÿå°±æ˜¯è¯´ï¼Œnext å’Œ prev é‡Œï¼Œä¸‹æ ‡ 0 çš„ä½ç½®ä½äºæ•°æ®å±‚ï¼Œ1 ä½äºä¸€çº§ç´¢å¼•å±‚</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* ä¸‰ä¸ªå‚æ•°æ˜¯ï¼šå€¼ valï¼ŒèŠ‚ç‚¹çš„å±‚çº§ randï¼ŒèŠ‚ç‚¹å‚¨å­˜å€¼çš„æ•°é‡ count */</span></span><br><span class="line">        Node(<span class="type">int</span> val, <span class="type">int</span> rand, <span class="type">int</span> count) &#123;</span><br><span class="line">            <span class="built_in">this</span>.val = val;</span><br><span class="line">            <span class="built_in">this</span>.count = count;</span><br><span class="line">            next = <span class="keyword">new</span> <span class="title class_">Node</span>[rand];</span><br><span class="line">            prev = <span class="keyword">new</span> <span class="title class_">Node</span>[rand];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* æ„é€ å™¨ */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Skiplist</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>(<span class="number">4</span>);</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">/* æœ‰å‚æ„é€ å™¨ã€‚è¾“å…¥çš„å€¼æ˜¯ç´¢å¼•å±‚æ•°é‡ã€‚è¯¥å€¼è‡³å°‘åº”ä¸º 1 */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Skiplist</span><span class="params">(<span class="type">int</span> level)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (level &lt; <span class="number">1</span> || level &gt; <span class="number">30</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(level == <span class="number">0</span> ?</span><br><span class="line">                    <span class="string">&quot;Why not choose a LinkedList?&quot;</span> :</span><br><span class="line">                    <span class="string">&quot;SkipList level out of range: given &quot;</span> + level + <span class="string">&quot; out of range [1, 30]&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.level = level + <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">this</span>.seed = <span class="keyword">new</span> <span class="title class_">Random</span>(System.currentTimeMillis());</span><br><span class="line">        root = <span class="keyword">new</span> <span class="title class_">Node</span>(Integer.MIN_VALUE, <span class="built_in">this</span>.level, <span class="number">0</span>);</span><br><span class="line">        end = <span class="keyword">new</span> <span class="title class_">Node</span>(Integer.MAX_VALUE, <span class="built_in">this</span>.level, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> <span class="number">0</span>; n &lt; <span class="built_in">this</span>.level; n++) &#123;</span><br><span class="line">            root.next[n] = end;</span><br><span class="line">            end.prev[n] = root;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">/* æŸ¥è¯¢ä¸€ä¸ªå€¼æ˜¯å¦å­˜åœ¨ */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">search</span><span class="params">(<span class="type">int</span> target)</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">find</span> <span class="operator">=</span> position(target);</span><br><span class="line">        <span class="keyword">return</span> find.val == target &amp;&amp; find.count &gt; <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">/* æœç´¢ä¸€ä¸ªå€¼çš„ä½ç½®ã€‚ä¸å­˜åœ¨æ—¶ä¼šè¿”å›æ•°æ®å±‚ä¸­å‰ä¸€ä¸ªèŠ‚ç‚¹çš„ä½ç½® */</span></span><br><span class="line">    <span class="keyword">private</span> Node <span class="title function_">position</span><span class="params">(<span class="type">int</span> target)</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">see</span> <span class="operator">=</span> root;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (see.val == target) <span class="keyword">return</span> see;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> see.next.length - <span class="number">1</span>; ; n--) &#123;</span><br><span class="line">                <span class="keyword">if</span> (n &lt; <span class="number">0</span>) <span class="keyword">return</span> see;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (see.next[n].val &lt;= target) &#123;</span><br><span class="line">                    see = see.next[n];</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">/* æ·»åŠ ä¸€ä¸ªå€¼ */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> num)</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">pos</span> <span class="operator">=</span> position(num);</span><br><span class="line">        <span class="keyword">if</span> (pos.val == num) &#123;		<span class="comment">// å¦‚æœè¿™ä¸ªèŠ‚ç‚¹å·²ç»å»ºç«‹ï¼Œå°±ä»…ä½¿è¯¥èŠ‚ç‚¹è®¡æ•°å¢åŠ </span></span><br><span class="line">            pos.count++;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">rand</span> <span class="operator">=</span> <span class="number">1</span> + level - Integer.toBinaryString(seed.nextInt(<span class="number">1</span> &lt;&lt; level)).length();</span><br><span class="line">        			<span class="comment">// level çš„å€¼ç­‰äºæ€»å±‚æ•°ã€‚seed æ˜¯ä¸€ä¸ªéšæœºæ•°ç§å­ï¼ŒnextInt(int n) æ–¹æ³•è¿”å› [0, n) çš„æ•°å€¼</span></span><br><span class="line">        			<span class="comment">// Integer.toBinaryString(int n) æ–¹æ³•æ˜¯å°†ä¸€ä¸ªæ•°å­—è½¬åŒ–æˆäºŒè¿›åˆ¶è¡¨ç¤ºçš„å­—ç¬¦ä¸²</span></span><br><span class="line">        			<span class="comment">// seed.nextInt(1 &lt;&lt; level) ä¿è¯äº†è¿”å›å€¼çš„äºŒè¿›åˆ¶é•¿åº¦åœ¨ [1, level] ä¹‹é—´ï¼Œå¹¶ä¸”æ¦‚ç‡åˆæ„</span></span><br><span class="line">        <span class="type">Node</span> <span class="variable">add</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(num, rand, <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> <span class="number">0</span>; t &lt; rand; ) &#123;			<span class="comment">// å°†æ–°èŠ‚ç‚¹æ·»åŠ åˆ°é“¾è¡¨ä¸­ã€‚</span></span><br><span class="line">            <span class="keyword">for</span> (; t &lt; pos.next.length &amp;&amp; t &lt; rand; t++) &#123;</span><br><span class="line">                <span class="type">Node</span> <span class="variable">next</span> <span class="operator">=</span> pos.next[t];</span><br><span class="line">                add.next[t] = next;</span><br><span class="line">                next.prev[t] = add;</span><br><span class="line">                pos.next[t] = add;</span><br><span class="line">                add.prev[t] = pos;</span><br><span class="line">            &#125;</span><br><span class="line">            pos = pos.prev[pos.prev.length - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">/* åˆ é™¤èŠ‚ç‚¹ï¼ˆçš„å€¼ï¼‰ */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">erase</span><span class="params">(<span class="type">int</span> num)</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">pos</span> <span class="operator">=</span> position(num);</span><br><span class="line">        <span class="keyword">if</span> (pos.val == num &amp;&amp; pos.count &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            pos.count--;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="13-4-é˜Ÿåˆ—æ¥å£-Queue">13.4 é˜Ÿåˆ—æ¥å£ Queue</h2>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Queue</span>&lt;E&gt; <span class="keyword">extends</span> <span class="title class_">Collection</span>&lt;E&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Queue æ˜¯ Collection çš„å­æ¥å£</p>
<p>Queue çš„å®ç°å­ç±»éƒ½æ˜¯é˜Ÿåˆ—å¼é›†åˆã€‚é˜Ÿåˆ—æ˜¯ä¸€ä¸ªæœ‰åºåˆ—è¡¨ï¼Œå¯ä»¥ç”¨æ•°ç»„æˆ–é“¾è¡¨æ¥å®ç°</p>
<p>é˜Ÿåˆ—éµå¾ªå…ˆå…¥å…ˆå‡ºçš„åŸåˆ™ã€‚é˜Ÿåˆ—ä¸­å…ƒç´ æ˜¯ä»¥æ·»åŠ é¡ºåºå–å‡ºçš„ã€‚</p>
<p>å‘é˜Ÿåˆ—ä¸­å¢åŠ å…ƒç´ ç§°ä¸º<strong>å…¥åˆ—</strong>ï¼ˆpushï¼‰ï¼Œå–å‡ºå…ƒç´ ç§°ä¸º<strong>å‡ºåˆ—</strong>ï¼ˆpopï¼‰</p>
</blockquote>
<h3 id="å¸¸ç”¨æ–¹æ³•ï¼š-5">å¸¸ç”¨æ–¹æ³•ï¼š</h3>
<ul>
<li>
<p><code>add(E e)</code>ï¼šæ·»åŠ å…ƒç´ ã€‚é˜Ÿåˆ—æ»¡çš„åœºåˆæŠ›å‡ºå¼‚å¸¸</p>
<p><code>put(E e)</code>ï¼šæ·»åŠ å…ƒç´ ã€‚é˜Ÿåˆ—æ»¡çš„åœºåˆå¯èƒ½é˜»å¡</p>
<p><code>boolean offer(E e)</code>ï¼šæ·»åŠ å…ƒç´ ã€‚é˜Ÿåˆ—æ»¡çš„åœºåˆè¿”å› false</p>
</li>
<li>
<p><code>E remove()</code>ï¼šç§»é™¤å¹¶è¿”å›é˜Ÿåˆ—å¤´éƒ¨å…ƒç´ ã€‚é˜Ÿåˆ—ç©ºçš„åœºåˆæŠ›å‡ºå¼‚å¸¸</p>
<p><code>E poll()</code>ï¼šç§»é™¤å¹¶è¿”å›é˜Ÿåˆ—å¤´éƒ¨å…ƒç´ </p>
<p><code>E take()</code>ï¼šç§»é™¤å¹¶è¿”å›é˜Ÿåˆ—å¤´éƒ¨å…ƒç´ ã€‚é˜Ÿåˆ—ç©ºçš„åœºåˆå¯èƒ½é˜»å¡</p>
</li>
<li>
<p><code>E peek()</code>ï¼šä»…è¿”å›é˜Ÿåˆ—å¤´éƒ¨å…ƒç´ ã€‚ä¸ºç©ºæ—¶è¿”å› null</p>
<p><code>E element()</code>ï¼šä»…è¿”å›é˜Ÿåˆ—å¤´éƒ¨å…ƒç´ ã€‚ä¸ºç©ºæ—¶æŠ›å‡ºå¼‚å¸¸</p>
</li>
</ul>
<h3 id="13-4-1-ä¼˜å…ˆçº§é˜Ÿåˆ—-PriorityQueue">13.4.1 ä¼˜å…ˆçº§é˜Ÿåˆ— PriorityQueue</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PriorityQueue</span>&lt;E&gt; <span class="keyword">extends</span> <span class="title class_">AbstractQueue</span>&lt;E&gt;</span><br><span class="line">    <span class="keyword">implements</span> <span class="title class_">java</span>.io.Serializable</span><br></pre></td></tr></table></figure>
<blockquote>
<p>PriorityQueue æ˜¯ä¸€ä¸ªæ— ç•Œä¼˜å…ˆçº§é˜Ÿåˆ—ã€‚åº•å±‚ä»¥æ•°ç»„å‚¨å­˜å…ƒç´ ã€‚</p>
<p>æ— ç•Œé˜Ÿåˆ—ï¼šå³æ²¡æœ‰èŒƒå›´é™åˆ¶çš„é˜Ÿåˆ—ã€‚</p>
<p>PriorityQueue ä¸å…è®¸ null å…ƒç´ ï¼Œä¹Ÿä¸å…è®¸ä¸å¯æ¯”è¾ƒçš„å…ƒç´ ã€‚</p>
<p>PriorityQueue ä¸­çš„å…ƒç´ ä»¥è‡ªç„¶é¡ºåºï¼Œæˆ–ä¼ å…¥çš„æ¯”è¾ƒå™¨å†³å®šçš„é¡ºåºæ’åºã€‚å…¶ä¸­çš„æœ€å°å…ƒç´ ä½äºé˜Ÿå¤´ï¼Œæœ€å¤§å…ƒç´ ä½äºé˜Ÿå°¾ã€‚</p>
<p>ä»¥è¿­ä»£å™¨éå†æ—¶ï¼Œä¼šæŒ‰ç…§åŸæœ¬çš„æ”¾å…¥é¡ºåºè·å–å…ƒç´ ã€‚PriorityQueue çš„æºç ï¼š</p>
</blockquote>
<ol>
<li>
<p>åº•å±‚ç»´æŠ¤äº†ä¸€ä¸ª Object ç±»å‹çš„æ•°ç»„ queueã€‚ç”¨ä»¥å­˜æ”¾å…ƒç´ </p>
<p>å¦ç»´æŠ¤äº†ä¸€ä¸ªæ¯”è¾ƒå™¨ comparatorï¼Œç”¨ä»¥æ¯”è¾ƒå…ƒç´ </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">transient</span> Object[] queue;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> Comparator&lt;? <span class="built_in">super</span> E&gt; comparator;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>é»˜è®¤æ„é€ å™¨åˆå§‹å®¹é‡ä¸º 11ï¼Œæ¯”è¾ƒå™¨ä¸º null</p>
<p>ä¹Ÿèƒ½æŒ‡å®šåˆå§‹å®¹é‡ï¼Œæˆ–ä¼ å…¥æ¯”è¾ƒå™¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">PriorityQueue</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>(DEFAULT_INITIAL_CAPACITY, <span class="literal">null</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">PriorityQueue</span><span class="params">(<span class="type">int</span> initialCapacity)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>(initialCapacity, <span class="literal">null</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">PriorityQueue</span><span class="params">(Comparator&lt;? <span class="built_in">super</span> E&gt; comparator)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>(DEFAULT_INITIAL_CAPACITY, comparator);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">PriorityQueue</span><span class="params">(<span class="type">int</span> initialCapacity,</span></span><br><span class="line"><span class="params">                     Comparator&lt;? <span class="built_in">super</span> E&gt; comparator)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (initialCapacity &lt; <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>();</span><br><span class="line">    <span class="built_in">this</span>.queue = <span class="keyword">new</span> <span class="title class_">Object</span>[initialCapacity];</span><br><span class="line">    <span class="built_in">this</span>.comparator = comparator;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æ”¾å…¥æ—¶ä¾é æ¯”è¾ƒå™¨ comparator è¿›è¡Œæ’åºã€‚</p>
<p>é‚£ä¸ªæ¯”è¾ƒå™¨ä¸º null çš„åœºåˆï¼Œæ¯æ¬¡æ”¾å…¥å…ƒç´ ä¼šæŒ‰å…ƒç´ è‡ªèº«çš„è‡ªç„¶é¡ºåºè¿›è¡Œæ’åºã€‚</p>
<p>ä¸èƒ½æ’åºçš„åœºåˆä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p>
</li>
<li>
<p>æ‰©å®¹æ—¶ï¼Œå®¹é‡å°äº 64 çš„åœºåˆå®¹é‡å˜ä¸º 2 å€ + 2ã€‚å¦åˆ™é‚£ä¸ªå®¹é‡å˜ä¸º 1.5 å€</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">grow</span><span class="params">(<span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">oldCapacity</span> <span class="operator">=</span> queue.length;</span><br><span class="line">        <span class="type">int</span> <span class="variable">newCapacity</span> <span class="operator">=</span> oldCapacity + ((oldCapacity &lt; <span class="number">64</span>) ?</span><br><span class="line">                                         (oldCapacity + <span class="number">2</span>) :</span><br><span class="line">                                         (oldCapacity &gt;&gt; <span class="number">1</span>));</span><br><span class="line">        <span class="keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="number">0</span>)</span><br><span class="line">            newCapacity = hugeCapacity(minCapacity);</span><br><span class="line">        queue = Arrays.copyOf(queue, newCapacity);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="13-4-2-é˜»å¡é˜Ÿåˆ—æ¥å£-BlockingQueue">13.4.2 é˜»å¡é˜Ÿåˆ—æ¥å£ BlockingQueue</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BlockingQueue</span>&lt;E&gt; <span class="keyword">extends</span> <span class="title class_">Queue</span>&lt;E&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>BlockingQueue æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå…¶å®ç°å­ç±»éƒ½æ˜¯é˜»å¡é˜Ÿåˆ—ã€‚</p>
<p>é˜»å¡é˜Ÿåˆ—ï¼š</p>
<ul>
<li>å…ƒç´ å…¥åˆ—æ—¶ï¼Œé‚£ä¸ªé˜Ÿåˆ—å·²æ»¡çš„åœºåˆï¼Œä¼šè¿›è¡Œç­‰å¾…ã€‚ç›´åˆ°æœ‰å…ƒç´ å‡ºåˆ—åï¼Œå…ƒç´ æ•°é‡æœªè¶…è¿‡é˜Ÿåˆ—æ€»æ•°æ—¶ï¼Œè§£é™¤é˜»å¡çŠ¶æ€ï¼Œè¿›è€Œç»§ç»­å…¥åˆ—ã€‚</li>
<li>å…ƒç´ å‡ºåˆ—æ—¶ï¼Œå¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™ä¼šè¿›è¡Œç­‰å¾…ã€‚ç›´åˆ°æœ‰å…ƒç´ å…¥åˆ—æ—¶ï¼Œè§£é™¤é˜»å¡çŠ¶æ€ï¼Œè¿›è€Œç»§ç»­å‡ºåˆ—ã€‚</li>
<li>é˜»å¡é˜Ÿåˆ—èƒ½é˜²æ­¢å®¹å™¨æº¢å‡ºã€‚åªè¦æ˜¯é˜»å¡é˜Ÿåˆ—ï¼Œå°±æ˜¯çº¿ç¨‹å®‰å…¨çš„é˜Ÿåˆ—ã€‚</li>
<li>é˜»å¡é˜Ÿåˆ—ä¸æ¥å— null å…ƒç´ </li>
</ul>
<p>BlockingQueue çš„å¸¸ç”¨å®ç°å­ç±»æœ‰ï¼š</p>
<ul>
<li>ArrayBlockingQueueï¼šåº•å±‚ä»¥æ•°ç»„å­˜æ”¾å…ƒç´ çš„æœ‰ç•Œé˜»å¡é˜Ÿåˆ—</li>
<li>LinkedBlockingQueueï¼šåº•å±‚ä»¥é“¾è¡¨å­˜æ”¾å…ƒç´ çš„å¯é€‰è¾¹ç•Œçš„é˜»å¡é˜Ÿåˆ—</li>
<li>PriorityBlockingQueueï¼šæ— ç•Œé˜»å¡é˜Ÿåˆ—ï¼Œä¸ PriorityQueue æ’åºæ–¹å¼ç›¸åŒ</li>
</ul>
</blockquote>
<h4 id="å¸¸ç”¨æ–¹æ³•ï¼š-6">å¸¸ç”¨æ–¹æ³•ï¼š</h4>
<p>å®é™…ä¸Šï¼Œå…¶å¸¸ç”¨æ–¹æ³•èƒ½åˆ†ä¸ºå‡ ç±»ï¼š</p>
<table>
<thead>
<tr>
<th></th>
<th>æŠ›å‡ºå¼‚å¸¸</th>
<th>ç‰¹æ®Šå€¼</th>
<th>é˜»å¡</th>
<th>ç­‰å¾…</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ’å…¥</td>
<td>add(e)</td>
<td>offer(e)</td>
<td>put(e)</td>
<td>offer(e, time, unit)</td>
</tr>
<tr>
<td>åˆ é™¤</td>
<td>remove()</td>
<td>poll()</td>
<td>take()</td>
<td>take(time, unit)</td>
</tr>
<tr>
<td>æŸ¥æ‰¾</td>
<td>element()</td>
<td>peek()</td>
<td>-</td>
<td>-</td>
</tr>
</tbody>
</table>
<h2 id="13-5-åŒåˆ—é›†åˆæ¥å£-Map">13.5 åŒåˆ—é›†åˆæ¥å£ Map</h2>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="symbol">Map</span>&lt;<span class="symbol">K</span>,<span class="symbol">V</span>&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>ä»¥ä¸‹å…³äº Map æ¥å£çš„æè¿°ï¼Œé€‚ç”¨äº JDK 8 çš„ç¯å¢ƒ</strong></p>
<blockquote>
<p>Map ä¸ Collection å¹¶åˆ—å­˜åœ¨ï¼Œç”¨äºä¿å­˜å…·æœ‰æ˜ å°„å…³ç³»çš„æ•°æ®ï¼škey - valueï¼ˆåŒåˆ—å…ƒç´ ï¼‰</p>
<p>Map çš„ key å’Œ value å¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å¼•ç”¨æ•°æ®ç±»å‹ï¼Œä¹Ÿèƒ½å­˜å…¥ nullã€‚</p>
<p>Map çš„ key ä¸å…è®¸é‡å¤ï¼Œvalue å¯ä»¥é‡å¤ã€‚key å’Œ value å­˜åœ¨å•ä¸€å¯¹åº”å…³ç³»ã€‚é€šè¿‡ç‰¹å®šçš„ key ä¸€å®šèƒ½æ‰¾åˆ°æŒ‡å®šçš„ valueã€‚</p>
<p>ä¸€ç»„ k - v ä¼šè¢«å°è£…åˆ°ä¸€ä¸ª Entry å¯¹è±¡ä¸­ã€‚Entry æ˜¯ä¸€ä¸ªå†…éƒ¨æ¥å£ã€‚Map çš„å®ç°å­ç±»ä¸­éƒ½åŒ…å«ä¸€ä¸ªå®ç°è¿™ä¸ªæ¥å£çš„å†…éƒ¨ç±»ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Entry</span>&lt;K,V&gt; &#123;</span><br><span class="line">	K <span class="title function_">getKey</span><span class="params">()</span>;</span><br><span class="line">	V <span class="title function_">getValue</span><span class="params">()</span>;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ·»åŠ ç›¸åŒçš„ keyï¼Œä¼šè¦†ç›–åŸå…ˆçš„ key -valueã€‚ç­‰åŒäºä¿®æ”¹ï¼ˆkey ä¸ä¼šæ›¿æ¢ï¼Œvalue ä¼šè¢«æ›¿æ¢ï¼‰</p>
</blockquote>
<h4 id="å¸¸ç”¨æ–¹æ³•ï¼š-7">å¸¸ç”¨æ–¹æ³•ï¼š</h4>
<ul>
<li>
<p><code>put()</code>ï¼šæ·»åŠ ã€‚å·²å­˜åœ¨çš„åœºåˆï¼Œå®è¡Œæ›¿æ¢ã€‚ï¼ˆkey ä¸æ›¿æ¢ï¼Œvalue æ›¿æ¢ï¼‰</p>
</li>
<li>
<p><code>remove()</code>ï¼šæ ¹æ®é”®åˆ é™¤æ˜ å°„å…³ç³»</p>
</li>
<li>
<p><code>get()</code>ï¼šæ ¹æ®é”®è·å–å€¼</p>
</li>
<li>
<p><code>size()</code>ï¼šå…ƒç´ ä¸ªæ•°</p>
</li>
<li>
<p><code>isEmpty()</code>ï¼šåˆ¤æ–­ä¸ªæ•°æ˜¯å¦ä¸º 0</p>
</li>
<li>
<p><code>clear()</code>ï¼šæ¸…ç©º</p>
</li>
<li>
<p><code>containsKey()</code>ï¼šæŸ¥æ‰¾é”®æ˜¯å¦å­˜åœ¨</p>
</li>
<li>
<p><code>Set&lt;K&gt; keySet()</code>ï¼šè·å–æ‰€æœ‰ é”® æ„æˆçš„é›†åˆ</p>
<p><code>Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet()</code>ï¼šè·å–æ‰€æœ‰ Entry æ„æˆçš„é›†åˆ</p>
<p><code>Collection&lt;V&gt; values()</code>ï¼šè·å–æ‰€æœ‰ å€¼ æ„æˆçš„é›†åˆ</p>
</li>
</ul>
<h4 id="Map-æ¥å£éå†å…ƒç´ ï¼š">Map æ¥å£éå†å…ƒç´ ï¼š</h4>
<ul>
<li>
<p><strong>æ–¹æ³•ä¸€</strong>ï¼šåˆ©ç”¨ <code>Set&lt;K&gt; keySet()</code> æ–¹æ³•</p>
<p>å…ˆå¾—åˆ°æ‰€æœ‰ keysï¼Œå†éå† keysï¼Œæ ¹æ®æ¯ä¸ª key è·å¾— valueï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Set</span> <span class="variable">keyset</span> <span class="operator">=</span> map.keySet();</span><br><span class="line"><span class="keyword">for</span> (Object o : keyset) &#123;</span><br><span class="line">	System.out.println(o + <span class="string">&quot; = &quot;</span> + map.get(o));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>æ–¹æ³•äºŒ</strong>ï¼šåˆ©ç”¨ <code>Set&lt;V&gt; values()</code> æ–¹æ³•</p>
<p>ç›´æ¥æŠŠæ‰€æœ‰ values å–å‡ºï¼Œä¹‹åéå† values</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Collection</span> <span class="variable">values</span> <span class="operator">=</span> map.values();</span><br><span class="line"><span class="keyword">for</span> (Object value : values) &#123;</span><br><span class="line">	System.out.println(value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>æ–¹æ³•ä¸‰</strong>ï¼šåˆ©ç”¨ <code>Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet()</code> æ–¹æ³•</p>
<p>é€šè¿‡è·å– entrySet æ¥è·å– k - v</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Set&lt;Map.Entry&gt; entrySet = map.entrySet();</span><br><span class="line"><span class="keyword">for</span> (Map.Entry e : entrySet) &#123;</span><br><span class="line">	System.out.println(e.getKey() + <span class="string">&quot; - &quot;</span> + e.getValue());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="13-5-1-æ•£åˆ—è¡¨-HashMap">13.5.1 æ•£åˆ—è¡¨ HashMap</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashMap</span>&lt;K,V&gt; <span class="keyword">extends</span> <span class="title class_">AbstractMap</span>&lt;K,V&gt;</span><br><span class="line">    <span class="keyword">implements</span> <span class="title class_">Map</span>&lt;K,V&gt;, Cloneable, Serializable</span><br></pre></td></tr></table></figure>
<blockquote>
<p>HashMap æ˜¯ Map æ¥å£ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„å®ç°ç±»ã€‚æ˜¯æ ¹æ®å…³é”®ç å€¼ï¼ˆkey valueï¼‰è€Œè¿›è¡Œç›´æ¥è®¿é—®çš„æ•°æ®ç»“æ„ã€‚é€šè¿‡å°†å…³é”®ç å€¼æ˜ å°„åˆ°è¡¨ä¸­ä¸€ä¸ªä½ç½®æ¥è®¿é—®è®°å½•ï¼Œä»¥åŠ å¿«æŸ¥æ‰¾é€Ÿåº¦ã€‚</p>
<p>é‚£ä¸ªæ˜ å°„å‡½æ•°å«åšæ•£åˆ—å‡½æ•°ï¼Œå­˜æ”¾è®°å½•çš„æ•°ç»„å«åšæ•£åˆ—è¡¨ï¼ˆå“ˆå¸Œè¡¨ï¼‰</p>
<p>HashMap æ˜¯ä»¥ k - v å¯¹å¾—åˆ°æ–¹å¼æ¥å­˜å‚¨æ•°æ®ã€‚ä¸€ç»„æ•°æ®ä¼šè¢«å°è£…åˆ°ä¸€ä¸ª Node å¯¹è±¡ä¸­ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span>&lt;K,V&gt; <span class="keyword">implements</span> <span class="title class_">Map</span>.Entry&lt;K,V&gt; &#123;</span><br><span class="line"> <span class="keyword">final</span> <span class="type">int</span> hash;</span><br><span class="line"> <span class="keyword">final</span> K key;</span><br><span class="line"> V value;</span><br><span class="line"> Node&lt;K,V&gt; next;</span><br><span class="line"></span><br><span class="line"> ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>JDK 7 å‰ï¼ŒHashMap åº•å±‚æ˜¯ æ•°ç»„ + é“¾è¡¨ã€‚JDK 8 åï¼Œåº•å±‚æ˜¯ æ•°ç»„ + é“¾è¡¨ + çº¢é»‘æ ‘ã€‚HashMap ä¸ä¿è¯æ˜ å°„çš„é¡ºåºã€‚</p>
<p>HashMap æ²¡æœ‰å®ç°åŒæ­¥ï¼ˆæ²¡æœ‰ synchronizedï¼‰ï¼Œæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„</p>
</blockquote>
<h4 id="HashMap-çš„æºç ï¼š">HashMap çš„æºç ï¼š</h4>
<ol>
<li>
<p>HashMap åº•å±‚ç»´æŠ¤äº† Node ç±»å‹çš„æ•°ç»„ tableã€‚é»˜è®¤ä¸º null</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">transient</span> Node&lt;K,V&gt;[] table;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>å¦å¤–ï¼Œè¿˜æœ‰é›†åˆ valuesã€keySetã€enrtySetã€‚è¿™äº›é›†åˆèƒ½å¸®åŠ©ç¨‹åºå‘˜è¿›è¡Œéå†</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">transient</span> Set&lt;K&gt;				keySet;</span><br><span class="line"><span class="keyword">transient</span> Collection&lt;V&gt;			values;</span><br><span class="line"><span class="keyword">transient</span> Set&lt;Map.Entry&lt;K,V&gt;&gt;	entrySet;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>åˆ›å»ºå¯¹è±¡æ—¶ï¼Œé»˜è®¤æ„é€ å™¨å°†åŠ è½½å› å­ï¼ˆloadfactorï¼‰åˆå§‹åŒ–ä¸º 0.75ã€‚</p>
<p>ä¹Ÿèƒ½æŒ‡å®šé‚£äº›åˆå§‹å®¹é‡å’ŒåŠ è½½å› å­ã€‚</p>
<p>é»˜è®¤æ„é€ å™¨ç¬¬ä¸€æ¬¡æ·»åŠ å…ƒç´ çš„åœºåˆï¼Œtable æ‰©å®¹ä¸º 16ï¼Œä¸´ç•Œå€¼ä¸º 16 * 0.75 = 12ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">float</span> <span class="variable">DEFAULT_LOAD_FACTOR</span> <span class="operator">=</span> <span class="number">0.75f</span>;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">MAXIMUM_CAPACITY</span> <span class="operator">=</span> <span class="number">1</span> &lt;&lt; <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">HashMap</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.loadFactor = DEFAULT_LOAD_FACTOR;					<span class="comment">// è¿™ä¸ªé»˜è®¤æ„é€ çš„åœºåˆï¼Œå…¶ä»–å‚æ•°éƒ½æ˜¯é»˜è®¤å€¼</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">HashMap</span><span class="params">(<span class="type">int</span> initialCapacity)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>(initialCapacity, DEFAULT_LOAD_FACTOR);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">HashMap</span><span class="params">(<span class="type">int</span> initialCapacity, <span class="type">float</span> loadFactor)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (initialCapacity &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(...);</span><br><span class="line">    <span class="keyword">if</span> (initialCapacity &gt; MAXIMUM_CAPACITY)</span><br><span class="line">        initialCapacity = MAXIMUM_CAPACITY;</span><br><span class="line">    <span class="keyword">if</span> (loadFactor &lt;= <span class="number">0</span> || Float.isNaN(loadFactor))</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(...);</span><br><span class="line">    <span class="built_in">this</span>.loadFactor = loadFactor;</span><br><span class="line">    <span class="built_in">this</span>.threshold = tableSizeFor(initialCapacity);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æ·»åŠ æ—¶å®¹é‡ä¸å¤Ÿçš„åœºåˆï¼Œéœ€è¦æ‰©å®¹ã€‚</p>
<p>é»˜è®¤æ„é€ å™¨ç¬¬ä¸€æ¬¡æ·»åŠ å…ƒç´ çš„åœºåˆï¼Œtable æ‰©å®¹ä¸º 16ï¼Œä¸´ç•Œå€¼ä¸º 16 * 0.75 = 12ã€‚</p>
<p>æ‰©å®¹çš„åœºåˆï¼Œå®¹é‡å˜ä¸º 2 å€ã€‚ä¸´ç•Œå€¼ç›¸åº”å˜åŒ–ã€‚</p>
<p>ä¸´ç•Œå€¼ä¸ä¼šè¶…è¿‡é‚£ä¸ªæŒ‡å®šçš„ MAXIMUM_CAPACITYï¼ˆ1 &lt;&lt; 30ï¼‰ï¼Œå¦åˆ™å˜æˆ Integer.MAX_VALUEã€‚</p>
<p>JDK 8 ä¸­ï¼Œå¦‚æœä¸€æ¡é“¾è¡¨çš„å…ƒç´ ä¸ªæ•°è¶…è¿‡ TREEIFY_THRESHOLDï¼ˆé»˜è®¤æ˜¯ 8ï¼‰ï¼Œå¹¶ä¸” <code>table</code> çš„å¤§å° &gt;= MIN_TREEIFY_CAPACITYï¼ˆé»˜è®¤ 64ï¼‰ï¼Œä¼šè¿›è¡Œæ ‘åŒ–ã€‚</p>
<p>å‰ªæï¼šçº¢é»‘æ ‘çš„å…ƒç´ å‡å°‘åˆ°ä¸€å®šç¨‹åº¦ï¼Œä¼šè¢«é‡æ–°è½¬åŒ–ä¸º é“¾è¡¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">MAXIMUM_CAPACITY</span> <span class="operator">=</span> <span class="number">1</span> &lt;&lt; <span class="number">30</span>;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">DEFAULT_INITIAL_CAPACITY</span> <span class="operator">=</span> <span class="number">1</span> &lt;&lt; <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> Node&lt;K,V&gt;[] resize() &#123;</span><br><span class="line">    Node&lt;K,V&gt;[] oldTab = table;								<span class="comment">// &lt;- æ—§çš„æ•°æ®æ•°ç»„ table</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">oldCap</span> <span class="operator">=</span> (oldTab == <span class="literal">null</span>) ? <span class="number">0</span> : oldTab.length;		<span class="comment">// &lt;- æ—§çš„ table çš„å®¹é‡</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">oldThr</span> <span class="operator">=</span> threshold;									<span class="comment">// &lt;- æ—§çš„ä¸´ç•Œå€¼</span></span><br><span class="line">    <span class="type">int</span> newCap, newThr = <span class="number">0</span>;									<span class="comment">// &lt;- æ–°çš„å®¹é‡ã€ä¸´ç•Œå€¼</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* æ—§çš„æ•°ç»„ä¸ä¸ºç©ºæ—¶ï¼Œ</span></span><br><span class="line"><span class="comment">    	å¦‚æœå®¹é‡å·²è¾¾æŒ‡å®šçš„ MAXIMUM_CAPACITYï¼Œåˆ™ä¸æ‰©å®¹</span></span><br><span class="line"><span class="comment">    	å¦åˆ™æ‰©å®¹ä¸º 2 å€å®¹é‡ï¼Œä¸´ç•Œå€¼ä¹Ÿå˜ä¸º 2 å€ */</span></span><br><span class="line">    <span class="keyword">if</span> (oldCap &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        newCap = oldCap &lt;&lt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (oldCap &gt;= MAXIMUM_CAPACITY) &#123;</span><br><span class="line">            threshold = Integer.MAX_VALUE;</span><br><span class="line">            <span class="keyword">return</span> oldTab;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (newCap &lt; MAXIMUM_CAPACITY &amp;&amp; oldCap &gt;= DEFAULT_INITIAL_CAPACITY)</span><br><span class="line">            newThr = oldThr &lt;&lt; <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* æ—§çš„æ•°ç»„ä¸ºç©ºï¼Œä½†ä¸´ç•Œå€¼å·²è¢«æŒ‡å®šï¼ˆåŸå› æ˜¯ï¼šæŒ‡å®šæ„é€ å™¨ä¼ å…¥åˆå§‹å®¹é‡ä¸º 0ï¼‰ */</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (oldThr &gt; <span class="number">0</span>)</span><br><span class="line">        newCap = oldThr;</span><br><span class="line">    <span class="comment">/* æ—§çš„æ•°ç»„ä¸ºç©ºï¼Œä¸´ç•Œå€¼ä¸º 0ï¼ˆåŸå› æ˜¯ï¼šä½¿ç”¨é»˜è®¤æ„é€ å™¨ï¼‰</span></span><br><span class="line"><span class="comment">    	é»˜è®¤æ„é€ å™¨åˆå§‹åŒ–å®¹é‡ä¸º 16ï¼Œé»˜è®¤ä¸´ç•Œå› å­ä¸º 0.75f */</span></span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        newCap = DEFAULT_INITIAL_CAPACITY;</span><br><span class="line">        newThr = (<span class="type">int</span>)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* åˆ°è¿™é‡Œï¼ŒnewThrï¼ˆæ–°ä¸´ç•Œå€¼ï¼‰ä¸º 0 çš„åŸå› å¯èƒ½æ˜¯ï¼š</span></span><br><span class="line"><span class="comment">    	1. æ—§å®¹é‡å°äºé‚£ä¸ªæœ€å°å®¹é‡ï¼ˆ16ï¼‰</span></span><br><span class="line"><span class="comment">    	2. æ‰©å®¹åå®¹é‡å¤§äºé‚£ä¸ªæœ€å¤§å®¹é‡</span></span><br><span class="line"><span class="comment">    	3. æ—§çš„ä¸´ç•Œå€¼ä¸º 0 æˆ– Integer.MIN_VALUE</span></span><br><span class="line"><span class="comment">    	4. æ„é€ å™¨ä¼ å…¥åˆå§‹å®¹é‡ä¸º 0 */</span></span><br><span class="line">    <span class="keyword">if</span> (newThr == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">/* æŒ‰ç…§ æ–°å®¹é‡ * ä¸´ç•Œå› å­ çš„æ–¹æ³•è®¡ç®—ä¸´ç•Œå€¼ã€‚ä¸´ç•Œå€¼ä¸ä¼šè¶…è¿‡ä¸€ä¸ªæŒ‡å®šçš„æœ€å¤§å€¼ */</span></span><br><span class="line">        <span class="type">float</span> <span class="variable">ft</span> <span class="operator">=</span> (<span class="type">float</span>)newCap * loadFactor;</span><br><span class="line">        newThr = (newCap &lt; MAXIMUM_CAPACITY &amp;&amp; ft &lt; (<span class="type">float</span>)MAXIMUM_CAPACITY ?</span><br><span class="line">                  (<span class="type">int</span>)ft : Integer.MAX_VALUE);</span><br><span class="line">    &#125;</span><br><span class="line">    threshold = newThr;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* ç¡®å®šäº†å®¹é‡å’Œä¸´ç•Œå€¼ï¼Œä¸‹é¢æŠŠæ—§æ•°ç»„å…ƒç´ ç§»è‡³æ–°æ•°ç»„ã€‚</span></span><br><span class="line"><span class="comment">    	é‚£ä¸ªç§»åŠ¨çš„åœºåˆï¼Œä¼šä»¥æ–°å®¹é‡é‡æ–°è®¡ç®—æ‰€æœ‰å…ƒç´ çš„ä¸‹æ ‡ä½ç½® */</span></span><br><span class="line">    Node&lt;K,V&gt;[] newTab = (Node&lt;K,V&gt;[])<span class="keyword">new</span> <span class="title class_">Node</span>[newCap];</span><br><span class="line">    table = newTab;</span><br><span class="line">    <span class="keyword">if</span> (oldTab != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; oldCap; ++j) &#123;</span><br><span class="line">            Node&lt;K,V&gt; e;</span><br><span class="line">            <span class="keyword">if</span> ((e = oldTab[j]) != <span class="literal">null</span>) &#123;</span><br><span class="line">                oldTab[j] = <span class="literal">null</span>;</span><br><span class="line">                <span class="keyword">if</span> (e.next == <span class="literal">null</span>)</span><br><span class="line">                    newTab[e.hash &amp; (newCap - <span class="number">1</span>)] = e;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">                    ((TreeNode&lt;K,V&gt;)e).split(<span class="built_in">this</span>, newTab, j, oldCap);</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    Node&lt;K,V&gt; loHead = <span class="literal">null</span>, loTail = <span class="literal">null</span>;</span><br><span class="line">                    Node&lt;K,V&gt; hiHead = <span class="literal">null</span>, hiTail = <span class="literal">null</span>;</span><br><span class="line">                    Node&lt;K,V&gt; next;</span><br><span class="line">                    <span class="keyword">do</span> &#123;</span><br><span class="line">                        next = e.next;</span><br><span class="line">                        <span class="keyword">if</span> ((e.hash &amp; oldCap) == <span class="number">0</span>) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (loTail == <span class="literal">null</span>)</span><br><span class="line">                                loHead = e;</span><br><span class="line">                            <span class="keyword">else</span></span><br><span class="line">                                loTail.next = e;</span><br><span class="line">                            loTail = e;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="keyword">if</span> (hiTail == <span class="literal">null</span>)</span><br><span class="line">                                hiHead = e;</span><br><span class="line">                            <span class="keyword">else</span></span><br><span class="line">                                hiTail.next = e;</span><br><span class="line">                            hiTail = e;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; <span class="keyword">while</span> ((e = next) != <span class="literal">null</span>);</span><br><span class="line">                    <span class="keyword">if</span> (loTail != <span class="literal">null</span>) &#123;</span><br><span class="line">                        loTail.next = <span class="literal">null</span>;</span><br><span class="line">                        newTab[j] = loHead;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (hiTail != <span class="literal">null</span>) &#123;</span><br><span class="line">                        hiTail.next = <span class="literal">null</span>;</span><br><span class="line">                        newTab[j + oldCap] = hiHead;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> newTab;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æ·»åŠ  k - v æ—¶ï¼Œé€šè¿‡ key çš„å“ˆå¸Œå€¼å¾—åˆ°å…¶åœ¨ table çš„ç´¢å¼•ï¼Œåˆ¤æ–­ç´¢å¼•ä½ç½®æ˜¯å¦è¢«å ç”¨ã€‚</p>
<p>æœªå ç”¨çš„åœºåˆï¼Œç›´æ¥æ·»åŠ ã€‚</p>
<p>å ç”¨çš„åœºåˆï¼Œåˆ¤æ–­å…¶ key æ˜¯å¦ç›¸ç­‰ã€‚ç›¸ç­‰çš„åœºåˆï¼Œæ›¿æ¢ valueã€‚å¦åˆ™ï¼ŒæŒ‰ç…§ æ ‘ æˆ– é“¾è¡¨ çš„æ–¹å¼å¤„ç†ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> V <span class="title function_">put</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> putVal(hash(key), key, value, <span class="literal">false</span>, <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* ä¼šå…ˆå¯¹æ”¾å…¥å…ƒç´ çš„å“ˆå¸Œå€¼è¿›è¡Œä¸€æ¬¡è®¡ç®—ï¼Œå¾—åˆ°ä¸€ä¸ªæ•°å­—ï¼šhash */</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">hash</span><span class="params">(Object key)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">h</span> <span class="operator">=</span> key.hashCode();</span><br><span class="line">    <span class="keyword">return</span> (key == <span class="literal">null</span>) ? <span class="number">0</span> : (h ^ (h &gt;&gt;&gt; <span class="number">16</span>));	<span class="comment">// ä½è¿ç®—ç¬¦ï¼š&gt;&gt;&gt; æ— ç¬¦å·å³ç§»</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* put æ–¹æ³•ä¼šè°ƒç”¨è¯¥ putVal æ–¹æ³•ã€‚</span></span><br><span class="line"><span class="comment">	é‚£äº›ä¼ å…¥å€¼æ˜¯ï¼š	hashã€	keyã€	valueã€			falseã€				true */</span></span><br><span class="line"><span class="keyword">final</span> V <span class="title function_">putVal</span><span class="params">(<span class="type">int</span> hash, K key, V value, <span class="type">boolean</span> onlyIfAbsent, <span class="type">boolean</span> evict)</span> &#123;</span><br><span class="line">    Node&lt;K,V&gt;[] tab = table; 		<span class="comment">// &lt;- æ˜¯é‚£ä¸ªå­˜æ”¾æ•°æ®çš„ table æ•°ç»„</span></span><br><span class="line">    <span class="type">int</span> n;							<span class="comment">// &lt;- æ˜¯ table.length</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* å¦‚æœåŸå…ˆçš„ table ä¸ºç©ºï¼Œåˆ™å¯¹å…¶é‡æ–°åˆ†é…ç©ºé—´ */</span></span><br><span class="line">    <span class="keyword">if</span> (tab == <span class="literal">null</span> || (n = tab.length) == <span class="number">0</span>) &#123;</span><br><span class="line">        tab = resize();</span><br><span class="line">        n = tab.length;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* ç”¨æ–¹æ‰è®¡ç®—çš„ hash æ•°ï¼Œå¾—åˆ°è¦æ”¾å…¥å…ƒç´ çš„ä¸‹æ ‡å€¼ i</span></span><br><span class="line"><span class="comment">    	n - 1 æ˜¯æ•°æ®æ•°ç»„çš„æœ€å¤§ä¸‹æ ‡ï¼Œ(n - 1) &amp; hash å¿…å®šä¸å¤§äº n - 1 */</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> (n - <span class="number">1</span>) &amp; hash;			<span class="comment">// ä½è¿ç®—ç¬¦ï¼š&amp; æŒ‰ä½ä¸</span></span><br><span class="line">    Node&lt;K,V&gt; p = tab[i];			<span class="comment">// å¾—åˆ° table ä¸­ï¼Œä½äºé‚£ä¸ªæ’å…¥ä½ç½®çš„å…ƒç´ </span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* å€˜è‹¥è¯¥ä½ç½®ä¸ºç©ºï¼Œåˆ™ç›´æ¥æ”¾å…¥ */</span></span><br><span class="line">    <span class="keyword">if</span> (p == <span class="literal">null</span>) &#123;</span><br><span class="line">        tab[i] = newNode(hash, key, value, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* è¯¥ä½ç½®ä¸ä¸ºç©ºï¼Œæ„å‘³ç€å¯èƒ½æ·»åŠ äº†é‡å¤å…ƒç´  */</span></span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        Node&lt;K,V&gt; e; 			<span class="comment">// &lt;- è¢«å‘ç°é‡å¤çš„é‚£ä¸ª Nodeã€‚æ— é‡å¤æ—¶ç»“æœä¸º nullã€‚è¿™ä¸ª Node çš„ value ä¼šè¢«æ›¿æ¢ã€‚</span></span><br><span class="line">        <span class="type">K</span> <span class="variable">k</span> <span class="operator">=</span> p.key;			<span class="comment">// &lt;- å½“å‰å–å‡ºè¿›è¡Œæ¯”è¾ƒçš„ key å€¼</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">/* ä¸ºäº†éªŒè¯å…¶æ˜¯å¦é‡å¤ï¼Œè¿™é‡Œè¦è¿›è¡Œå¦‚ä¸‹æ¯”è¾ƒï¼š</span></span><br><span class="line"><span class="comment">        	1. æ¯”è¾ƒä¸¤è€…çš„ hash æ•°ã€‚ä¸åŒçš„åœºåˆæ˜¯ä¸åŒå…ƒç´ </span></span><br><span class="line"><span class="comment">        	2. ä½¿ç”¨ == å’Œ equals ä¸¤ç§æ–¹æ³•æ¯”è¾ƒ keyã€‚ä¸åŒçš„åœºåˆæ˜¯ä¸åŒå…ƒç´  </span></span><br><span class="line"><span class="comment">        	å¦‚æœæ˜¯ç›¸åŒå…ƒç´ ï¼Œåˆ™è¯¥èŠ‚ç‚¹çš„å€¼ä¼šè¢«æ›¿æ¢ */</span></span><br><span class="line">        <span class="keyword">if</span> (p.hash == hash &amp;&amp; (k  == key || (key != <span class="literal">null</span> &amp;&amp; key.equals(k)))) &#123;</span><br><span class="line">            e = p;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">/* æ­¤å¤„èŠ‚ç‚¹ç»“æ„æ˜¯ æ ‘ çš„åœºåˆï¼Œè¿˜éœ€éå†æ¯”è¾ƒæ ‘çš„æ¯ä¸ªèŠ‚ç‚¹ */</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (p <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">            e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(<span class="built_in">this</span>, tab, hash, key, value);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">/* æ­¤å¤„èŠ‚ç‚¹ç»“æ„æ˜¯ é“¾è¡¨ çš„åœºåˆï¼Œè¿˜éœ€éå†æ¯”è¾ƒæ¯ä¸ªé“¾è¡¨èŠ‚ç‚¹ */</span></span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">binCount</span> <span class="operator">=</span> <span class="number">0</span>; ; ++binCount) &#123;</span><br><span class="line">                e = p.next;</span><br><span class="line">                <span class="comment">/* e == null æ„å‘³ç€éå†ç»“æŸï¼Œå…¨éƒ¨ä¸åŒã€‚è¿™æ ·ï¼Œåœ¨æ­¤å¤„æ·»åŠ é‚£ä¸ªæ–°çš„ Node */</span></span><br><span class="line">                <span class="keyword">if</span> (e == <span class="literal">null</span>) &#123;</span><br><span class="line">                    p.next = newNode(hash, key, value, <span class="literal">null</span>);</span><br><span class="line">                    <span class="keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class="number">1</span>) <span class="comment">// -1 for 1st</span></span><br><span class="line">                        treeifyBin(tab, hash);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">/* æ•…æŠ€é‡æ–½ï¼Œå¦‚æœå‘ç°ç›¸åŒï¼Œåˆ™æ›¿æ¢é‚£ä¸ªæ–°å…ƒç´  */</span></span><br><span class="line">                <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                    ((k = e.key) == key || (key != <span class="literal">null</span> &amp;&amp; key.equals(k)))) &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                p = e;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">/* ç»å†ä¸Šè¿°æ¯”è¾ƒåï¼Œe != null æ„å‘³ç€æœ‰å…ƒç´ è¦è¢«æ›¿æ¢äº† */</span></span><br><span class="line">        <span class="keyword">if</span> (e != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="type">V</span> <span class="variable">oldValue</span> <span class="operator">=</span> e.value;</span><br><span class="line">            <span class="comment">/* ä¼ å…¥çš„å‚æ•° onluIfAbsent == falseï¼Œæ‰€ä»¥æ­¤å¤„ä¸€å®šæ˜¯ true */</span></span><br><span class="line">            <span class="keyword">if</span> (!onlyIfAbsent || oldValue == <span class="literal">null</span>)</span><br><span class="line">                e.value = value;</span><br><span class="line">            afterNodeAccess(e);		<span class="comment">// &lt;- HashMap ä¸­ï¼Œè¯¥æ–¹æ³•ä¸ºç©ºå®ç°ã€‚</span></span><br><span class="line">            <span class="keyword">return</span> oldValue;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ++modCount;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* å¦‚æœåˆ°è¾¾è¿™é‡Œï¼Œè¯´æ˜æ·»åŠ äº†å…ƒç´ ï¼ˆè€Œéæ›¿æ¢ï¼‰ï¼Œè¦æŸ¥çœ‹å¤§å°æ˜¯å¦è¶…è¿‡ä¸´ç•Œå€¼ */</span></span><br><span class="line">    <span class="keyword">if</span> (++size &gt; threshold)</span><br><span class="line">        resize();</span><br><span class="line">    afterNodeInsertion(evict);		<span class="comment">// &lt;- HashMap ä¸­ï¼Œè¯¥æ–¹æ³•ä¸ºç©ºå®ç°ã€‚</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* ä¸Šé¢æåˆ°çš„ä¸€äº›ç©ºå®ç°çš„æ–¹æ³• */</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">afterNodeAccess</span><span class="params">(Node&lt;K,V&gt; p)</span> &#123; &#125;</span><br><span class="line"><span class="keyword">void</span> <span class="title function_">afterNodeInsertion</span><span class="params">(<span class="type">boolean</span> evict)</span> &#123; &#125;</span><br><span class="line"><span class="keyword">void</span> <span class="title function_">afterNodeRemoval</span><span class="params">(Node&lt;K,V&gt; p)</span> &#123; &#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="13-5-2-æ•£åˆ—è¡¨-Hashtable">13.5.2 æ•£åˆ—è¡¨ Hashtable</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Hashtable</span>&lt;K,V&gt;</span><br><span class="line">    <span class="keyword">extends</span> <span class="title class_">Dictionary</span>&lt;K,V&gt;</span><br><span class="line">    <span class="keyword">implements</span> <span class="title class_">Map</span>&lt;K,V&gt;, Cloneable, java.io.Serializable</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Hashtable å’Œ HashMap åŸºæœ¬ä¸€è‡´ï¼Œä½†Hashtable æ˜¯çº¿ç¨‹å®‰å…¨çš„ ã€‚ä½†ä¹Ÿå› ä¸ºå¦‚æ­¤ï¼ŒHashtable çš„æ•ˆç‡ä½ä¸‹ã€‚</p>
</blockquote>
<h4 id="Hashtable-ä¸-HashMap-çš„æ¯”è¾ƒï¼š">Hashtable ä¸ HashMap çš„æ¯”è¾ƒï¼š</h4>
<table>
<thead>
<tr>
<th></th>
<th>ç‰ˆæœ¬</th>
<th>çº¿ç¨‹å®‰å…¨ï¼ˆåŒæ­¥ï¼‰</th>
<th>æ•ˆç‡</th>
<th>æ˜¯å¦å…è®¸ nullå€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td>Hashtable</td>
<td>1.0</td>
<td>å®‰å…¨</td>
<td>è¾ƒä½</td>
<td>ä¸å…è®¸</td>
</tr>
<tr>
<td>HashMap</td>
<td>1.2</td>
<td>ä¸å®‰å…¨</td>
<td>é«˜</td>
<td>å…è®¸</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>Hashtable åº•å±‚ä¹Ÿæ˜¯æœ‰æ•°ç»„ï¼Œé»˜è®¤æ„é€ å™¨çš„åˆå§‹å®¹é‡ä¸º 11ã€‚ä¸´ç•Œå€¼æ˜¯ 11 * 0.75 = 8ã€‚</p>
</li>
<li>
<p>æ‰©å®¹å¤§è‡´å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">newCapacity</span> <span class="operator">=</span> (oldCapacity &lt;&lt; <span class="number">1</span>) + <span class="number">1</span>;			<span class="comment">//å³ï¼ŒåŸå®¹é‡ * 2 + 1</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>Hashtable ä¸ä¼šæ ‘åŒ–</p>
</li>
</ul>
<h3 id="13-5-3-çº¢é»‘æ ‘-TreeMap">13.5.3 çº¢é»‘æ ‘ TreeMap</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TreeMap</span>&lt;K,V&gt;</span><br><span class="line">    <span class="keyword">extends</span> <span class="title class_">AbstractMap</span>&lt;K,V&gt;</span><br><span class="line">    <span class="keyword">implements</span> <span class="title class_">NavigableMap</span>&lt;K,V&gt;, Cloneable, java.io.Serializable</span><br></pre></td></tr></table></figure>
<blockquote>
<p>TreeMap å®ç°äº† Map æ¥å£ã€‚åº•å±‚ä½¿ç”¨ çº¢é»‘æ ‘ å­˜å‚¨æ•°æ®ã€‚</p>
<p>ç›¸è¾ƒæ•°ç»„ï¼ˆè®¿é—®å¿«ï¼Œæ£€ç´¢ã€æ’å…¥æ…¢ï¼‰å’Œé“¾è¡¨ï¼ˆæ’å…¥å¿«ï¼Œæ£€ç´¢ã€è®¿é—®æ…¢ï¼‰ï¼Œæ ‘å½¢æ•°æ®ç»“æ„ï¼ˆå¦‚äºŒå‰æ’åºæ ‘ï¼‰åœ¨ä¿è¯æ•°æ®æ£€ç´¢é€Ÿåº¦çš„åŒæ—¶ï¼Œä¹Ÿèƒ½ä¿è¯æ•°æ®æ’å…¥ã€åˆ é™¤ã€ä¿®æ”¹çš„é€Ÿåº¦</p>
</blockquote>
<p><em><strong>â€”â€”è§ [[14.1.4.1 å¹³è¡¡äºŒå‰æ ‘]](<a target="_blank" rel="noopener" href="https://i-melody.github.io/2022/06/02/Java/%E5%85%A5%E9%97%A8%E9%98%B6%E6%AE%B5/14">https://i-melody.github.io/2022/06/02/Java/å…¥é—¨é˜¶æ®µ/14</a> æ ‘/#14-1-4-1-å¹³è¡¡äºŒå‰æ ‘)</strong></em></p>
<h4 id="TreeMap-çš„æºç ï¼š">TreeMap çš„æºç ï¼š</h4>
<ol>
<li>
<p>TreeMap åº•å±‚ç»´æŠ¤äº†ä¸€ä¸ªäºŒå‰æ ‘ï¼Œä»¥åŠä¸€ä¸ªæ¯”è¾ƒå™¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> Comparator&lt;? <span class="built_in">super</span> K&gt; comparator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">transient</span> Entry&lt;K,V&gt; root;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>åˆ›å»ºå¯¹è±¡æ—¶ï¼Œèƒ½é‡‡ç”¨æ— å‚æ„é€ ï¼Œä¹Ÿèƒ½æŒ‡å®šæ¯”è¾ƒå™¨å®Œæˆæ„é€ </p>
<p>é‚£ä¸ªæ— å‚æ„é€ çš„åœºåˆï¼Œæ¯”è¾ƒå™¨ä¸ºç©ºã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">TreeMap</span><span class="params">()</span> &#123;</span><br><span class="line">    comparator = <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">TreeMap</span><span class="params">(Comparator&lt;? <span class="built_in">super</span> K&gt; comparator)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.comparator = comparator;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¯”è¾ƒå™¨å¦‚æœä¸ºç©ºï¼Œåˆ™è¦æ±‚ä¼ å…¥çš„ key å¿…é¡»æ˜¯ Comparable æ¥å£çš„å®ç°å­ç±»ï¼Œå¦åˆ™æ— æ³•è¿›è¡Œæ¯”è¾ƒã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Object k1, Object k2)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> comparator==<span class="literal">null</span> ? ((Comparable&lt;? <span class="built_in">super</span> K&gt;)k1).compareTo((K)k2)</span><br><span class="line">        : comparator.compare((K)k1, (K)k2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æ·»åŠ æ—¶ï¼Œé€šè¿‡æ¯”è¾ƒå™¨ç¡®å®šé‚£ä¸ªæ·»åŠ ä½ç½®ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> V <span class="title function_">put</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">    Entry&lt;K,V&gt; t = root;	<span class="comment">// &lt;- æ ‘çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* äºŒå‰æ ‘ä¸ºç©ºçš„åœºåˆï¼Œåˆ›å»ºæ ¹èŠ‚ç‚¹ï¼Œå°†æ•°æ®æ”¾å…¥ */</span></span><br><span class="line">    <span class="keyword">if</span> (t == <span class="literal">null</span>) &#123;</span><br><span class="line">        compare(key, key);</span><br><span class="line">        root = <span class="keyword">new</span> <span class="title class_">Entry</span>&lt;&gt;(key, value, <span class="literal">null</span>);</span><br><span class="line">        size = <span class="number">1</span>;</span><br><span class="line">        modCount++;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="type">int</span> cmp;				<span class="comment">// &lt;- ä¸´æ—¶å€¼ï¼Œå­˜æ”¾æ¯”è¾ƒç»“æœ</span></span><br><span class="line">    Entry&lt;K,V&gt; parent;		<span class="comment">// &lt;- ä¸´æ—¶å€¼ï¼Œå­˜æ”¾çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">    Comparator&lt;? <span class="built_in">super</span> K&gt; cpr = comparator;		<span class="comment">// &lt;- æ¯”è¾ƒå™¨</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* æœ‰æ¯”è¾ƒå™¨çš„åœºåˆï¼ŒæŒ‰ç…§è¿™ä¸ªæ–¹æ³•è¿›è¡Œæ¯”è¾ƒ */</span></span><br><span class="line">    <span class="keyword">if</span> (cpr != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            parent = t;</span><br><span class="line">            cmp = cpr.compare(key, t.key);</span><br><span class="line">            <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>)</span><br><span class="line">                t = t.left;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>)</span><br><span class="line">                t = t.right;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="keyword">return</span> t.setValue(value);</span><br><span class="line">        &#125; <span class="keyword">while</span> (t != <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* æ¯”è¾ƒå™¨ä¸ºç©ºçš„åœºåˆï¼ŒæŒ‰ç…§è¿™ä¸ªæ–¹æ³•è¿›è¡Œæ¯”è¾ƒ */</span></span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (key == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NullPointerException</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        Comparable&lt;? <span class="built_in">super</span> K&gt; k = (Comparable&lt;? <span class="built_in">super</span> K&gt;) key;</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            parent = t;</span><br><span class="line">            cmp = k.compareTo(t.key);</span><br><span class="line">            <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>)</span><br><span class="line">                t = t.left;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>)</span><br><span class="line">                t = t.right;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="keyword">return</span> t.setValue(value);</span><br><span class="line">        &#125; <span class="keyword">while</span> (t != <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* å°†æ•°æ®èŠ‚ç‚¹æ”¾åˆ°æ­£ç¡®çš„è·¯å¾„ä¸‹ */</span></span><br><span class="line">    Entry&lt;K,V&gt; e = <span class="keyword">new</span> <span class="title class_">Entry</span>&lt;&gt;(key, value, parent);</span><br><span class="line">    <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>)</span><br><span class="line">        parent.left = e;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        parent.right = e;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* æ­¤å¤„ä¼šè¯•ç€å°†è¯¥æ ‘è½¬æ¢æˆå®Œå…¨äºŒå‰æ ‘ */</span></span><br><span class="line">    fixAfterInsertion(e);</span><br><span class="line">    size++;</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æ·»åŠ çš„æœ€åï¼Œä¼šè¯•ç€å°†è¯¥æ ‘è½¬æ¢æˆå®Œå…¨äºŒå‰æ ‘</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">fixAfterInsertion</span><span class="params">(Entry&lt;K,V&gt; x)</span> &#123;</span><br><span class="line">    x.color = RED;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (x != <span class="literal">null</span> &amp;&amp; x != root &amp;&amp; x.parent.color == RED) &#123;</span><br><span class="line">        <span class="keyword">if</span> (parentOf(x) == leftOf(parentOf(parentOf(x)))) &#123;</span><br><span class="line">            Entry&lt;K,V&gt; y = rightOf(parentOf(parentOf(x)));</span><br><span class="line">            <span class="keyword">if</span> (colorOf(y) == RED) &#123;</span><br><span class="line">                setColor(parentOf(x), BLACK);</span><br><span class="line">                setColor(y, BLACK);</span><br><span class="line">                setColor(parentOf(parentOf(x)), RED);</span><br><span class="line">                x = parentOf(parentOf(x));</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (x == rightOf(parentOf(x))) &#123;</span><br><span class="line">                    x = parentOf(x);</span><br><span class="line">                    rotateLeft(x);</span><br><span class="line">                &#125;</span><br><span class="line">                setColor(parentOf(x), BLACK);</span><br><span class="line">                setColor(parentOf(parentOf(x)), RED);</span><br><span class="line">                rotateRight(parentOf(parentOf(x)));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            Entry&lt;K,V&gt; y = leftOf(parentOf(parentOf(x)));</span><br><span class="line">            <span class="keyword">if</span> (colorOf(y) == RED) &#123;</span><br><span class="line">                setColor(parentOf(x), BLACK);</span><br><span class="line">                setColor(y, BLACK);</span><br><span class="line">                setColor(parentOf(parentOf(x)), RED);</span><br><span class="line">                x = parentOf(parentOf(x));</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (x == leftOf(parentOf(x))) &#123;</span><br><span class="line">                    x = parentOf(x);</span><br><span class="line">                    rotateRight(x);</span><br><span class="line">                &#125;</span><br><span class="line">                setColor(parentOf(x), BLACK);</span><br><span class="line">                setColor(parentOf(parentOf(x)), RED);</span><br><span class="line">                rotateLeft(parentOf(parentOf(x)));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    root.color = BLACK;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="13-5-4-Properties">13.5.4 Properties</h3>
<blockquote>
<p>Properties ç»§æ‰¿è‡ª Hashtable å¹¶å®ç°äº† Map æ¥å£ã€‚ä¹Ÿä½¿ç”¨é”®å€¼å¯¹çš„æ–¹å¼ä¿å­˜æ•°æ®</p>
<p>Properties ä½¿ç”¨ç‰¹ç‚¹ä¸ Hashtable ç›¸ä¼¼</p>
<p>Properties è¿˜å¯ä»¥ç”¨äº xxx.properties æ–‡ä»¶ä¸­ï¼ŒåŠ è½½æ•°æ®åˆ° Properties å¯¹è±¡ï¼Œè¿›è¡Œè¯»å–å’Œä¿®æ”¹</p>
<p>xxx.properties æ–‡ä»¶å¸¸ä½œä¸ºé…ç½®æ–‡ä»¶</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Properties</span> <span class="keyword">extends</span> <span class="title class_">Hashtable</span>&lt;Object,Object&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><em><strong>â€”â€”å…³äºè¿™äº›ï¼Œè¯¦è§ [[17 IOæµ ]](<a target="_blank" rel="noopener" href="https://i-melody.github.io/2022/01/06/Java/%E5%85%A5%E9%97%A8%E9%98%B6%E6%AE%B5/17">https://i-melody.github.io/2022/01/06/Java/å…¥é—¨é˜¶æ®µ/17</a> IOæµ/)</strong></em></p>
<ul>
<li>
<p><code>String getProperty(String key)</code> ï¼šè¾“å…¥ä¸€ä¸ª String ç±»å‹çš„ keyï¼Œè¿”å›ä¸€ä¸ª String çš„ value</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">getProperty</span><span class="params">(String key)</span> &#123;</span><br><span class="line"><span class="type">Object</span> <span class="variable">oval</span> <span class="operator">=</span> <span class="built_in">super</span>.get(key);</span><br><span class="line"><span class="type">String</span> <span class="variable">sval</span> <span class="operator">=</span> (oval <span class="keyword">instanceof</span> String) ? (String)oval : <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">return</span> ((sval == <span class="literal">null</span>) &amp;&amp; (defaults != <span class="literal">null</span>)) ? defaults.getProperty(key) : sval;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="13-6-æ— åºé›†åˆæ¥å£-Set">13.6 æ— åºé›†åˆæ¥å£ Set</h2>
<blockquote>
<p>Set æ˜¯ Collection æ¥å£çš„å­ç±»æ¥å£ã€‚</p>
<p>Set æ¥å£çš„ç‰¹ç‚¹æ˜¯æ— åºï¼ˆæ·»åŠ å’Œå–å‡ºé¡ºåºä¸ä¸€è‡´ï¼Œå…¶å–å‡ºé¡ºåºç”±æŸä¸ªç®—æ³•å†³å®šï¼‰ï¼Œæ²¡æœ‰ç´¢å¼•</p>
<p>ä¸å…è®¸é‡å¤å…ƒç´ ã€‚æ•…è€Œï¼Œæœ€å¤šåŒ…å«ä¸€ä¸ª null</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Set</span>&lt;E&gt; <span class="keyword">extends</span> <span class="title class_">Collection</span>&lt;E&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="13-6-1-HashSet">13.6.1 HashSet</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashSet</span>&lt;E&gt;</span><br><span class="line">    <span class="keyword">extends</span> <span class="title class_">AbstractSet</span>&lt;E&gt;</span><br><span class="line">    <span class="keyword">implements</span> <span class="title class_">Set</span>&lt;E&gt;, Cloneable, java.io.Serializable</span><br></pre></td></tr></table></figure>
<blockquote>
<p>HashSet å®ç°äº† Set æ¥å£ã€‚åº•å±‚å®é™…ä¸Šä½¿ç”¨ HashMap æ¥å­˜å‚¨æ•°æ®ã€‚<s>èº«åœ¨ Collection å¿ƒåœ¨ Map</s></p>
<p>HashSet æ˜¯æ— åºçš„ã€‚å…¶å®é™…é¡ºåºå–å†³äºè®¡ç®—å¾—åˆ°çš„ hash å€¼</p>
</blockquote>
<h4 id="HashSet-çš„æºç ">HashSet çš„æºç </h4>
<ol>
<li>
<p>HashSet åº•å±‚æ˜¯ HashMapã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">transient</span> HashMap&lt;E,Object&gt; map;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>å®ä¾‹åŒ–ä¹Ÿå’Œ HashMap ç›¸åŒ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">HashSet</span><span class="params">()</span> &#123;</span><br><span class="line">    map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">HashSet</span><span class="params">(<span class="type">int</span> initialCapacity)</span> &#123;</span><br><span class="line">    map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;(initialCapacity);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">HashSet</span><span class="params">(<span class="type">int</span> initialCapacity, <span class="type">float</span> loadFactor)</span> &#123;</span><br><span class="line">    map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;(initialCapacity, loadFactor);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æ·»åŠ ä¸€ä¸ªå…ƒç´ æ—¶è°ƒç”¨ HashMap çš„æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">add</span><span class="params">(E e)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> map.put(e, PRESENT)==<span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="13-6-2-LinkedHashSet">13.6.2 LinkedHashSet</h3>
<blockquote>
<p>LinkedHashSet æ˜¯ HashSet çš„å­ç±»</p>
<p>LinkedHashSet åº•å±‚æ˜¯ä¸€ä¸ª LinkedHashMapï¼Œç»´æŠ¤äº†ä¸€ä¸ªæ•°ç»„ + åŒå‘é“¾è¡¨ã€‚<s>æœ‰å…¶çˆ¶å¿…æœ‰å…¶å­</s></p>
<p>LinkedHashSet æ ¹æ®å…ƒç´ çš„ hashCode å€¼æ¥å†³å®šå…ƒç´ çš„å­˜å‚¨ä½ç½®ã€‚åŒæ—¶ï¼Œä½¿ç”¨é“¾è¡¨ç»´æŠ¤å…ƒç´ çš„æ¬¡åºã€‚è¿™ä½¿å¾—å…ƒç´ çœ‹èµ·æ¥æ˜¯ä»¥æ’å…¥é¡ºåºä¿å­˜çš„ï¼Œå¹¶å¾—ä»¥æŒ‰ç…§æ”¾å…¥é¡ºåºå–å‡º</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LinkedHashSet</span>&lt;E&gt;</span><br><span class="line">    <span class="keyword">extends</span> <span class="title class_">HashSet</span>&lt;E&gt;</span><br><span class="line">    <span class="keyword">implements</span> <span class="title class_">Set</span>&lt;E&gt;, Cloneable, java.io.Serializable</span><br></pre></td></tr></table></figure>
<h4 id="LinkedHashSet-çš„æºç ï¼š">LinkedHashSet çš„æºç ï¼š</h4>
<ol>
<li>
<p>åœ¨ç±» HashSet ä¸­ï¼Œå­˜åœ¨ä¸€ä¸ªé»˜è®¤è®¿é—®èŒƒå›´çš„æ„é€ å™¨ã€‚è¯¥æ„é€ å™¨ä¸åŒäºå…¶ä»–æ„é€ å™¨ï¼Œä¼šè®©å®ä¾‹ç»´æŠ¤ä¸€ä¸ª LinkedHashMap</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">HashSet(<span class="type">int</span> initialCapacity, <span class="type">float</span> loadFactor, <span class="type">boolean</span> dummy) &#123;</span><br><span class="line">    map = <span class="keyword">new</span> <span class="title class_">LinkedHashMap</span>&lt;&gt;(initialCapacity, loadFactor);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>LinkedHashSet çš„æ„é€ å™¨å³è°ƒç”¨äº†è¯¥çˆ¶ç±»æ„é€ å™¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">LinkedHashSet</span><span class="params">(<span class="type">int</span> initialCapacity, <span class="type">float</span> loadFactor)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(initialCapacity, loadFactor, <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">LinkedHashSet</span><span class="params">(<span class="type">int</span> initialCapacity)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(initialCapacity, <span class="number">.75f</span>, <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">LinkedHashSet</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(<span class="number">16</span>, <span class="number">.75f</span>, <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="13-6-3-TreeSet">13.6.3 TreeSet</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TreeSet</span>&lt;E&gt; <span class="keyword">extends</span> <span class="title class_">AbstractSet</span>&lt;E&gt;</span><br><span class="line">    <span class="keyword">implements</span> <span class="title class_">NavigableSet</span>&lt;E&gt;, Cloneable, java.io.Serializable</span><br></pre></td></tr></table></figure>
<blockquote>
<p>TreeSet å®ç°äº† Set æ¥å£ï¼Œå…¶åº•å±‚æ˜¯ä¸€ä¸ª TreeMapã€‚<s>å¥½å®¶ä¼™ï¼ŒåŸæ¥ Set å…¨å®¶éƒ½æ˜¯å§åº•</s></p>
<p>è°ƒç”¨æ— å‚æ„é€ å™¨åˆ›å»º TreeSet æ—¶ï¼Œé»˜è®¤æ˜¯æ— åºæ’åˆ—ã€‚ä¹Ÿèƒ½åœ¨æ„é€ æ—¶ä¼ å…¥ä¸€ä¸ªæ¯”è¾ƒå™¨ã€‚æœ‰æ¯”è¾ƒå™¨çš„åœºåˆï¼Œæ¯”è¾ƒå™¨è¿”å› 0 æ—¶ï¼Œä¸å‘ç”Ÿæ›¿æ¢</p>
<p>ä¸ä¼ å…¥æ¯”è¾ƒå™¨çš„åœºåˆï¼Œä½¿ç”¨çš„æ˜¯ä¼ å…¥å¯¹è±¡è‡ªå¸¦çš„æ¯”è¾ƒå™¨ã€‚æ‰€ä»¥ï¼Œè¿™ä¸ªåœºåˆï¼Œä¼ å…¥çš„ key å¯¹è±¡å¿…é¡»æ˜¯ Comparable æ¥å£çš„å®ç°å­ç±»</p>
</blockquote>
<h2 id="13-7-é›†åˆçš„é€‰æ‹©">13.7 é›†åˆçš„é€‰æ‹©</h2>
<p>åœ¨å¼€å‘ä¸­ï¼Œé€‰æ‹©ä»€ä¹ˆé›†åˆå®ç°ç±»ï¼Œä¸»è¦å–å†³äºä¸šåŠ¡æ“ä½œç‰¹ç‚¹ï¼Œç„¶åæ ¹æ®é›†åˆå®ç°ç±»ç‰¹æ€§è¿›è¡Œåˆ†æé€‰æ‹©ã€‚</p>
<p>åˆ¤æ–­å­˜å‚¨çš„ç±»å‹ï¼ˆä¸€ç»„å¯¹è±¡ [å•åˆ—]ï¼Œæˆ–ä¸€ç»„é”®å€¼å¯¹ [åŒåˆ—]ï¼‰</p>
<ul>
<li>ä¸€ç»„å¯¹è±¡ï¼šCollection æ¥å£
<ul>
<li>å…è®¸é‡å¤ï¼šList
<ul>
<li>å¢åˆ å¤šï¼š<code>LinkedList</code> ï¼ˆåŒå‘é“¾è¡¨ï¼‰</li>
<li>æ”¹æŸ¥å¤šï¼šArrayList ï¼ˆ<code>Object[]</code> æ•°ç»„ï¼‰</li>
</ul>
</li>
<li>ä¸å…è®¸é‡å¤ï¼šSet
<ul>
<li>æ— åºï¼šHashSet ï¼ˆæ•°ç»„ + é“¾è¡¨ + çº¢é»‘æ ‘ï¼Œåº•å±‚æ˜¯ HashMapï¼‰</li>
<li>æ’åºï¼š<code>TreeSet</code></li>
<li>é¡ºåºä¸€è‡´ï¼šLinkedHashSet ï¼ˆæ•°ç»„ + åŒå‘é“¾è¡¨ï¼Œåº•å±‚æ˜¯ <code>LinkedHashMap</code>ï¼‰</li>
</ul>
</li>
</ul>
</li>
<li>ä¸€ç»„é”®å€¼å¯¹ï¼šMap
<ul>
<li>é”®æ— åºï¼šHashMap ï¼ˆæ•°ç»„ + é“¾è¡¨ + çº¢é»‘æ ‘ [ JDK 8 ä»¥å ] ï¼‰</li>
<li>é”®æ’åºï¼š<code>TreeMap</code></li>
<li>é”®é¡ºåºä¸€è‡´ï¼š<code>LinkedHashMap</code> ï¼ˆåº•å±‚æ˜¯ HashMapï¼‰</li>
<li>è¯»å–æ–‡ä»¶ï¼šProperties</li>
</ul>
</li>
</ul>
<h2 id="13-8-å·¥å…·ç±»-Collections">13.8 å·¥å…·ç±» Collections</h2>
<blockquote>
<p>Collections å·¥å…·ç±»æ˜¯ä¸€ä¸ªæ“ä½œ Setã€Listã€Map ç­‰é›†åˆçš„å·¥å…·ç±»</p>
<p>å…¶ä¸­æä¾›äº†ä¸€ç³»åˆ—é™æ€æ–¹æ³•ï¼Œå¯¹é›†åˆå…ƒç´ è¿›è¡Œ æ’åºã€æŸ¥è¯¢å’Œä¿®æ”¹ç­‰æ“ä½œ</p>
</blockquote>
<h4 id="å¸¸ç”¨æ–¹æ³•ï¼š-8">å¸¸ç”¨æ–¹æ³•ï¼š</h4>
<p><strong>æ’åºï¼š</strong></p>
<ul>
<li><code>reverse(List)</code>ï¼šåè½¬ List ä¸­å…ƒç´ çš„æ’åº</li>
<li><code>shuffle(List)</code>ï¼šå¯¹ <code>List </code>ä¸­å…ƒç´ è¿›è¡Œéšæœºæ’åº</li>
<li><code>sort(List)</code>ï¼šæ ¹æ®å…ƒç´ çš„è‡ªç„¶é¡ºåºå¯¹æŒ‡å®š List é›†åˆå…ƒç´ å‡åºæ’åˆ—</li>
<li><code>reverse(List, Comparator)</code>ï¼šæ ¹æ®æŒ‡å®š Comparator å¯¹ List æ’åº</li>
<li><code>swap(List, int, int)</code>ï¼šå°†ä¸¤å¤„å…ƒç´ ä½ç½®äº’æ¢</li>
</ul>
<p><strong>æŸ¥æ‰¾ã€æ›¿æ¢ï¼š</strong></p>
<ul>
<li>
<p><code>Object max(Collection)</code>ï¼šæ ¹æ®å…ƒç´ çš„è‡ªç„¶æ’åºï¼Œè¿”å›é›†åˆä¸­æœ€å¤§çš„å…ƒç´ </p>
</li>
<li>
<p><code>Object max(Collection, Comparator)</code>ï¼šæ ¹æ®æ¯”è¾ƒå™¨ï¼Œè¿”å›æœ€å¤§å…ƒç´ </p>
</li>
<li>
<p><code>Object min(Collection)</code>ï¼šæ ¹æ®å…ƒç´ çš„è‡ªç„¶æ’åºï¼Œè¿”å›æœ€å°å…ƒç´ </p>
</li>
<li>
<p><code>Object min(Collection, Comparator)</code>ï¼šæ ¹æ®æ¯”è¾ƒå™¨ï¼Œè¿”å›æœ€å°å…ƒç´ </p>
</li>
<li>
<p><code>int frequency(Collection, Object)</code>ï¼šè¿”å›é›†åˆä¸­æŒ‡å®šå…ƒç´ çš„å‡ºç°æ¬¡æ•°</p>
</li>
<li>
<p><code>void copy(List dest, List src)</code>ï¼šå°† src çš„å†…å®¹å¤åˆ¶åˆ° dest ä¸­</p>
<p>è¿™ä¸ªåœºåˆï¼Œè¦ä¿è¯ dest çš„å¤§å°ä¸å°äº srcã€‚æ‰€ä»¥ï¼Œå¯èƒ½éœ€è¦å…ˆç»™ dest èµ‹å€¼</p>
</li>
<li>
<p><code>boolean replaceAll(List list, Object oldVal, Object newVal)</code>ï¼šç”¨ newVal æ›¿æ¢æ‰€æœ‰ oldVal å€¼</p>
</li>
</ul>
<h2 id="13-9-JUnit">13.9 JUnit</h2>
<blockquote>
<p>ä¸€ä¸ªç±»æœ‰å¤šä¸ªåŠŸèƒ½ä»£ç éœ€è¦æµ‹è¯•ï¼Œä¸ºäº†æµ‹è¯•ï¼Œå°±è¦å†™å…¥ <code>main</code> æ–¹æ³•ä¸­</p>
<p>å¦‚æœæœ‰å¤šä¸ªåŠŸèƒ½ä»£ç æµ‹è¯•ï¼Œéœ€è¦åå¤æ’¤é”€ï¼Œè¿‡ç¨‹ç¹ç</p>
</blockquote>
<blockquote>
<p>JUnit æ˜¯ä¸€ä¸ª Java è¯­è¨€å•å…ƒæµ‹è¯•æ¡†æ¶</p>
<p>å¤šæ•° Java å¼€å‘ç¯å¢ƒéƒ½å·²é›†æˆäº† JUnit ä½œä¸ºå•å…ƒæµ‹è¯•å·¥å…·</p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1fh411y7R8?p=566&amp;t=259.3">ä½¿ç”¨æ–¹æ³•</a></p>
<p>â€¦â€¦æ€»çš„æ¥è®²ï¼Œæ–¹æ³•å°±æ˜¯åŠ å…¥ <code>@Test</code>ï¼Œç„¶å <code>alt + enter</code> å¼•å…¥ JUnit 5ï¼Œæœ€åè¿è¡Œ</p>
</blockquote>
<h1>14 æ ‘</h1>
<h4 id="ä»€ä¹ˆæ˜¯æ ‘ï¼Ÿ">ä»€ä¹ˆæ˜¯æ ‘ï¼Ÿ</h4>
<table>
<thead>
<tr>
<th></th>
<th><strong>ç»“æ„ä¸¥æ ¼æ´¾</strong> å”¯ä¸€çˆ¶èŠ‚ç‚¹å’Œå¤æ•°å­èŠ‚ç‚¹</th>
<th><strong>ç»“æ„ä¸­ç«‹æ´¾</strong> æœ‰å‰é©±å’Œåç»§å…³ç³»å°±è¡Œ</th>
<th><strong>ç»“æ„è‡ªç”±æ´¾</strong> èƒ½å­˜æ”¾å†…å®¹å°±è¡Œ</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ç±»å‹ä¸¥æ ¼æ´¾</strong> æ˜¯ä¸€ç§æ•°æ®ç»“æ„</td>
<td>äºŒå‰æ ‘æ˜¯æ ‘</td>
<td>é“¾è¡¨ä¹Ÿæ˜¯æ ‘</td>
<td>æ ˆä¹Ÿæ˜¯æ ‘</td>
</tr>
<tr>
<td><strong>ç±»å‹ä¸­ç«‹æ´¾</strong> å’Œç¼–ç¨‹æœ‰å…³å°±è¡Œ</td>
<td>åŒ…ä¹Ÿæ˜¯æ ‘</td>
<td>è¯­å¥è‚¯å®šæ˜¯æ ‘</td>
<td>æ ‡è¯†ç¬¦éƒ½æ˜¯æ ‘</td>
</tr>
<tr>
<td><strong>ç±»å‹è‡ªç”±æ´¾</strong> å’Œç¨‹åºå‘˜æœ‰å…³å°±è¡Œ</td>
<td>wifi å½“ç„¶æ˜¯æ ‘</td>
<td>è¡£æœæ‹‰é“¾ä¹Ÿæ˜¯æ ‘</td>
<td>é¦„é¥¨ä¹Ÿæ˜¯æ ‘ï¼</td>
</tr>
</tbody>
</table>
<h2 id="14-1-äºŒå‰æ ‘ï¼š">14.1 äºŒå‰æ ‘ï¼š</h2>
<p><a href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg=="><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i-melody.github.io/img/Java_InputImage/%E6%A0%91%E7%BB%93%E6%9E%84%E5%9B%BE_14.1.webp" alt="img"></a></p>
<p><em>ï¼ˆæ ‘ç»“æ„å›¾_14.1ï¼‰</em></p>
<ul>
<li>
<p>**äºŒå‰æ ‘ï¼š**æ ‘æœ‰å¤šç§ã€‚æ¯ä¸ªèŠ‚ç‚¹æœ€å¤šåªèƒ½æœ‰ 2 ä¸ªå­èŠ‚ç‚¹çš„ä¸€ç§æ ‘çš„å½¢å¼ç§°ä¸ºäºŒå‰æ ‘</p>
<p>äºŒå‰æ ‘çš„å­èŠ‚ç‚¹åˆ†ä¸º <strong>å·¦èŠ‚ç‚¹</strong> å’Œ <strong>å³èŠ‚ç‚¹</strong>ã€‚</p>
</li>
<li>
<p>**æ»¡äºŒå‰æ ‘ï¼š**äºŒå‰æ ‘çš„ æ‰€æœ‰å¶èŠ‚ç‚¹ éƒ½åœ¨ æœ€åä¸€å±‚ï¼Œä¸”èŠ‚ç‚¹æ€»æ•°æ˜¯ 2n - 1</p>
</li>
<li>
<p>**å®Œå…¨äºŒå‰æ ‘ï¼š**äºŒå‰æ ‘çš„ æ‰€æœ‰å¶èŠ‚ç‚¹ éƒ½åœ¨ æœ€åä¸€å±‚ å’Œ å€’æ•°ç¬¬äºŒå±‚ï¼Œä¸”æœ€åä¸€å±‚çš„å¶èŠ‚ç‚¹åœ¨å·¦ä¾§è¿ç»­ã€å€’æ•°ç¬¬äºŒå±‚çš„å¶èŠ‚ç‚¹åœ¨å³ä¾§è¿ç»­</p>
</li>
</ul>
<h4 id="äºŒå‰æ ‘çš„éå†ï¼š">äºŒå‰æ ‘çš„éå†ï¼š</h4>
<ul>
<li>
<p>**å‰åºéå†ï¼š**å…ˆè¾“å‡ºçˆ¶èŠ‚ç‚¹ï¼Œå†éå†å·¦å­æ ‘å’Œå³å­æ ‘ã€‚</p>
<p>è‡ªæ ¹èŠ‚ç‚¹èµ·ã€‚å…ˆè¾“å‡ºå½“å‰èŠ‚ç‚¹ã€‚å†é€’å½’å‰åºéå†å·¦èŠ‚ç‚¹ã€‚é‚£ä¹‹åï¼Œé€’å½’å‰åºéå†å³èŠ‚ç‚¹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span> &#123;					<span class="comment">// èŠ‚ç‚¹ç±»</span></span><br><span class="line">    <span class="type">int</span> val;</span><br><span class="line">    Node left;</span><br><span class="line">    Node right;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">traverse</span><span class="params">(Node root)</span> &#123;</span><br><span class="line">    <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">    traverse(root, sb);</span><br><span class="line">    <span class="keyword">return</span> sb.toString();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">traverse</span><span class="params">(Node root, StringBuilder sb)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    sb.append(root.val).append(<span class="string">&quot; &quot;</span>);		<span class="comment">// å…ˆè¾“å‡ºçˆ¶èŠ‚ç‚¹</span></span><br><span class="line">    traverse(root.left, sb);				<span class="comment">// å†éå†å·¦å­æ ‘</span></span><br><span class="line">    traverse(root.right, sb);				<span class="comment">// å†éå†å³å­æ ‘</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>**ä¸­åºéå†ï¼š**å…ˆéå†å·¦å­æ ‘ï¼Œå†è¾“å‡ºçˆ¶èŠ‚ç‚¹ï¼Œå†éå†å³å­æ ‘ã€‚</p>
</li>
<li>
<p>**ååºéå†ï¼š**å…ˆéå†å·¦å­æ ‘ï¼Œå†éå†å³å­æ ‘ï¼Œå†è¾“å‡ºçˆ¶èŠ‚ç‚¹ã€‚</p>
</li>
</ul>
<h3 id="14-1-1-é¡ºåºå­˜å‚¨äºŒå‰æ ‘">14.1.1 é¡ºåºå­˜å‚¨äºŒå‰æ ‘</h3>
<p>ä»æ•°æ®å­˜å‚¨æ¥çœ‹ï¼Œæ•°ç»„ä¸æ ‘å¯ä»¥ç›¸äº’è½¬æ¢ã€‚æ•°ç»„å¯ä»¥è½¬æ¢æˆæ ‘ï¼Œæ ‘ä¹Ÿèƒ½è½¬æ¢æˆæ•°ç»„ã€‚</p>
<p>é¡ºåºå­˜å‚¨äºŒå‰æ ‘é€šå¸¸åªè€ƒè™‘å®Œå…¨äºŒå‰æ ‘ã€‚å°†æ•°ç»„è½¬æ¢æˆæ ‘åï¼Œå°†å¯ä»¥è¿›è¡Œå‰åºã€ä¸­åºã€ååºéå†ã€‚</p>
<p><strong>é¡ºåºå­˜å‚¨äºŒå‰æ ‘çš„ä¾‹å­ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[] array = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>è¯¥ array çš„é¡ºåºå­˜å‚¨äºŒå‰æ ‘ä¸ºï¼š</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">0</span><br><span class="line">1</span><br><span class="line">3</span><br><span class="line">2</span><br><span class="line">5</span><br><span class="line">4</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td></tr></table></figure>
<h4 id="é¡ºåºå­˜å‚¨äºŒå‰æ ‘çš„è½¬æ¢ï¼š">é¡ºåºå­˜å‚¨äºŒå‰æ ‘çš„è½¬æ¢ï¼š</h4>
<ul>
<li>
<p>æ•°ç»„ä¸‹æ ‡ä¸º 0 çš„å…ƒç´ æ”¾åœ¨æ ¹èŠ‚ç‚¹ã€‚</p>
</li>
<li>
<p>å¯¹äºæ•°ç»„ä¸‹æ ‡ä¸º n çš„å…ƒç´ ï¼Œå…¶å·¦å­èŠ‚ç‚¹çš„æ•°ç»„ä¸‹æ ‡ä¸º 2 Ã— n + 1ã€å³å­èŠ‚ç‚¹çš„æ•°ç»„ä¸‹æ ‡ä¸º 2 Ã— n + 2ã€çˆ¶èŠ‚ç‚¹çš„æ•°ç»„ä¸‹æ ‡ä¸º (n - 1) / 2</p>
<p>å¯ä»¥å‘ç°ï¼Œæ‰€æœ‰å·¦èŠ‚ç‚¹éƒ½æ˜¯å¥‡æ•°ä¸‹æ ‡ï¼Œå³èŠ‚ç‚¹éƒ½æ˜¯å¶æ•°ä¸‹æ ‡</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Node <span class="title function_">toTree</span><span class="params">(<span class="type">int</span>[] array)</span> &#123;</span><br><span class="line">    <span class="type">Node</span> <span class="variable">root</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(array[<span class="number">0</span>]);</span><br><span class="line">    List&lt;Node&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Node&gt;();</span><br><span class="line">    list.add(root);									<span class="comment">// æ•°ç»„ä¸‹æ ‡ä¸º 0 çš„å…ƒç´ æ”¾åœ¨æ ¹èŠ‚ç‚¹ã€‚</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; array.length; i++) &#123;		<span class="comment">// æŒ‰ç…§å‰è¿°æ–¹æ³•ï¼Œåˆ›å»ºæ¯ä¸ªå…ƒç´ èŠ‚ç‚¹ï¼Œå¹¶æ”¾åœ¨å¯¹åº”çˆ¶èŠ‚ç‚¹ä¸‹</span></span><br><span class="line">        <span class="type">Node</span> <span class="variable">temp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(array[i]);</span><br><span class="line">        list.add(temp);</span><br><span class="line">        <span class="type">Node</span> <span class="variable">parent</span> <span class="operator">=</span> list.get((i - <span class="number">1</span>) / <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">if</span> (i % <span class="number">2</span> == <span class="number">0</span>) parent.right = temp;</span><br><span class="line">        <span class="keyword">else</span> parent.left = temp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> root;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> val;</span><br><span class="line">    <span class="keyword">public</span> Node left;</span><br><span class="line">    <span class="keyword">public</span> Node right;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(<span class="type">int</span> val)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.val = val;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šæ˜¯ä¸€ç§æ˜¾å¼çš„è½¬æ¢ã€‚ä¹Ÿå¯ä»¥ç›´æ¥å°†æ•°ç»„è§†ä¸ºæŠ½è±¡çš„é¡ºåºå­˜å‚¨äºŒå‰æ ‘ã€‚</p>
<p>å¦‚ï¼šå †ã€‚<em><strong>â€”â€”è§ [[5.4.8 å †æ’åº]](<a target="_blank" rel="noopener" href="https://i-melody.github.io/2021/11/27/Java/%E5%85%A5%E9%97%A8%E9%98%B6%E6%AE%B5/5">https://i-melody.github.io/2021/11/27/Java/å…¥é—¨é˜¶æ®µ/5</a> æ•°ç»„ã€æ’åºå’ŒæŸ¥æ‰¾/#5-4-8-å †æ’åº)</strong></em></p>
<h3 id="14-1-2-çº¿ç´¢åŒ–äºŒå‰æ ‘">14.1.2 çº¿ç´¢åŒ–äºŒå‰æ ‘</h3>
<p>å«æœ‰ n å„èŠ‚ç‚¹çš„äºŒå‰é“¾è¡¨ä¸­ï¼Œæœ‰ n + 1 ä¸ªç©ºæŒ‡é’ˆåŸŸã€‚åˆ©ç”¨è¿™äº›ç©ºæŒ‡é’ˆåŸŸï¼Œå­˜æ”¾æŒ‡å‘èŠ‚ç‚¹åœ¨æŸç§éå†æ¬¡åºä¸‹çš„å‰é©±å’Œåç»§èŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œè¿™ç§é™„åŠ çš„æŒ‡é’ˆç§°ä¸º <strong>çº¿ç´¢</strong>ã€‚åŠ ä¸Šäº†çº¿ç´¢çš„äºŒå‰é“¾è¡¨ç§°ä¸º <strong>çº¿ç´¢é“¾è¡¨</strong>ï¼Œç›¸åº”äºŒå‰æ ‘ç§°ä¸º <strong>çº¿ç´¢äºŒå‰æ ‘</strong>ã€‚</p>
<p>çº¿ç´¢äºŒå‰æ ‘å¯åˆ†ä¸ºï¼šå‰åºçº¿ç´¢äºŒå‰æ ‘ã€ä¸­åºçº¿ç´¢äºŒå‰æ ‘ã€åç»­çº¿ç´¢äºŒå‰æ ‘ã€‚</p>
<p>çº¿ç´¢åŒ–äºŒå‰æ ‘åï¼Œé‚£äº›å·¦èŠ‚ç‚¹å’Œå³èŠ‚ç‚¹æ—¢å¯èƒ½æŒ‡å‘ è‡ªèº«çš„å­æ ‘ï¼Œä¹Ÿå¯èƒ½æŒ‡å‘è‡ªèº«çš„ å‰é©± / åç»§ èŠ‚ç‚¹ã€‚å› æ­¤ï¼Œéœ€è¦æ·»åŠ ä¸€ç»„æ ‡è®°ï¼Œä»¥è®°å½•çº¿ç´¢çš„ç§ç±»ã€‚</p>
<p>è¿™ä¸ªéå†çš„åœºåˆï¼Œä¸èƒ½å†ä½¿ç”¨é€’å½’æ–¹å¼éå†ï¼Œè€Œæ˜¯æ”¹ä¸ºçº¿æ€§æ–¹å¼éå†å³å¯ã€‚</p>
<h3 id="14-1-3-èµ«å¤«æ›¼æ ‘">14.1.3 èµ«å¤«æ›¼æ ‘</h3>
<p>ç»™å®š n ä¸ªæƒå€¼ä½œä¸º n ä¸ªå¶èŠ‚ç‚¹ï¼Œæ„é€ ä¸€æ£µäºŒå‰æ ‘ã€‚è‹¥è¯¥æ ‘çš„å¸¦æƒè·¯å¾„é•¿åº¦ï¼ˆWPLï¼‰æœ€å°ï¼Œåˆ™ç§°å…¶ä¸º <strong>æœ€ä¼˜äºŒå‰æ ‘</strong>ï¼ˆèµ«å¤«æ›¼æ ‘ã€å“ˆå¤«æ›¼æ ‘ã€éœå¤«æ›¼æ ‘ï¼‰</p>
<ul>
<li>
<p>èŠ‚ç‚¹çš„å¸¦æƒè·¯å¾„é•¿åº¦ï¼šè¯¥èŠ‚ç‚¹çš„æƒ Ã— èŠ‚ç‚¹è·¯å¾„é•¿åº¦</p>
</li>
<li>
<p>æ ‘çš„å¸¦æƒè·¯å¾„é•¿åº¦ï¼šæ‰€æœ‰çš„å¶ç»“ç‚¹çš„å¸¦æƒè·¯å¾„é•¿åº¦ä¹‹å’Œ</p>
<p>èµ«å¤«æ›¼æ ‘ä¸­ï¼Œä¸€å®šæ˜¯æƒå€¼è¾ƒå¤§çš„èŠ‚ç‚¹è·ç¦»æ ¹æ›´è¿‘ã€‚</p>
</li>
</ul>
<p><strong>èµ«å¤«æ›¼æ ‘çš„ä¾‹å­ï¼š</strong></p>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">NaN</span></span><br><span class="line"><span class="literal">NaN</span></span><br><span class="line"><span class="number">14</span></span><br><span class="line"><span class="literal">NaN</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="literal">NaN</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="literal">NaN</span></span><br><span class="line"><span class="number">16</span></span><br><span class="line"><span class="number">20</span></span><br></pre></td></tr></table></figure>
<h4 id="ç”Ÿæˆèµ«å¤«æ›¼æ ‘ï¼š">ç”Ÿæˆèµ«å¤«æ›¼æ ‘ï¼š</h4>
<ol>
<li>å¯¹æ•°æ®è¿›è¡Œæ’åºã€‚æ¯ä¸ªæ•°æ®éƒ½å¯ä»¥åˆ›å»ºä¸€ä¸ªèŠ‚ç‚¹</li>
<li>å–å‡ºæƒå€¼æœ€å°çš„ä¸¤é¢—äºŒå‰æ ‘ï¼Œåˆå¹¶ä¸ºä¸€æ£µæ–°çš„äºŒå‰æ ‘ã€‚è¯¥äºŒå‰æ ‘æƒå€¼æ˜¯ä¸¤æ£µå­æ ‘çš„æƒå€¼ä¹‹å’Œ</li>
<li>å°†æ•°æ®å†æ¬¡æ’åºï¼Œé‡å¤åˆå¹¶æ­¥éª¤ï¼Œç›´è‡³å‰©ä½™å”¯ä¸€çš„æ ‘ï¼Œå³ä¸ºèµ«å¤«æ›¼æ ‘</li>
</ol>
<h4 id="èµ«å¤«æ›¼ç¼–ç ï¼š">èµ«å¤«æ›¼ç¼–ç ï¼š</h4>
<blockquote>
<p>èµ«å¤«æ›¼ç¼–ç æ˜¯ä¸€ç§ç¼–ç æ–¹å¼ï¼Œæ˜¯ä¸€ç§ç¨‹åºç®—æ³•ã€‚èµ«å¤«æ›¼ç¼–ç æ˜¯èµ«å¤«æ›¼æ ‘åœ¨ç”µè®¯é€šä¿¡ä¸­çš„ç»å…¸åº”ç”¨ä¹‹ä¸€ã€‚</p>
<p>èµ«å¤«æ›¼ç¼–ç å¹¿æ³›åº”ç”¨äºæ•°æ®æ–‡ä»¶å‹ç¼©ï¼Œå…¶å‹ç¼©ç‡åœ¨ 20% ~ 90% é—´</p>
<p>èµ«å¤«æ›¼ç¼–ç æ˜¯å¯å˜å­—é•¿ç¼–ç çš„ä¸€ç§ã€‚æ˜¯è€èµ«åœ¨ 1952 å¹´æå‡ºçš„ç¼–ç æ–¹æ³•ï¼Œç§°ä¸º â€œæœ€ä½³ç¼–ç â€</p>
<p>èµ«å¤«æ›¼ç¼–ç æ˜¯æ— æŸå¤„ç†æ–¹æ¡ˆã€‚ç”±äºèµ«å¤«æ›¼ç¼–ç æ˜¯æŒ‰å­—èŠ‚å¤„ç†æ•°æ®ï¼Œå› æ­¤å¯ä»¥å¤„ç†æ‰€æœ‰æ–‡ä»¶</p>
</blockquote>
<p>ç¼–ç æ–¹å¼æœ‰ä¸‰ç§ï¼š</p>
<ul>
<li>
<p><strong>å®šé•¿ç¼–ç ï¼š</strong></p>
<p>å¦‚ ASCII ç ï¼Œå…¶æ¯ä¸ªå­—ç¬¦å ç”¨é•¿åº¦ä¸ºå›ºå®š 8 å­—èŠ‚</p>
</li>
<li>
<p><strong>å˜é•¿ç¼–ç ï¼š</strong></p>
<p>å¯¹å­—ç¬¦è¿›è¡Œç»Ÿè®¡ï¼ŒæŒ‰ç…§å„ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°è¿›è¡Œç¼–ç ã€‚å‡ºç°æ¬¡æ•°è¶Šå¤šï¼Œç¼–ç è¶Šå°ã€‚</p>
<p>å­—ç¬¦çš„ç¼–ç ä¸èƒ½æ˜¯å…¶ä»–å­—ç¬¦ç¼–ç çš„å‰ç¼€ï¼Œè¿™æ ·çš„ç¼–ç å«åšå‰ç¼€ç¼–ç ï¼ˆæ¶ˆé™¤äºŒä¹‰æ€§ï¼‰ã€‚</p>
</li>
<li>
<p><strong>èµ«å¤«æ›¼ç¼–ç ï¼š</strong></p>
<p>æŒ‰ç…§å­—ç¬¦çš„å‡ºç°æ¬¡æ•°ï¼Œæ„å»ºèµ«å¤«æ›¼æ ‘ã€‚ä¹‹åï¼ŒæŒ‰ç…§èµ«å¤«æ›¼æ ‘ç»“æ„ï¼Œç»™å­—ç¬¦è§„å®šç¼–ç ã€‚å‘å·¦çš„è·¯å¾„è®°ä¸º 0ï¼Œå‘å³è®°ä¸º 1ã€‚</p>
<p>è¿™æ ·å¾—åˆ°çš„ç¼–ç ï¼Œä¸€å®šæ˜¯å‰ç¼€ç¼–ç ã€‚å› ä¸ºé‚£äº›å­—ç¬¦èŠ‚ç‚¹éƒ½æ˜¯å¶èŠ‚ç‚¹ã€‚èµ«å¤«æ›¼è¡Œå•Šèµ«å¤«æ›¼ï¼</p>
<p>ä¹‹åï¼Œç”¨è§„å®šçš„ç¼–ç å°†æŒ‡å®šå­—ç¬¦ä¸²è½¬åŒ–ä¸ºå­—èŠ‚æ•°ç»„ã€‚æœ€åï¼Œä¼ é€’å­—ç¬¦æ•°ç»„å³å¯ã€‚</p>
</li>
</ul>
<h5 id="å®ç°èµ«å¤«æ›¼ç¼–ç ï¼š">å®ç°èµ«å¤«æ›¼ç¼–ç ï¼š</h5>
<p><em><strong>â€”â€”è§æœ¬ç« é™„å½•ï¼š[F1 å®ç°èµ«å¤«æ›¼ç¼–ç /è§£ç ]</strong></em></p>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p>
<ul>
<li>å‹ç¼©å·²ç»è¿‡å‹ç¼©å¤„ç†çš„æ–‡ä»¶ï¼Œé‚£ä¸ªå‹ç¼©ç‡ä¼šå˜ä½</li>
<li>å¦‚æœä¸€ä¸ªæ–‡ä»¶ä¸­é‡å¤çš„æ•°æ®å¾ˆå°‘ï¼Œå‹ç¼©æ•ˆæœä¹Ÿä¼šä¸æ˜æ˜¾</li>
</ul>
<h3 id="14-1-4-äºŒå‰æ’åºæ ‘">14.1.4 äºŒå‰æ’åºæ ‘</h3>
<p>äºŒå‰æ’åºæ ‘ï¼ˆBSTï¼ŒBinary Sort Treeï¼‰ï¼šå¯¹äºä»»ä½•ä¸€ä¸ªéå¶èŠ‚ç‚¹ï¼Œå…¶å·¦èŠ‚ç‚¹å°äºç­‰äºå½“å‰èŠ‚ç‚¹ï¼Œå³èŠ‚ç‚¹å¤§äºç­‰äºå½“å‰èŠ‚ç‚¹</p>
<p><strong>äºŒå‰æ’åºæ ‘çš„ä¾‹å­ï¼š</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">10</span><br><span class="line">8</span><br><span class="line">4</span><br><span class="line">2</span><br><span class="line">1</span><br><span class="line">6</span><br><span class="line">9</span><br><span class="line">15</span><br><span class="line">12</span><br><span class="line">23</span><br></pre></td></tr></table></figure>
<p><strong>äºŒå‰æ’åºæ ‘åˆ é™¤èŠ‚ç‚¹ï¼š</strong></p>
<ul>
<li>
<p>åˆ é™¤å¶èŠ‚ç‚¹çš„åœºåˆï¼Œå°†é‚£ä¸ªçˆ¶èŠ‚ç‚¹çš„å¯¹åº”è¿æ¥ç½®ç©ºå³å¯ã€‚</p>
</li>
<li>
<p>åˆ é™¤æœ‰å”¯ä¸€å­èŠ‚ç‚¹çš„èŠ‚ç‚¹åœºåˆï¼Œè®©é‚£ä¸ªçˆ¶èŠ‚ç‚¹çš„å¯¹åº”è¿æ¥æ”¹ä¸ºæŒ‡å‘å­æ ‘å³å¯ã€‚</p>
</li>
<li>
<p>åˆ é™¤æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹çš„èŠ‚ç‚¹çš„åœºåˆï¼Œå°†è¯¥èŠ‚ç‚¹ç½®ä¸ºæ­£æ— ç©·æˆ–è´Ÿæ— ç©·ã€‚</p>
<p>ä¹‹åç»´æŠ¤è¯¥äºŒå‰æ’åºæ ‘ï¼Œç›´åˆ°è¯¥èŠ‚ç‚¹æˆä¸ºå¶èŠ‚ç‚¹æ—¶ï¼Œåˆ é™¤è¯¥èŠ‚ç‚¹å³å¯ã€‚</p>
</li>
</ul>
<h4 id="14-1-4-1-å¹³è¡¡äºŒå‰æ ‘">14.1.4.1 å¹³è¡¡äºŒå‰æ ‘</h4>
<blockquote>
<p>äºŒå‰æ’åºæ ‘å¯èƒ½å½¢æˆä¸€äº›å¥‡æ€ªçš„å½¢çŠ¶ï¼ˆå¦‚å·¦å­æ ‘å…¨éƒ¨ä¸ºç©ºï¼‰ï¼Œè¿™æ ·å°±ä¸èƒ½å‘æŒ¥æ ‘å½¢ç»“æ„çš„æ¯”è¾ƒä¼˜åŠ¿ã€‚</p>
</blockquote>
<p>å¹³è¡¡äºŒå‰æ ‘ï¼ˆAVL æ ‘ï¼‰ï¼šä¹Ÿå«å¹³è¡¡äºŒå‰æœç´¢æ ‘ã€‚éç©ºæ—¶ï¼Œå…¶ä»»æ„èŠ‚ç‚¹å·¦å³ä¸¤ä¸ªå­æ ‘çš„é«˜åº¦å·®ä¸è¶…è¿‡ 1ï¼Œä¸”å·¦å³å­æ ‘ä¹Ÿéƒ½æ˜¯å¹³è¡¡äºŒå‰æ ‘ã€‚</p>
<p>å¹³è¡¡äºŒå‰æ ‘çš„å®ç°æ–¹æ³•æœ‰ï¼šçº¢é»‘æ ‘ã€AVLã€æ›¿ç½ªç¾Šæ ‘ã€Treapã€ä¼¸å±•æ ‘ç­‰</p>
<h5 id="å¹³è¡¡äºŒå‰æ ‘çš„å·¦æ—‹è½¬ï¼š">å¹³è¡¡äºŒå‰æ ‘çš„å·¦æ—‹è½¬ï¼š</h5>
<ul>
<li>åˆ›å»ºä¸€ä¸ªæ–°èŠ‚ç‚¹ã€‚è¯¥èŠ‚ç‚¹çš„å€¼ç­‰äºæ ¹èŠ‚ç‚¹å€¼</li>
<li>ä½¿è¯¥æ–°èŠ‚ç‚¹çš„å·¦å­æ ‘æŒ‡å‘å½“å‰æ ¹èŠ‚ç‚¹çš„å·¦å­æ ‘ã€‚ä½¿è¯¥èŠ‚ç‚¹çš„å³å­æ ‘æŒ‡å‘å½“å‰æ ¹èŠ‚ç‚¹å³å­æ ‘çš„å·¦å­æ ‘</li>
<li>ä½¿å½“å‰æ ¹èŠ‚ç‚¹çš„å³å­æ ‘çš„å·¦å­æ ‘æŒ‡å‘è¯¥æ–°èŠ‚ç‚¹</li>
<li>ä½¿å½“å‰æ ¹èŠ‚ç‚¹çš„å³å­æ ‘æˆä¸ºæ–°çš„æ ¹èŠ‚ç‚¹ã€‚æ—§çš„æ ¹èŠ‚ç‚¹è¢«åºŸå¼ƒ</li>
</ul>
<p>ç®€å•çš„è¯´ï¼Œå°±æ˜¯è®©æ ¹èŠ‚ç‚¹çš„å³å­æ ‘æŒ‡å‘å³å­æ ‘çš„å·¦å­æ ‘ã€‚è€Œå³å­æ ‘çš„å·¦å­æ ‘æŒ‡å‘æ ¹èŠ‚ç‚¹ã€‚</p>
<p>åˆç†æ€§åœ¨äºï¼Œæ ¹èŠ‚ç‚¹ï¼ˆrootï¼‰çš„å³å­æ ‘ï¼ˆrightï¼‰ä¸Šçš„æ‰€æœ‰å€¼éƒ½å¤§äº rootï¼›è€Œ right çš„æ‰€æœ‰å·¦å­æ ‘çš„å€¼ï¼Œä»¥åŠ root æ‰€æœ‰å·¦å­æ ‘çš„å€¼ä¹Ÿä¸€å®šå°äº right å€¼</p>
<h5 id="å¹³è¡¡äºŒå‰æ ‘çš„å³æ—‹è½¬ï¼š">å¹³è¡¡äºŒå‰æ ‘çš„å³æ—‹è½¬ï¼š</h5>
<p>è¿˜ä¸æ˜¯ä¸€æ ·ï¼Ÿ</p>
<h5 id="å¹³è¡¡äºŒå‰æ ‘çš„åŒæ—‹è½¬ï¼š">å¹³è¡¡äºŒå‰æ ‘çš„åŒæ—‹è½¬ï¼š</h5>
<p>ç¬¦åˆè¿›è¡Œå³æ—‹è½¬çš„æ¡ä»¶ï¼ˆå³å­æ ‘é«˜åº¦ &gt; å·¦å­æ ‘é«˜åº¦ + 1ï¼‰æ—¶ï¼Œå¦‚æœé‚£ä¸ªå·¦å­æ ‘çš„å³å­æ ‘é«˜åº¦é«˜äºå…¶å·¦å­æ ‘é«˜åº¦ï¼Œéœ€è¦å…ˆå¯¹å·¦å­æ ‘è¿›è¡Œå·¦æ—‹è½¬ã€‚ä»¥æ­¤ç±»æ¨ã€‚</p>
<h5 id="å®ç°å¹³è¡¡äºŒå‰æ ‘ï¼š">å®ç°å¹³è¡¡äºŒå‰æ ‘ï¼š</h5>
<p><em><strong>â€”â€”è§æœ¬ç« é™„å½•ï¼š[F2 å®ç°å¹³è¡¡äºŒå‰æ ‘]</strong></em></p>
<h3 id="14-1-5-çº¿æ®µæ ‘">14.1.5 çº¿æ®µæ ‘</h3>
<p>çº¿æ®µæ ‘ï¼ˆSegment Treeï¼‰æ˜¯ä¸€æ£µäºŒå‰æ ‘ã€‚å…¶æ¯ä¸ªèŠ‚ç‚¹è¡¨ç¤ºä¸€ä¸ªé—­åŒºé—´ï¼Œçˆ¶èŠ‚ç‚¹çš„åŒºé—´å†…åŒ…å«æ‰€æœ‰å­èŠ‚ç‚¹çš„åŒºé—´ã€‚</p>
<ul>
<li>
<p>å¯¹äºæ¯ä¸ªéå¶èŠ‚ç‚¹ï¼Œå°†å…¶åŒºé—´å¹³å‡åˆ’åˆ†æˆä¸¤ä¸ªå­åŒºé—´ã€‚å·¦èŠ‚ç‚¹æŒ‡å‘å…¶ä¸­è¾ƒå°åŒºé—´ï¼Œå³èŠ‚ç‚¹æŒ‡å‘é‚£ä¸ªè¾ƒå¤§åŒºé—´</p>
<p>æ¢è¨€ä¹‹ï¼Œå¯¹äºéå¶èŠ‚ç‚¹ [L, R]ï¼Œå…¶å·¦å­èŠ‚ç‚¹æ˜¯ [L, (L + R) / 2]ï¼Œå³å­èŠ‚ç‚¹æ˜¯ [((L + R) / 2) + 1, R]</p>
</li>
<li>
<p>å¯¹äºæ¯ä¸ªå¶èŠ‚ç‚¹ï¼Œå…¶åŒºé—´ä»…åŒ…å«ä¸€ä¸ªå…ƒç´ ã€‚å³ï¼Œå…¶åŒºé—´çš„å·¦ç•Œç­‰äºå³ç•Œã€‚</p>
</li>
</ul>
<p><strong>çº¿æ®µæ ‘çš„ä¾‹å­ï¼š</strong></p>
<p>åœ¨åŒºé—´ [1, 9] ä¸­ï¼Œè®°å½• [2, 9] çš„æ ·å­</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">[1,9]</span></span><br><span class="line"><span class="string">[1,5]</span></span><br><span class="line"><span class="string">[6,9]</span></span><br><span class="line"><span class="string">[1,3]</span></span><br><span class="line"><span class="string">[4,5]</span></span><br><span class="line"><span class="string">[6,7]</span></span><br><span class="line"><span class="string">[8,9]</span></span><br><span class="line"><span class="string">[1,2]</span></span><br><span class="line"><span class="string">[3,3]</span></span><br><span class="line"><span class="string">[4,4]</span></span><br><span class="line"><span class="string">[5,5]</span></span><br><span class="line"><span class="string">[6,6]</span></span><br><span class="line"><span class="string">[7,7]</span></span><br><span class="line"><span class="string">[8,8]</span></span><br><span class="line"><span class="string">[9,9]</span></span><br><span class="line"><span class="string">[1,1]</span></span><br><span class="line"><span class="string">[2,2]</span></span><br></pre></td></tr></table></figure>
<p>çº¿æ®µæ ‘æ˜¯è¿‘ä¼¼çš„å®Œå…¨äºŒå‰æ ‘ã€‚æœ‰æ—¶ï¼Œçº¿æ®µæ ‘çš„èŠ‚ç‚¹æ˜¯éšç€çº¿æ®µæ ‘çš„æ›´æ–°é€æ¸å»ºç«‹çš„ï¼Œæ­¤æ—¶çº¿æ®µæ ‘ä¸å¤„äºå®Œå…¨äºŒå‰æ ‘çš„çŠ¶æ€ã€‚</p>
<p><strong>çº¿æ®µæ ‘çš„æ›´æ–°ï¼š</strong></p>
<p>æ ‡è®°åŒºé—´æ—¶ï¼ŒæŒ‰ç…§ <strong>å¹¿åº¦ä¼˜å…ˆæœç´¢</strong> çš„æ€æƒ³ï¼Œä»æ ¹èŠ‚ç‚¹å¼€å§‹éå†åŒºé—´ã€‚</p>
<p><em><strong>â€”â€”å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼Œè§æœ¬ç«  [14.3.2 å¹¿åº¦ä¼˜å…ˆæœç´¢ BFS]</strong></em></p>
<p>æ¯”å¦‚ï¼Œæ·»åŠ åŒºé—´ [START, END] æ—¶ï¼š</p>
<ul>
<li>
<p>å¦‚æœä¸€ä¸ªèŠ‚ç‚¹çš„åŒºé—´å†…æ‰€æœ‰å…ƒç´ éƒ½è¢«æ ‡è®°ï¼Œåˆ™æ ‡è®°è¿™ä¸ªèŠ‚ç‚¹</p>
<p>å¯¹äºåŒºé—´ [L, R]ï¼Œå¦‚æœ L &gt;= STRAT ä¸” R &lt;= ENDï¼Œåˆ™æ ‡è®°è¯¥èŠ‚ç‚¹</p>
</li>
<li>
<p>å¦‚æœä¸€ä¸ªèŠ‚ç‚¹çš„åŒºé—´å†…éƒ¨åˆ†å…ƒç´ è¢«æ ‡è®°ï¼Œåˆ™ç»§ç»­éå†å…¶å·¦å³èŠ‚ç‚¹</p>
<p>å¯¹äºåŒºé—´ [L, R]ï¼ŒMID = (L + R) / 2</p>
<p>å¦‚æœ MID &gt;= Lï¼Œåˆ™éœ€è¦éå†å…¶å·¦èŠ‚ç‚¹ã€‚å¦‚æœ MID &lt; Rï¼Œåˆ™éœ€è¦éå†å…¶å³èŠ‚ç‚¹</p>
</li>
</ul>
<p>æ ‡è®°èŠ‚ç‚¹æ—¶ï¼Œåªéœ€åœ¨è¯¥èŠ‚ç‚¹æ·»åŠ æ‡’æ ‡è®°ï¼Œè€Œä¸å¿…å¯¹æ‰€æœ‰å­èŠ‚ç‚¹è¿›è¡Œæ ‡è®°ã€‚</p>
<p><strong>æ‡’æ ‡è®°ï¼š</strong></p>
<p>ä½¿ç”¨æ‡’æ ‡è®°ï¼Œå¯ä»¥åªæ›´æ–°åˆ°æ»¡è¶³æ¡ä»¶çš„åŒºé—´ï¼Œè€Œä¸å¿…å¯¹æ‰€æœ‰å­åŒºé—´ä¸€ä¸€æ›´æ–°ã€‚æ­¤åå†æ¬¡éå†åˆ°è¯¥èŠ‚ç‚¹æ—¶ï¼Œå†å¯¹æ‡’æ ‡è®°è¿›è¡Œä¸‹æ¨</p>
<p>ä¸Šè¿°ä¾‹å­ä¸­ï¼Œè®°å½•åŒºé—´ [2, 7] æ—¶ï¼Œä»…æ›´æ–°äº† [2, 2]ã€[3, 3]ã€[4, 5]ã€[6, 9] è¿™äº›èŠ‚ç‚¹ã€‚</p>
<p>ä»¥èŠ‚ç‚¹ [6, 9] ä¸ºä¾‹ï¼Œè¯¥åŒºé—´ä¸Šè¢«æ·»åŠ äº†æ‡’æ ‡è®°ï¼Œä»£è¡¨è¯¥åŒºé—´åŠæ‰€æœ‰å­åŒºé—´éƒ½è¢«è®°å½•äº†ä¸€æ¬¡ã€‚ä¸‹æ¬¡éå†åˆ°è¿™ä¸ªèŠ‚ç‚¹æ—¶ï¼Œæ‡’æ ‡è®°è¢«ä¸‹æ¨ç»™å­èŠ‚ç‚¹ [6, 7]ã€[8, 9]</p>
<p><strong>çº¿æ®µæ ‘çš„æŸ¥è¯¢ï¼š</strong></p>
<p>ä¸€ä¸ªåŒºé—´çš„å…ƒç´ å’Œï¼Œç­‰äº <em>å…¶å­åŒºé—´å„è‡ªå…ƒç´ å’Œ</em> çš„åˆè®¡å€¼</p>
<p>ä¸€ä¸ªåŒºé—´ä¸­çš„æœ€å¤§å€¼ï¼Œç­‰äº <em>å…¶å­åŒºé—´å„è‡ªæœ€å¤§å€¼</em> ä¸­çš„è¾ƒå¤§å€¼</p>
<h2 id="14-2-å¤šè·¯æŸ¥æ‰¾æ ‘">14.2 å¤šè·¯æŸ¥æ‰¾æ ‘</h2>
<blockquote>
<p>äºŒå‰æ ‘è™½ç„¶æ•ˆç‡è¾ƒé«˜ï¼Œä½†éœ€è¦åŠ è½½åˆ°å†…å­˜ä¸­ã€‚èŠ‚ç‚¹è¿‡å¤šæ—¶å°±å¯èƒ½å‡ºç°é—®é¢˜ã€‚</p>
<p>å¦‚ï¼šéœ€è¦è¿›è¡Œå¤šæ¬¡ I / O æ“ä½œï¼Œå¯¼è‡´æ„å»ºé€Ÿåº¦æ…¢ï¼›é€ æˆäºŒå‰æ ‘é«˜åº¦å¾ˆå¤§ï¼Œé™ä½æ“ä½œé€Ÿåº¦ã€‚</p>
</blockquote>
<p>æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥æ‹¥æœ‰æ›´å¤šæ•°æ®é¡¹å’Œæ›´å¤šå­èŠ‚ç‚¹çš„æ ‘ï¼Œå°±æ˜¯å¤šå‰æ ‘ï¼ˆmultiway treeï¼‰ã€‚</p>
<p>å¤šå‰æ ‘é€šè¿‡é‡æ–°ç»„ç»‡èŠ‚ç‚¹ï¼Œèƒ½å‡å°‘æ ‘çš„é«˜åº¦ï¼Œèƒ½å¯¹äºŒå‰æ ‘è¿›è¡Œä¼˜åŒ–ã€‚</p>
<h4 id="åè¯è§£é‡Šï¼š">åè¯è§£é‡Šï¼š</h4>
<ul>
<li>èŠ‚ç‚¹çš„åº¦ï¼šèŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ•°é‡</li>
<li>æ ‘çš„åº¦ / é˜¶ï¼šæ ‘ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„åº¦çš„æœ€å¤§å€¼</li>
</ul>
<h3 id="14-2-1-2-3-æ ‘">14.2.1 2-3 æ ‘</h3>
<p>2-3 æ ‘æ˜¯æœ€ç®€å•çš„ B æ ‘ç»“æ„ã€‚å…¶å…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>
<p>æ‰€æœ‰å¶èŠ‚ç‚¹éƒ½åœ¨åŒä¸€å±‚ã€‚èŠ‚ç‚¹åŒ…å«ä¸è¶…è¿‡ 2 ä¸ªå€¼ã€‚</p>
</li>
<li>
<p>æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹çš„èŠ‚ç‚¹å« <strong>äºŒèŠ‚ç‚¹</strong>ã€‚äºŒèŠ‚ç‚¹è¦ä¹ˆæ²¡æœ‰å­èŠ‚ç‚¹ï¼Œè¦ä¹ˆæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ã€‚</p>
<p>æœ‰ä¸‰ä¸ªå­èŠ‚ç‚¹çš„èŠ‚ç‚¹å« <strong>ä¸‰èŠ‚ç‚¹</strong>ã€‚ä¸‰èŠ‚ç‚¹è¦ä¹ˆæ²¡æœ‰å­èŠ‚ç‚¹ï¼Œè¦ä¹ˆæœ‰ä¸‰ä¸ªå­èŠ‚ç‚¹ã€‚</p>
</li>
<li>
<p>2-3 æ ‘æ˜¯ç”± äºŒèŠ‚ç‚¹ å’Œ ä¸‰èŠ‚ç‚¹ æ„æˆçš„æ ‘ã€‚å…¶èŠ‚ç‚¹ä»éµå¾ªäºŒå‰æ’åºæ ‘çš„è§„åˆ™ã€‚</p>
<p>å¯¹äºäºŒèŠ‚ç‚¹ï¼šå…¶å·¦å­æ ‘çš„å€¼éœ€å°äºå½“å‰èŠ‚ç‚¹ã€å³å­æ ‘çš„å€¼éœ€å¤§äºå½“å‰èŠ‚ç‚¹</p>
<p>å¯¹äºä¸‰èŠ‚ç‚¹ï¼šå…¶å·¦å­æ ‘çš„å€¼å°äºå½“å‰èŠ‚ç‚¹çš„æœ€å°å€¼ï¼Œä¸­å­æ ‘çš„å€¼éœ€ä»‹äºå½“å‰èŠ‚ç‚¹çš„ä¸¤ä¸ªå€¼ä¹‹é—´ï¼Œå³å­æ ‘çš„å€¼å¤§äºå½“å‰èŠ‚ç‚¹çš„æœ€å¤§å€¼</p>
</li>
</ul>
<p><strong>2-3 æ ‘çš„ä¾‹å­ï¼š</strong></p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">10</span></span><br><span class="line"><span class="attribute">6</span></span><br><span class="line"><span class="attribute">1</span>, <span class="number">3</span></span><br><span class="line"><span class="attribute">7</span></span><br><span class="line"><span class="attribute">15</span>, <span class="number">20</span></span><br><span class="line"><span class="attribute">11</span>, <span class="number">12</span></span><br><span class="line"><span class="attribute">19</span></span><br><span class="line"><span class="attribute">22</span>, <span class="number">32</span></span><br></pre></td></tr></table></figure>
<h4 id="æ„å»º-2-3-æ ‘ï¼š">æ„å»º 2-3 æ ‘ï¼š</h4>
<ul>
<li>
<p>æ’å…¥èŠ‚ç‚¹æ—¶ï¼Œå¦‚æœä¸èƒ½æ»¡è¶³æ¡ä»¶ï¼Œå³éœ€è¦æ‹†åˆ†ã€‚</p>
<p>æ‹†åˆ†æ—¶å…ˆæ‹†ä¸Šå±‚ã€‚ä¸Šå±‚æ»¡æ—¶ï¼Œæ‰æ‹†æœ¬å±‚ã€‚æ‹†åˆ†åä»è¦æ»¡è¶³è§„åˆ™</p>
</li>
</ul>
<h4 id="2-3-4-æ ‘ï¼š">2-3-4 æ ‘ï¼š</h4>
<p>è¿˜ä¸æ˜¯ä¸€æ ·ï¼Ÿ</p>
<h3 id="14-2-2-B-æ ‘">14.2.2 B æ ‘</h3>
<p>B æ ‘ï¼ˆb-treeï¼Œbalance treeï¼‰ã€‚2-3 æ ‘ä¸ 2-3-4 æ ‘éƒ½æ˜¯ B æ ‘çš„ç§ç±»ã€‚</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">30</span>, <span class="number">60</span></span><br><span class="line"><span class="symbol">P1</span> - <span class="built_in">P2</span> - <span class="built_in">P3</span></span><br><span class="line"><span class="number">10</span>, <span class="number">20</span></span><br><span class="line"><span class="symbol">P1</span> - <span class="built_in">P2</span> - <span class="built_in">P3</span></span><br><span class="line"><span class="number">40</span>, <span class="number">50</span></span><br><span class="line">. - <span class="built_in">P2</span> - <span class="built_in">P3</span></span><br><span class="line"><span class="number">70</span>, <span class="number">80</span></span><br><span class="line"><span class="symbol">P1</span> - <span class="built_in">P2</span> - <span class="built_in">P3</span></span><br><span class="line"><span class="number">3</span>, <span class="number">6</span></span><br><span class="line"><span class="number">12</span>, <span class="number">13</span></span><br><span class="line"><span class="number">23</span>, <span class="number">24</span></span><br><span class="line"></span><br><span class="line"><span class="number">41</span>, <span class="number">48</span></span><br><span class="line"><span class="number">55</span>, <span class="number">57</span></span><br><span class="line"><span class="number">61</span>, <span class="number">62</span></span><br><span class="line"><span class="number">73</span>, <span class="number">74</span></span><br><span class="line"><span class="number">84</span>, <span class="number">86</span></span><br></pre></td></tr></table></figure>
<p>B æ ‘å…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>
<p>æ ‘æ ‘æˆ‘å•Šï¼Œæ‰€æœ‰å¶èŠ‚ç‚¹éƒ½åœ¨åŒä¸€å±‚å‘¢ã€‚</p>
</li>
<li>
<p>æœç´¢æ—¶ï¼Œä»æ ¹èŠ‚ç‚¹èµ·ï¼Œå¯¹å½“å‰èŠ‚ç‚¹å†…çš„å…³é”®å­—ï¼ˆæœ‰åºï¼‰è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ã€‚</p>
<p>å‘½ä¸­åˆ™ç»“æŸã€‚å¦åˆ™ï¼Œè¿›å…¥é‚£ä¸ªå¯¹åº”èŒƒå›´çš„å­èŠ‚ç‚¹ã€‚é‚£ä¸ªå‘½ä¸­å¯èƒ½å‘ç”Ÿåœ¨å¶èŠ‚ç‚¹ï¼Œä¹Ÿå¯èƒ½åœ¨éå¶èŠ‚ç‚¹ã€‚</p>
<p>å¦‚æœå½“å‰èŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™è¡¨ç¤ºæ²¡æœ‰æ‰¾åˆ°ã€‚</p>
</li>
<li>
<p>B æ ‘çš„å…³é”®å­—é›†åˆåˆ†å¸ƒåœ¨æ•´æ£µæ ‘ä¸­ï¼Œéå¶èŠ‚ç‚¹å’Œå¶èŠ‚ç‚¹éƒ½å­˜æ”¾æ•°æ®</p>
</li>
<li>
<p>B æ ‘çš„æœç´¢æ€§èƒ½ç­‰ä»·äºåœ¨å…³é”®å­—å…¨é›†å†…è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾</p>
</li>
</ul>
<h4 id="B-æ ‘ï¼š">B+ æ ‘ï¼š</h4>
<p>B+ æ ‘æ˜¯ B æ ‘çš„å˜ä½“ã€‚</p>
<p>ä½¿ç”¨é“¾è¡¨å­˜å‚¨æ•°æ®æ—¶ï¼ŒæŸ¥æ‰¾æ•°æ®ç¼“æ…¢ã€‚å› æ­¤å°†é“¾è¡¨æ•°æ®åˆ†ä¸ºè‹¥å¹²æ®µï¼Œå°†æ¯æ®µçš„ç´¢å¼•èŠ‚ç‚¹ä¿å­˜ä¸ºæ ‘ã€‚</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">æ•°æ®é“¾è¡¨</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="number">12</span></span><br><span class="line"><span class="number">13</span></span><br><span class="line"><span class="number">17</span></span><br><span class="line"><span class="number">23</span></span><br><span class="line"><span class="number">24</span></span><br><span class="line"><span class="number">25</span></span><br><span class="line"><span class="number">32</span></span><br><span class="line"><span class="number">38</span></span><br><span class="line"><span class="number">39</span></span><br><span class="line"><span class="number">40</span></span><br><span class="line"><span class="number">41</span></span><br><span class="line"><span class="number">48</span></span><br><span class="line"><span class="number">52</span></span><br><span class="line"><span class="number">55</span></span><br><span class="line"><span class="number">57</span></span><br><span class="line"><span class="number">61</span></span><br><span class="line"><span class="number">62</span></span><br><span class="line"><span class="number">66</span></span><br><span class="line"><span class="number">73</span></span><br><span class="line"><span class="number">74</span></span><br><span class="line"><span class="number">79</span></span><br><span class="line"><span class="number">84</span></span><br><span class="line"><span class="number">86</span></span><br><span class="line"><span class="number">87</span></span><br><span class="line"><span class="number">0</span>, <span class="number">32</span>, <span class="number">61</span></span><br><span class="line"><span class="selector-tag">A</span> - <span class="selector-tag">B</span> - C</span><br><span class="line"><span class="number">0</span>, <span class="number">12</span>, <span class="number">23</span></span><br><span class="line"><span class="selector-tag">A</span> - <span class="selector-tag">B</span> - C</span><br><span class="line"><span class="number">32</span>, <span class="number">40</span>, <span class="number">52</span></span><br><span class="line"><span class="selector-tag">A</span> - <span class="selector-tag">B</span> - C</span><br><span class="line"><span class="number">61</span>, <span class="number">73</span>, <span class="number">84</span></span><br><span class="line"><span class="selector-tag">A</span> - <span class="selector-tag">B</span> - C</span><br></pre></td></tr></table></figure>
<p>B+ æ ‘å…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>
<p>B+ æ ‘çš„å…³é”®å­—éƒ½å‡ºç°åœ¨å¶èŠ‚ç‚¹çš„é“¾è¡¨ä¸­ï¼Œé“¾è¡¨ä¸­æ•°æ®æ˜¯æœ‰åºçš„ã€‚</p>
<p>éå¶èŠ‚ç‚¹åªç›¸å½“äºå¶èŠ‚ç‚¹çš„ç´¢å¼•ï¼ˆç¨€ç–ç´¢å¼•ï¼‰ï¼Œå¶èŠ‚ç‚¹ç›¸å½“äºæ˜¯å­˜å‚¨æ•°æ®çš„æ•°æ®å±‚ï¼ˆç¨ å¯†ç´¢å¼•ï¼‰ã€‚</p>
</li>
<li>
<p>B+ æ ‘çš„å‘½ä¸­åªå¯èƒ½å‘ç”Ÿåœ¨å¶èŠ‚ç‚¹ã€‚</p>
</li>
<li>
<p>B+ æ ‘çš„æœç´¢æ€§èƒ½ä¹Ÿç­‰ä»·äºåœ¨å…³é”®å­—å…¨é›†å†…è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾</p>
</li>
<li>
<p>B+ æ ‘æ›´é€‚åˆæ–‡ä»¶ç´¢å¼•ç³»ç»Ÿ</p>
</li>
</ul>
<h4 id="B-æ ‘ï¼š-2">B* æ ‘ï¼š</h4>
<p>B* æ ‘æ˜¯ B+ æ ‘çš„å˜ä½“ï¼Œå…¶åœ¨éæ ¹ã€éå¶èŠ‚ç‚¹é—´åŠ å…¥äº†å…„å¼ŸæŒ‡é’ˆã€‚</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">ç´¢å¼•ç›¸è¿</span><br><span class="line">æ•°æ®é“¾è¡¨</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">0</span>, <span class="number">12</span>, <span class="number">23</span></span><br><span class="line"><span class="selector-tag">A</span> - <span class="selector-tag">B</span> - C</span><br><span class="line"><span class="number">32</span>, <span class="number">40</span>, <span class="number">52</span></span><br><span class="line"><span class="selector-tag">A</span> - <span class="selector-tag">B</span> - C</span><br><span class="line"><span class="number">61</span>, <span class="number">73</span>, <span class="number">84</span></span><br><span class="line"><span class="selector-tag">A</span> - <span class="selector-tag">B</span> - C</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="number">12</span></span><br><span class="line"><span class="number">13</span></span><br><span class="line"><span class="number">17</span></span><br><span class="line"><span class="number">23</span></span><br><span class="line"><span class="number">24</span></span><br><span class="line"><span class="number">25</span></span><br><span class="line"><span class="number">32</span></span><br><span class="line"><span class="number">38</span></span><br><span class="line"><span class="number">39</span></span><br><span class="line"><span class="number">40</span></span><br><span class="line"><span class="number">41</span></span><br><span class="line"><span class="number">48</span></span><br><span class="line"><span class="number">52</span></span><br><span class="line"><span class="number">55</span></span><br><span class="line"><span class="number">57</span></span><br><span class="line"><span class="number">61</span></span><br><span class="line"><span class="number">62</span></span><br><span class="line"><span class="number">66</span></span><br><span class="line"><span class="number">73</span></span><br><span class="line"><span class="number">74</span></span><br><span class="line"><span class="number">79</span></span><br><span class="line"><span class="number">84</span></span><br><span class="line"><span class="number">86</span></span><br><span class="line"><span class="number">87</span></span><br><span class="line"><span class="number">0</span>, <span class="number">32</span>, <span class="number">61</span></span><br><span class="line"><span class="selector-tag">A</span> - <span class="selector-tag">B</span> - C</span><br></pre></td></tr></table></figure>
<p>B* æ ‘å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>B* æ ‘å®šä¹‰äº†éå¶å­èŠ‚ç‚¹å…³é”®å­—ä¸ªæ•°è‡³å°‘ä¸º (2 / 3) * Mã€‚å…¶å—çš„æœ€ä½ä½¿ç”¨ç‡ä¸º 2 / 3ï¼Œè€Œ B+ æ ‘æœ€ä½ä½¿ç”¨ç‡ä¸º 1 / 2</li>
<li>B* æ ‘åˆ†é…æ–°èŠ‚ç‚¹çš„æ¦‚ç‡æ›´ä½ï¼Œç©ºé—´ä½¿ç”¨ç‡æ›´é«˜</li>
</ul>
<h3 id="14-2-3-å‰ç¼€æ ‘">14.2.3 å‰ç¼€æ ‘</h3>
<p>å‰ç¼€æ ‘ï¼ˆå­—å…¸æ ‘ã€å•è¯æŸ¥æ‰¾æ ‘ã€é”®æ ‘ï¼‰ï¼Œæ˜¯ä¸€ç§å¤šè·¯æŸ¥æ‰¾æ ‘ã€‚åˆ©ç”¨å…ƒç´ çš„å…¬å…±å‰ç¼€æ¥å‡å°‘æŸ¥è¯¢æ—¶é—´ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå­˜å‚¨äº†æ•°ä¸ªå•è¯ï¼ˆaã€actã€artã€catã€canã€cantã€roinï¼‰çš„å‰ç¼€æ ‘ï¼š</p>
<figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">a</span><br><span class="line">c</span><br><span class="line">r</span><br><span class="line">c</span><br><span class="line">r</span><br><span class="line"><span class="built_in">t</span></span><br><span class="line"><span class="built_in">t</span></span><br><span class="line">a</span><br><span class="line"><span class="built_in">t</span></span><br><span class="line"><span class="built_in">n</span></span><br><span class="line"><span class="built_in">t</span></span><br><span class="line">o</span><br><span class="line">i</span><br><span class="line"><span class="built_in">n</span></span><br></pre></td></tr></table></figure>
<p>å‰ç¼€æ ‘å…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>
<p>æ ¹èŠ‚ç‚¹ä¸åŒ…å«å­—ç¬¦ï¼Œé™¤æ ¹èŠ‚ç‚¹å¤–æ¯ä¸€ä¸ªèŠ‚ç‚¹åŒ…å«ä¸€ä¸ªå­—ç¬¦ã€‚</p>
</li>
<li>
<p>èŠ‚ç‚¹çš„è·¯å¾„å³ä¸ºä¸€æ¡å­˜å‚¨å­—ç¬¦ä¸²ã€‚ç‰¹åˆ«çš„ï¼Œæ ¹èŠ‚ç‚¹è¡¨ç¤ºç©ºå­—ç¬¦ä¸²</p>
<p>æ¯ä¸ªèŠ‚ç‚¹æŒæœ‰ä¸€ä¸ªè®¡æ•°å™¨ï¼Œè®¡ç®—è¯¥èŠ‚ç‚¹å¤„å­˜å‚¨çš„å­—ç¬¦ä¸²æ•°é‡ã€‚</p>
</li>
<li>
<p>æ‰€æœ‰çš„å­èŠ‚ç‚¹éƒ½ä¸çˆ¶èŠ‚ç‚¹å…·æœ‰ç›¸åŒå‰ç¼€ã€‚</p>
</li>
<li>
<p>åœ¨å‰ç¼€æ ‘ä¸­ï¼ŒæŸ¥è¯¢å­—ç¬¦ä¸²çš„æ—¶é—´å¤æ‚åº¦ä¸º O(L)ï¼Œå…¶ä¸­ L ä¸ºå­—ç¬¦ä¸²é•¿åº¦</p>
</li>
</ul>
<p><strong>å®ç°å‰ç¼€æ ‘ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">TrimTree</span> &#123;</span><br><span class="line">    <span class="comment">/* èŠ‚ç‚¹ç±» */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">        Map&lt;Character, Node&gt; next = <span class="literal">null</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        Node() &#123;</span><br><span class="line">            <span class="built_in">this</span>.next = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">            <span class="built_in">this</span>.count = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Node</span> <span class="variable">root</span> <span class="operator">=</span> <span class="literal">null</span>;		<span class="comment">// æ ¹èŠ‚ç‚¹</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* æ„é€ å™¨ */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TrimTree</span><span class="params">(String... strings)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.root = <span class="keyword">new</span> <span class="title class_">Node</span>();</span><br><span class="line">        <span class="keyword">for</span> (String s : strings) add(s);</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">/* æ·»åŠ å­—ç¬¦ä¸² */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(String s)</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">p</span> <span class="operator">=</span> root;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">char</span> c : s.toCharArray()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!p.next.containsKey(c)) p.next.put(c, <span class="keyword">new</span> <span class="title class_">Node</span>());</span><br><span class="line">            p = p.next.get(c);</span><br><span class="line">        &#125;</span><br><span class="line">        p.count++;</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">/* æŸ¥æ‰¾å­—ç¬¦ä¸² */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">search</span><span class="params">(String s)</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">p</span> <span class="operator">=</span> root;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">char</span> c : s.toCharArray()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!p.next.containsKey(c)) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            p = p.next.get(c);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> p.count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="14-3-å›¾">14.3 å›¾</h2>
<blockquote>
<p>çº¿æ€§è¡¨å±€é™äºä¸€ä¸ªç›´æ¥å‰é©±å’Œä¸€ä¸ªç›´æ¥åç»§çš„å…³ç³»ã€‚</p>
<p>æ ‘å¯èƒ½æœ‰æ•°ä¸ªç›´æ¥åç»§ï¼Œä½†åªèƒ½æœ‰ä¸€ä¸ªç›´æ¥å‰é©±ï¼ˆçˆ¶èŠ‚ç‚¹ï¼‰</p>
<p>å½“éœ€è¦è¡¨ç¤ºå¤šå¯¹å¤šå…³ç³»æ—¶ï¼Œå°±éœ€è¦ <strong>å›¾</strong></p>
</blockquote>
<p>å›¾æ˜¯ä¸€ç§æ•°æ®ç»“æ„ã€‚æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥æœ‰é›¶ä¸ªæˆ–å¤šä¸ªç›¸é‚»å…ƒç´ ã€‚</p>
<p>ä¸¤ä¸ªèŠ‚ç‚¹é—´çš„è¿æ¥ç§°ä¸º <strong>è¾¹ï¼ˆedgeï¼‰</strong>ï¼ŒèŠ‚ç‚¹ä¹Ÿè¢«ç§°ä¸º <strong>é¡¶ç‚¹ï¼ˆvertexï¼‰</strong></p>
<p>å›¾çš„åˆ†ç±»ï¼š</p>
<ul>
<li>æŒ‰ç…§ é¡¶ç‚¹é—´çš„è¿æ¥æœ‰æ— æ–¹å‘ åˆ†ä¸ºï¼šæœ‰å‘å›¾ã€æ— å‘å›¾</li>
<li>æŒ‰ç…§ æ˜¯å¦å¸¦æƒ åˆ†ä¸ºï¼šå¸¦æƒå›¾ï¼ˆç½‘ï¼‰ã€éå¸¦æƒå›¾</li>
<li>æŒ‰ç…§ è¡¨ç¤ºæ–¹å¼ åˆ†ä¸ºï¼šäºŒç»´æ•°ç»„è¡¨ç¤ºï¼ˆé‚»æ¥çŸ©é˜µï¼‰ã€é“¾è¡¨è¡¨ç¤ºï¼ˆé‚»æ¥è¡¨ï¼‰</li>
</ul>
<h4 id="å›¾çš„è¡¨ç¤ºæ–¹å¼ï¼š">å›¾çš„è¡¨ç¤ºæ–¹å¼ï¼š</h4>
<p>ä¸€ç»„è¿æ¥çš„èŠ‚ç‚¹ï¼š</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">0</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td></tr></table></figure>
<p><strong>é‚»æ¥çŸ©é˜µï¼š</strong></p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">   <span class="attribute">0</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span></span><br><span class="line"><span class="attribute">0</span> â”Œ<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>â”</span><br><span class="line"><span class="attribute">1</span> |<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>|</span><br><span class="line"><span class="attribute">2</span> |<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>|</span><br><span class="line"><span class="attribute">3</span> |<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>|</span><br><span class="line"><span class="attribute">4</span> â””<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>â”˜-</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œ(0, 1) == 1 è¡¨ç¤º èŠ‚ç‚¹ 0 ä¸ èŠ‚ç‚¹ 1 ç›¸è¿</p>
<p>é‚»æ¥çŸ©é˜µä¸ºæ¯ä¸ªé¡¶ç‚¹éƒ½åˆ†é…äº† n ä¸ªè¾¹çš„ç©ºé—´ã€‚è¿™æ ·ï¼Œé€ æˆäº†ç©ºé—´çš„æŸå¤±</p>
<p><strong>é‚»æ¥è¡¨ï¼š</strong></p>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">0 </span>[<span class="number">1</span>]â†’[<span class="number">2</span>]â†’[<span class="number">3</span>]â†’[<span class="number">4</span>]â†’</span><br><span class="line"><span class="symbol">1 </span>[<span class="number">0</span>]â†’[<span class="number">2</span>]â†’</span><br><span class="line"><span class="symbol">2 </span>[<span class="number">0</span>]â†’[<span class="number">1</span>]â†’</span><br><span class="line"><span class="symbol">3 </span>[<span class="number">0</span>]â†’</span><br><span class="line"><span class="symbol">4 </span>[<span class="number">0</span>]â†’-</span><br></pre></td></tr></table></figure>
<p>é‚»æ¥è¡¨ä¸ºæ¯ä¸ªèŠ‚ç‚¹åˆ›å»ºä¸€ä¸ªé“¾è¡¨ï¼Œé“¾è¡¨ä¸­æ˜¯ä¸å…¶ç›¸è¿çš„èŠ‚ç‚¹ã€‚é‚»æ¥è¡¨ç”± æ•°ç»„ + é“¾è¡¨ ç»„æˆ</p>
<p>é‚»æ¥è¡¨åªå…³å¿ƒå­˜åœ¨çš„è¾¹ï¼Œä¸å…³å¿ƒä¸å­˜åœ¨çš„è¾¹ï¼Œå› æ­¤æ²¡æœ‰ç©ºé—´æµªè´¹</p>
<h3 id="14-3-1-æ·±åº¦ä¼˜å…ˆæœç´¢-DFS">14.3.1 æ·±åº¦ä¼˜å…ˆæœç´¢ DFS</h3>
<p>æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDepth First Searchï¼‰ï¼Œå…¶ç­–ç•¥æ˜¯ä¼˜å…ˆçºµå‘æŒ–æ˜æ·±å…¥ï¼Œè€Œä¸æ˜¯å¯¹ä¸€ä¸ªèŠ‚ç‚¹çš„æ‰€æœ‰èŠ‚ç‚¹å…ˆè¿›è¡Œæ¨ªå‘è®¿é—®ã€‚</p>
<p>ä»åˆå§‹è®¿é—®èŠ‚ç‚¹å‡ºå‘ï¼Œé¦–å…ˆè®¿é—®å…¶ç¬¬ä¸€ä¸ªç›¸é‚»èŠ‚ç‚¹ã€‚ä¹‹åï¼Œä»é‚£ä¸ªè®¿é—®èŠ‚ç‚¹å‡ºå‘ï¼Œé€’å½’è®¿é—®ç¬¬ä¸€ä¸ªç›¸é‚»èŠ‚ç‚¹ã€‚ç›´åˆ°ä¸€ä¸ªèŠ‚ç‚¹çš„è·¯å¾„å®Œå…¨è®¿é—®ç»“æŸåï¼Œæ‰è®¿é—®ç¬¬äºŒä¸ªèŠ‚ç‚¹ã€‚</p>
<h4 id="æ­¥éª¤ï¼š">æ­¥éª¤ï¼š</h4>
<ul>
<li>è®¿é—®åˆå§‹èŠ‚ç‚¹ sï¼Œæ ‡è®°å…¶ä¸ºå·²è®¿é—®</li>
<li>ä» s çš„ç¬¬ä¸€ä¸ªç›¸é‚»èŠ‚ç‚¹èµ·ï¼Œä»¥é€’å½’æ–¹å¼å¯¹å…¶è¿›è¡Œæ·±åº¦ä¼˜å…ˆæœç´¢ã€‚</li>
<li>å½“å‰èŠ‚ç‚¹æ²¡æœ‰å¯è®¿é—®çš„ç›¸é‚»èŠ‚ç‚¹æ—¶ï¼Œå°±å®Œæˆäº†å¯¹ä¸€æ¡è·¯å¾„è®¿é—®ã€‚æ­¤æ—¶æ‰è¿”å›ä¸Šä¸€çº§ï¼Œç»§ç»­æœç´¢ä¸‹ä¸€èŠ‚ç‚¹ã€‚</li>
</ul>
<h3 id="14-3-2-å¹¿åº¦ä¼˜å…ˆæœç´¢-BFS">14.3.2 å¹¿åº¦ä¼˜å…ˆæœç´¢ BFS</h3>
<p>å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBroad First Searchï¼‰ï¼Œå…¶ç­–ç•¥æ˜¯ä¼˜å…ˆæ¨ªå‘è®¿é—®æ‰€æœ‰ç›¸é‚»èŠ‚ç‚¹ï¼Œè€Œä¸æ˜¯å¯¹ä¸€æ¡è·¯å¾„è¿›è¡Œçºµå‘æŒ–æ˜ã€‚</p>
<p>ä»åˆå§‹è®¿é—®èŠ‚ç‚¹å‡ºå‘ï¼Œè®°å½•æ‰€æœ‰ç›¸é‚»èŠ‚ç‚¹ã€‚ä¹‹åï¼Œè®¿é—®å…ˆå‰è®°å½•èŠ‚ç‚¹ï¼Œå¹¶è®°å½•æ‰€æœ‰ç›¸é‚»èŠ‚ç‚¹ã€‚ç›´åˆ°æ²¡æœ‰èƒ½è®¿é—®çš„èŠ‚ç‚¹ä¸ºæ­¢ï¼Œå°±å®Œæˆäº†å¯¹æ‰€æœ‰è¿æ¥èŠ‚ç‚¹çš„æœç´¢ã€‚</p>
<h4 id="æ­¥éª¤ï¼š-2">æ­¥éª¤ï¼š</h4>
<ul>
<li>è®°å½•åˆå§‹èŠ‚ç‚¹ s</li>
<li>è®¿é—®ä¸Šä¸€æ¬¡è®°å½•çš„èŠ‚ç‚¹ï¼Œå°†å…¶æ ‡è®°ä¸ºå·²è®¿é—®ã€‚å°†é‚£äº›èŠ‚ç‚¹çš„æ‰€æœ‰å¯è®¿é—®çš„ç›¸é‚»èŠ‚ç‚¹è®°å½•ã€‚</li>
<li>é‡å¤ä¸Šä¸€æ­¥ï¼Œç›´åˆ°æ²¡æœ‰å¯è®¿é—®çš„èŠ‚ç‚¹æ—¶ï¼Œå°±å®Œæˆäº†å¯¹æ‰€æœ‰è¿æ¥èŠ‚ç‚¹çš„è®¿é—®ã€‚</li>
</ul>
<h2 id="é™„å½•">é™„å½•</h2>
<h3 id="F1-å®ç°èµ«å¤«æ›¼ç¼–ç -è§£ç ">F1 å®ç°èµ«å¤«æ›¼ç¼–ç /è§£ç </h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* å‹ç¼©æ•°æ®åŒ… */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DataBox</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">byte</span>[] data;				<span class="comment">// å‹ç¼©ä¿¡æ¯ä¸»ä½“</span></span><br><span class="line">    <span class="keyword">public</span> Map&lt;Byte, String&gt; key;	<span class="comment">// èµ«å¤«æ›¼è¡¨</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> step;				<span class="comment">// è¡¥ä½æ•°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Huff</span> &#123;</span><br><span class="line">    <span class="comment">/* å°†æ•°æ®å‹ç¼©ï¼Œè¿”å›ä¸€ä¸ªå‹ç¼©åŒ… */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> DataBox <span class="title function_">huff</span><span class="params">(<span class="type">byte</span>[] data)</span> &#123;</span><br><span class="line">        <span class="type">DataBox</span> <span class="variable">dataBox</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DataBox</span>();</span><br><span class="line">        dataBox.key = getHuffMap(data);						<span class="comment">// åœ¨å‹ç¼©åŒ…å†…è®°å½•ç¼–ç è¡¨</span></span><br><span class="line">        dataBox.data = toHuff(data, dataBox);				<span class="comment">// åœ¨å‹ç¼©åŒ…å†…è®°å½•å‹ç¼©åæ•°æ®ï¼Œä¹Ÿä¼šè®°å½•è¡¥ä½æ•°</span></span><br><span class="line">        <span class="keyword">return</span> dataBox;</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">/* æ ¹æ®è¦å‹ç¼©çš„æ•°æ®ï¼Œè®¡ç®—é‚£ä¸ªèµ«å¤«æ›¼è¡¨ */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;Byte, String&gt; <span class="title function_">getHuffMap</span><span class="params">(<span class="type">byte</span>[] val)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (val == <span class="literal">null</span> || val.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        Map&lt;Byte, Node&gt; huff = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">byte</span> c : val) &#123;								<span class="comment">// è®°å½•æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°</span></span><br><span class="line">            <span class="keyword">if</span> (huff.containsKey(c)) huff.get(c).times++;</span><br><span class="line">            <span class="keyword">else</span> huff.put(c, <span class="keyword">new</span> <span class="title class_">Node</span>(c, <span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        PriorityQueue&lt;Node&gt; pq = <span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;(huff.values());</span><br><span class="line">        <span class="keyword">while</span> (pq.size() &gt; <span class="number">1</span>) &#123;								<span class="comment">// ç”Ÿæˆèµ«å¤«æ›¼æ ‘</span></span><br><span class="line">            <span class="type">Node</span> <span class="variable">temp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(pq.remove(), pq.remove());</span><br><span class="line">            pq.add(temp);</span><br><span class="line">        &#125;</span><br><span class="line">        Map&lt;Byte, String&gt; ret = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        update(ret, pq.remove(), <span class="string">&quot;&quot;</span>);						<span class="comment">// æ ¹æ®é‚£ä¸ªèµ«å¤«æ›¼æ ‘ï¼Œç”Ÿæˆèµ«å¤«æ›¼ç¼–ç </span></span><br><span class="line">        <span class="keyword">if</span> (ret.size() == <span class="number">1</span>) ret.put(val[<span class="number">0</span>], <span class="string">&quot;0&quot;</span>);			<span class="comment">// ç‰¹åˆ«åœ°ï¼Œåªæœ‰å”¯ä¸€å­—ç¬¦ä»åœºåˆè¿™æ ·å¤„ç†</span></span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">/* æ ¹æ®èµ«å¤«æ›¼è¡¨ï¼Œå°†æ•°æ®å‹ç¼© */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">byte</span>[] toHuff(<span class="type">byte</span>[] val, DataBox d) &#123;</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">byte</span> c : val) &#123;								<span class="comment">// å¾—åˆ°å‹ç¼©åçš„ bit å­—ç¬¦ä¸²</span></span><br><span class="line">            sb.append(d.key.get(c));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">byte</span>[] ret = <span class="keyword">new</span> <span class="title class_">byte</span>[(sb.length() + <span class="number">7</span>) / <span class="number">8</span>];		<span class="comment">// å‹ç¼©åçš„æ•°æ®æ”¾åœ¨ byte æ•°ç»„ä¸­</span></span><br><span class="line">        d.step = sb.length() % <span class="number">8</span>;							<span class="comment">// è®°å½•é‚£ä¸ªè¡¥ä½æ•°</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; ret.length; i ++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &gt;= ret.length - <span class="number">1</span> &amp;&amp; d.step != <span class="number">0</span>) &#123;		<span class="comment">// æœ€åä¸€ä½å¯èƒ½æœ‰è¡¥ä½ã€‚é‚£ä¸ªåœºåˆï¼Œè®©æœ‰æ•ˆæ•°å­—åœ¨æœ€å·¦ä¾§</span></span><br><span class="line">                ret[i] = (<span class="type">byte</span>) (Integer.parseInt(sb.substring(<span class="number">8</span> * i), <span class="number">2</span>) &lt;&lt; (<span class="number">8</span> - d.step));</span><br><span class="line">            &#125; <span class="keyword">else</span> ret[i] = (<span class="type">byte</span>) Integer.parseInt(sb.substring(<span class="number">8</span> * i, <span class="number">8</span> * i + <span class="number">8</span>), <span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">/* è¯¥æ–¹æ³•èƒ½éå†èµ«å¤«æ›¼æ ‘ï¼Œä»¥è·å–èµ«å¤«æ›¼è¡¨ */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Map&lt;Byte, String&gt; ss, Node root, String s)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (root.right == <span class="literal">null</span> &amp;&amp; root.left == <span class="literal">null</span>) &#123;</span><br><span class="line">            ss.put(root.val, s);									<span class="comment">// æ˜¯å¶èŠ‚ç‚¹çš„åœºåˆï¼Œè®°å½•è¿™ä¸ªç¼–ç å€¼</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (root.left != <span class="literal">null</span>) update(ss, root.left, s + <span class="string">&quot;0&quot;</span>);		<span class="comment">// å‘å·¦è·¯å¾„è®°ä¸º 0</span></span><br><span class="line">        <span class="keyword">if</span> (root.right != <span class="literal">null</span>) update(ss, root.right, s + <span class="string">&quot;1&quot;</span>);	<span class="comment">// å‘å³è·¯å¾„è®°ä¸º 1</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* è§£å‹å‹ç¼©åŒ… */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">byte</span>[] antiHuff(DataBox d) &#123;</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; d.data.length; i++) &#123;					<span class="comment">// è·å–é‚£ä¸ªå‹ç¼©æ•°æ®çš„ç¼–ç </span></span><br><span class="line">            <span class="type">String</span> <span class="variable">temp</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">if</span> (i &gt;= d.data.length - <span class="number">1</span> &amp;&amp; d.step != <span class="number">0</span>) sb.append((temp = Integer.toBinaryString(d.data[i] | <span class="number">256</span>)), temp.length() - <span class="number">8</span>, temp.length() - <span class="number">8</span> + d.step);				<span class="comment">// éå†åˆ°æœ€åï¼Œè¦å¤„ç†é‚£ä¸ªè¡¥ä½</span></span><br><span class="line">            <span class="keyword">else</span> sb.append((temp = Integer.toBinaryString(d.data[i] | <span class="number">256</span>)).substring(temp.length() - <span class="number">8</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        Map&lt;String, Byte&gt; anti = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (Byte aByte : d.key.keySet()) &#123;							<span class="comment">// å°†ç¼–ç è¡¨è½¬åŒ–ä¸ºè§£ç è¡¨</span></span><br><span class="line">            anti.put(d.key.get(aByte), aByte);</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;Byte&gt; ret = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; sb.length(); i++) &#123;						<span class="comment">// æŒ‰ç…§è§£ç è¡¨ï¼ŒæŠŠå‹ç¼©ç¼–ç è½¬åŒ–ä¸ºæœªè§£å‹ç¼–ç </span></span><br><span class="line">            s.append(sb.charAt(i));</span><br><span class="line">            <span class="keyword">if</span> (anti.containsKey(s.toString())) &#123;</span><br><span class="line">                ret.add(anti.get(s.toString()));</span><br><span class="line">                s = <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">byte</span>[] bt = <span class="keyword">new</span> <span class="title class_">byte</span>[ret.size()];							<span class="comment">// å°† Byte æ•°ç»„è½¬åŒ–ä¸º byte æ•°ç»„</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; bt.length; i++) &#123;</span><br><span class="line">            bt[i] = ret.get(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> bt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/* èŠ‚ç‚¹ç±»ï¼Œæ˜¯æ„å»ºèµ«å¤«æ›¼æ ‘æ—¶ç”¨åˆ°çš„ç±» */</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&lt;Node&gt; &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="type">byte</span> val;			<span class="comment">// ä»£è¡¨çš„ byte å€¼</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> times;			<span class="comment">// å‡ºç°çš„æ¬¡æ•°</span></span><br><span class="line">        <span class="keyword">public</span> Node left;</span><br><span class="line">        <span class="keyword">public</span> Node right;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(Node l, Node r)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.left = l;</span><br><span class="line">            <span class="built_in">this</span>.right = r;</span><br><span class="line">            <span class="built_in">this</span>.times = l.times + r.times;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(<span class="type">byte</span> val, <span class="type">int</span> pow)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.val = val;</span><br><span class="line">            <span class="built_in">this</span>.times = pow;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(<span class="type">byte</span> val)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.val = val;</span><br><span class="line">            <span class="built_in">this</span>.times = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(Node o)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.times - o.times;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="F2-å®ç°å¹³è¡¡äºŒå‰æ ‘">F2 å®ç°å¹³è¡¡äºŒå‰æ ‘</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">AVL</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">Node</span> <span class="variable">root</span> <span class="operator">=</span> <span class="literal">null</span>;				<span class="comment">// æ ¹èŠ‚ç‚¹</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* æ·»åŠ ä¸€ä¸ªå€¼ï¼ˆæ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹ï¼‰</span></span><br><span class="line"><span class="comment">    	valï¼šè¦æ·»åŠ çš„å€¼ */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> val)</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">toAdd</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(val);</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) root = toAdd;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">Node</span> <span class="variable">par</span> <span class="operator">=</span> root;</span><br><span class="line">            <span class="type">Node</span> <span class="variable">temp</span> <span class="operator">=</span> root;</span><br><span class="line">            <span class="keyword">while</span> (temp != <span class="literal">null</span>) &#123;			<span class="comment">// ç¡®å®šå…¶æ’å…¥ä½ç½®</span></span><br><span class="line">                par = temp;</span><br><span class="line">                <span class="keyword">if</span> (val &gt; temp.val) &#123;</span><br><span class="line">                    temp = temp.right;</span><br><span class="line">                    toAdd.way = <span class="literal">true</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    temp = temp.left;</span><br><span class="line">                    toAdd.way = <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (toAdd.way) &#123;				<span class="comment">// å°†å…¶æ’å…¥åˆ°æŒ‡å®šä½ç½®</span></span><br><span class="line">                par.right = toAdd;</span><br><span class="line">                par.right.parent = par;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                par.left = toAdd;</span><br><span class="line">                par.left.parent = par;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>) &#123;					<span class="comment">// ç»´æŠ¤è¯¥å¹³è¡¡äºŒå‰æ ‘</span></span><br><span class="line">                par = toAVL(par);</span><br><span class="line">                <span class="keyword">if</span> (par.parent == <span class="literal">null</span>) &#123;</span><br><span class="line">                    root = par;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (par.way) par.parent.right = par;</span><br><span class="line">                    <span class="keyword">else</span> par.parent.left = par;</span><br><span class="line">                    par = par.parent;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">/* ç»´æŠ¤å¹³è¡¡äºŒå‰æ ‘</span></span><br><span class="line"><span class="comment">    	root: å¾…æ£€æŸ¥èŠ‚ç‚¹ */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Node <span class="title function_">toAVL</span><span class="params">(Node root)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">gap</span> <span class="operator">=</span> root.rightHeight() - root.leftHeight();</span><br><span class="line">        <span class="keyword">if</span> (Math.abs(gap) &gt; <span class="number">1</span>) &#123;			<span class="comment">// |gap| &gt; 1 æ—¶ï¼Œéœ€è¦æ—‹è½¬</span></span><br><span class="line">            <span class="keyword">if</span> (gap &gt; <span class="number">0</span>) &#123;					<span class="comment">// gap &gt; 0 éœ€è¦å·¦æ—‹ï¼Œå¦åˆ™å³æ—‹</span></span><br><span class="line">                <span class="keyword">if</span> (root.right.leftHeight() &gt; root.right.rightHeight()) root.right = roll(root.right, <span class="literal">true</span>);</span><br><span class="line">                <span class="keyword">return</span> roll(root, <span class="literal">false</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (root.left.rightHeight() &gt; root.left.leftHeight()) root.left = roll(root.left, <span class="literal">false</span>);</span><br><span class="line">                <span class="keyword">return</span> roll(root, <span class="literal">true</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* å¯¹è¯¥èŠ‚ç‚¹è¿›è¡Œæ—‹è½¬ã€‚</span></span><br><span class="line"><span class="comment">    	rootï¼šå¾…æ—‹è½¬èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">    	dirRï¼štrue çš„åœºåˆå³æ—‹ï¼Œå¦åˆ™å·¦æ—‹ */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Node <span class="title function_">roll</span><span class="params">(Node root, <span class="type">boolean</span> dirR)</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">temp</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (dirR) &#123;</span><br><span class="line">            temp = root.left;</span><br><span class="line">            root.left = temp.right;</span><br><span class="line">            <span class="keyword">if</span> (temp.right != <span class="literal">null</span>) &#123;</span><br><span class="line">                temp.right.way = <span class="literal">false</span>;</span><br><span class="line">                temp.right.parent = root;</span><br><span class="line">            &#125;</span><br><span class="line">            temp.right = root;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            temp = root.right;</span><br><span class="line">            root.right = temp.left;</span><br><span class="line">            <span class="keyword">if</span> (temp.left != <span class="literal">null</span>) &#123;</span><br><span class="line">                temp.left.way = <span class="literal">true</span>;</span><br><span class="line">                temp.left.parent = root;</span><br><span class="line">            &#125;</span><br><span class="line">            temp.left = root;</span><br><span class="line">        &#125;</span><br><span class="line">        temp.way = root.way;</span><br><span class="line">        temp.parent = root.parent;</span><br><span class="line">        root.way = dirR;</span><br><span class="line">        root.parent = temp;</span><br><span class="line">        <span class="keyword">return</span> temp;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* ä¸€ä¸ªå±•ç¤ºæ ‘çš„æ–¹æ³•ã€‚ä¾› debug ç”¨ */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">(Node root)</span> &#123;</span><br><span class="line">        LinkedList&lt;Node&gt; a = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        LinkedList&lt;Node&gt; b = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        a.add(root);</span><br><span class="line">        <span class="keyword">while</span> (!a.isEmpty()) &#123;</span><br><span class="line">            <span class="type">Node</span> <span class="variable">temp</span> <span class="operator">=</span> a.removeFirst();</span><br><span class="line">            System.out.print(temp.val + <span class="string">&quot; &quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (temp.left != <span class="literal">null</span>) b.add(temp.left);</span><br><span class="line">            <span class="keyword">if</span> (temp.right != <span class="literal">null</span>) b.add(temp.right);</span><br><span class="line">            <span class="keyword">if</span> (a.isEmpty()) &#123;</span><br><span class="line">                System.out.println();</span><br><span class="line">                a = b;</span><br><span class="line">                b = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;å…± &quot;</span> + count(root) + <span class="string">&quot; ä¸ªèŠ‚ç‚¹&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* ä¸€ä¸ªæ¸…ç‚¹æ ‘ä¸­èŠ‚ç‚¹çš„æ–¹æ³• */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">count</span><span class="params">(Node root)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span> + count(root.left) + count(root.right);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> val;				<span class="comment">// å€¼</span></span><br><span class="line">        <span class="keyword">public</span> Node left;			<span class="comment">// å·¦èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">public</span> Node right;			<span class="comment">// å³èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">public</span> Node parent;			<span class="comment">// çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">way</span> <span class="operator">=</span> <span class="literal">false</span>;        <span class="comment">// falseï¼šè¯¥èŠ‚ç‚¹æ˜¯å·¦èŠ‚ç‚¹ï¼›trueï¼šæ˜¯å³èŠ‚ç‚¹</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(<span class="type">int</span> val)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.val = val;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">leftHeight</span><span class="params">()</span> &#123;	<span class="comment">// å·¦å­æ ‘é«˜åº¦</span></span><br><span class="line">            <span class="keyword">return</span> (left == <span class="literal">null</span> ? <span class="number">0</span> : left.height());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">rightHeight</span><span class="params">()</span> &#123;	<span class="comment">// å³å­æ ‘é«˜åº¦</span></span><br><span class="line">            <span class="keyword">return</span> (right == <span class="literal">null</span> ? <span class="number">0</span> : right.height());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">height</span><span class="params">()</span> &#123;		<span class="comment">// è¯¥èŠ‚ç‚¹æ ‘é«˜åº¦</span></span><br><span class="line">            <span class="keyword">return</span> Math.max(leftHeight(), rightHeight()) + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>16 å¤šçº¿ç¨‹</h1>
<h2 id="16-1-çº¿ç¨‹çš„æ¦‚å¿µ">16.1 çº¿ç¨‹çš„æ¦‚å¿µ</h2>
<blockquote>
<p>å¯¹äºä¸€èˆ¬ç¨‹åºè€Œè¨€ï¼Œå…¶ç»“æ„å¤§éƒ½å¯ä»¥åˆ†ä¸ºä¸€ä¸ªå…¥å£ã€ä¸€ä¸ªå‡ºå£ã€ä¸€ä¸ªé¡ºæ¬¡æ‰§è¡Œçš„è¯­å¥åºåˆ—ã€‚è¿™æ ·çš„è¯­å¥ç»“æ„ç§°ä¸ºè¿›ç¨‹ï¼Œå®ƒæ˜¯ç¨‹åºçš„ä¸€æ¬¡åŠ¨æ€æ‰§è¡Œï¼Œå¯¹åº”äº†ä»£ç åŠ è½½ã€æ‰§è¡Œè‡³å®Œæ¯•çš„å…¨è¿‡ç¨‹ã€‚</p>
<p>è¿›ç¨‹å³æ˜¯ç¨‹åºåœ¨å¤„ç†æœºä¸­çš„ä¸€æ¬¡è¿è¡Œã€‚åœ¨è¿™æ ·ä¸€ä¸ªç»“æ„ä¸­ä¸ä»…åŒ…å«ç¨‹åºä»£ç ï¼Œä¹ŸåŒ…æ‹¬äº†ç³»ç»Ÿèµ„æºçš„æ¦‚å¿µã€‚</p>
<p>åœ¨å• CPU è®¡ç®—æœºå†…éƒ¨ï¼Œå¾®è§‚ä¸Šè®²ï¼ŒåŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è¿è¡Œã€‚å®ç°å¤šçº¿ç¨‹å³ä»å®è§‚ä¸Šä½¿å¤šä¸ªä½œä¸šåŒæ—¶æ‰§è¡Œã€‚</p>
</blockquote>
<p>ç¨‹åºï¼šä¸ºå®Œæˆç‰¹å®šä»»åŠ¡ï¼Œç”¨æŸç§è¯­è¨€ç¼–å†™çš„ä¸€ç»„æŒ‡ä»¤çš„é›†åˆã€‚</p>
<p>è¿›ç¨‹ï¼šè¿è¡Œä¸­çš„ç¨‹åºã€‚å½“ä½ è¿è¡Œä¸€ä¸ªç¨‹åºï¼Œç³»ç»Ÿå°±ä¼šä¸ºè¯¥è¿›ç¨‹åˆ†é…ç©ºé—´ã€‚è¿›ç¨‹æ˜¯ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹ã€‚æ˜¯ä¸€ä¸ªåŠ¨æ€è¿‡ç¨‹ï¼šæœ‰å…¶è‡ªèº«äº§ç”Ÿã€å­˜åœ¨ã€æ¶ˆäº¡çš„è¿‡ç¨‹ã€‚</p>
<p>çº¿ç¨‹ï¼šç”±è¿›ç¨‹åˆ›å»ºçš„ï¼Œè¿›ç¨‹çš„ä¸€ä¸ªå®ä½“ã€‚ä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ã€‚</p>
<p>å•çº¿ç¨‹ï¼šåŒä¸€æ—¶åˆ»ï¼Œåªå…è®¸æ‰§è¡Œä¸€ä¸ªçº¿ç¨‹ã€‚</p>
<p>å¤šçº¿ç¨‹ï¼šåŒä¸€æ—¶åˆ»ï¼Œå¯ä»¥æ‰§è¡Œå¤šä¸ªçº¿ç¨‹ã€‚</p>
<p>å¹¶å‘ï¼šåŒä¸€æ—¶åˆ»ï¼Œå¤šä¸ªä»»åŠ¡äº¤æ›¿æ‰§è¡Œï¼Œé€ æˆä¸€ç§è²Œä¼¼å¹¶è¡Œçš„çŠ¶æ€ã€‚å•æ ¸ CPU å®ç°çš„å¤šä»»åŠ¡å°±æ˜¯å¹¶å‘ã€‚</p>
<p>å¹¶è¡Œï¼šåŒä¸€æ—¶åˆ»ï¼Œå¤šä¸ªä»»åŠ¡åŒæ—¶è¿›è¡Œã€‚å¤šæ ¸ CPU å¯ä»¥å®ç°å¹¶è¡Œã€‚</p>
<h3 id="16-1-1-çº¿ç¨‹çš„ç»“æ„">16.1.1 çº¿ç¨‹çš„ç»“æ„</h3>
<p>åœ¨ Java ä¸­ï¼Œçº¿ç¨‹ç”±ä»¥ä¸‹ 3 éƒ¨åˆ†ç»„æˆï¼š</p>
<ul>
<li>è™šæ‹Ÿ CPUï¼šå°è£…åœ¨ java.lang.Thread ç±»ä¸­ï¼Œæ§åˆ¶ç€æ•´ä¸ªçº¿ç¨‹çš„è¿è¡Œ</li>
<li>æ‰§è¡Œçš„ä»£ç ï¼šä¼ é€’ç»™ Thread ç±»ï¼Œç”±å…¶æ§åˆ¶æŒ‰åºæ‰§è¡Œ</li>
<li>å¤„ç†çš„æ•°æ®ï¼šä¼ é€’ç»™ Thread ç±»ï¼Œæ˜¯åœ¨ä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­éœ€è¦å¤„ç†çš„æ•°æ®</li>
</ul>
<h3 id="16-1-2-çº¿ç¨‹çš„çŠ¶æ€">16.1.2 çº¿ç¨‹çš„çŠ¶æ€</h3>
<blockquote>
<p>Java çš„çº¿ç¨‹æ˜¯é€šè¿‡åŒ… java.lang ä¸­å®šä¹‰çš„ç±» Thread æ¥å®ç°çš„ã€‚å½“ç”Ÿæˆäº†ä¸€ä¸ª Thread ç±»åå°±äº§ç”Ÿäº†ä¸€ä¸ªçº¿ç¨‹ã€‚é€šè¿‡è¯¥å¯¹è±¡å®ä¾‹ï¼Œå¯ä»¥å¯åŠ¨çº¿ç¨‹ã€ç»ˆæ­¢çº¿ç¨‹ï¼Œæˆ–æš‚æ—¶æŒ‚èµ·çº¿ç¨‹</p>
</blockquote>
<p>çº¿ç¨‹å…±æœ‰ 4 ç§çŠ¶æ€ï¼šæ–°å»ºï¼ˆNewï¼‰ã€å¯è¿è¡Œï¼ˆRunnableï¼‰ã€æ­»äº¡ï¼ˆDeadï¼‰ã€é˜»å¡ï¼ˆBlockedï¼‰</p>
<ul>
<li>
<p><strong>æ–°å»ºï¼ˆNewï¼‰ï¼š</strong></p>
<p>çº¿ç¨‹å¯¹è±¡åˆšåˆšåˆ›å»ºï¼Œè¿˜æœªå¯åŠ¨ï¼ˆNewï¼‰ã€‚æ­¤æ—¶è¿˜å¤„äºä¸å¯è¿è¡ŒçŠ¶æ€ï¼Œä½†å·²æœ‰äº†ç›¸åº”å†…å­˜ç©ºé—´åŠå…¶ä»–èµ„æº</p>
</li>
<li>
<p><strong>å¯è¿è¡Œï¼ˆRunnableï¼‰ï¼š</strong></p>
<p>æ­¤æ—¶çº¿ç¨‹å·²ç»å¯åŠ¨ï¼Œå¤„äºçº¿ç¨‹çš„ <code>run()</code> æ–¹æ³•ä¸­ã€‚è¿™ç§æƒ…å†µä¸‹çº¿ç¨‹å¯èƒ½æ­£åœ¨è¿è¡Œï¼›ä¹Ÿå¯èƒ½æ²¡æœ‰è¿è¡Œï¼Œä½†åªè¦ CPU ç©ºé—²å°±ä¼šç«‹åˆ»è¿è¡Œã€‚</p>
<p>å¯ä»¥è¿è¡Œä½†æ²¡åœ¨è¿è¡Œçš„çº¿ç¨‹éƒ½æ’åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œè¿™ä¸ªé˜Ÿåˆ—ç§°ä¸ºå°±ç»ªé˜Ÿåˆ—ã€‚</p>
<p>å¯è¿è¡ŒçŠ¶æ€ä¸‹ï¼Œè¿è¡Œä¸­çš„çº¿ç¨‹å¤„äºè¿è¡ŒçŠ¶æ€ï¼ˆRunningï¼‰ï¼Œæœªè¿è¡Œçº¿ç¨‹å¤„äºå°±ç»ªçŠ¶æ€ï¼ˆReadyï¼‰ã€‚</p>
<p>è°ƒç”¨ <code>start()</code> æ–¹æ³•å¯ä»¥è®©çº¿ç¨‹è¿›å…¥å¯è¿è¡ŒçŠ¶æ€ã€‚</p>
</li>
<li>
<p><strong>æ­»äº¡ï¼ˆDeadï¼‰ï¼š</strong></p>
<p>çº¿ç¨‹æ­»äº¡ï¼ˆTerminatedï¼‰çš„åŸå› æœ‰ä¸¤ä¸ªï¼šä¸€æ˜¯ <code>run()</code> æ–¹æ³•æœ€åä¸€ä¸ªè¯­å¥æ‰§è¡Œå®Œæ¯•ï¼ŒäºŒæ˜¯çº¿ç¨‹é‡åˆ°å¼‚å¸¸é€€å‡º</p>
</li>
<li>
<p><strong>é˜»å¡ï¼ˆBlockedï¼‰ï¼š</strong></p>
<p>ä¸€ä¸ªæ­£å¸¸è¿è¡Œçš„çº¿ç¨‹å› ä¸ºç‰¹æ®ŠåŸå› è¢«æš‚åœæ‰§è¡Œï¼Œå°±è¿›å…¥é˜»å¡çŠ¶æ€ï¼ˆBlockedï¼‰ã€‚</p>
<p>é˜»å¡æ—¶çº¿ç¨‹ä¸èƒ½è¿›å…¥å°±ç»ªå¯¹æµæ’é˜Ÿï¼Œå¿…é¡»ç­‰åˆ°å¼•èµ·é˜»å¡çš„åŸå› æ¶ˆé™¤ï¼Œæ‰èƒ½é‡æ–°è¿›å…¥é˜Ÿåˆ—æ’é˜Ÿã€‚</p>
<p>å¼•èµ·é˜»å¡çš„æ–¹æ³•å¾ˆå¤šï¼Œ<code>sleep()</code> å’Œ <code>wait()</code> æ˜¯ä¸¤ä¸ªå¸¸ç”¨çš„é˜»å¡æ–¹æ³•</p>
</li>
<li>
<p><strong>ä¸­æ–­çº¿ç¨‹ï¼š</strong></p>
<ul>
<li>
<p><code>void interrupt()</code>ï¼šå‘ä¸€ä¸ªçº¿ç¨‹å‘é€ä¸€ä¸ªä¸­æ–­è¯·æ±‚ï¼Œå¹¶æŠŠè¯¥çº¿ç¨‹çš„ interruptd çŠ¶æ€å˜ä¸º trueã€‚</p>
<p>ä¸­æ–­é˜»å¡çº¿ç¨‹çš„åœºåˆï¼Œä¼šæŠ›å‡º InterruptException å¼‚å¸¸</p>
</li>
<li>
<p><code>static boolean interrupted()</code>ï¼šæ£€æµ‹å½“å‰çº¿ç¨‹æ˜¯å¦è¢«ä¸­æ–­ï¼Œå¹¶é‡ç½®çŠ¶æ€ interrupted çš„å€¼ã€‚</p>
<p>è¿ç»­è°ƒç”¨è¯¥æ–¹æ³•çš„åœºåˆï¼Œç¬¬äºŒæ¬¡è°ƒç”¨ä¼šè¿”å› false</p>
</li>
<li>
<p><code>boolean isInterrupted()</code>ï¼šæ£€æµ‹å½“å‰çº¿ç¨‹æ˜¯å¦ä¸­æ–­ã€‚ä¸æ”¹å˜ interrupted çš„å€¼</p>
</li>
</ul>
</li>
</ul>
<h2 id="16-2-çº¿ç¨‹çš„ä½¿ç”¨">16.2 çº¿ç¨‹çš„ä½¿ç”¨</h2>
<p>åœ¨ Java ä¸­çº¿ç¨‹ä½¿ç”¨æœ‰ä¸¤ç§æ–¹æ³•ï¼š</p>
<ol>
<li>
<p>ç»§æ‰¿ <code>Thread</code> ç±»ï¼Œé‡å†™ <code>run</code> æ–¹æ³•</p>
<blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Thread</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>		<span class="comment">//å¯è§ Thread ä¹Ÿæ˜¯å®ç°äº† Runable æ¥å£</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</blockquote>
</li>
<li>
<p>å®ç° <code>Runable</code> æ¥å£ï¼Œé‡å†™ <code>run</code> æ–¹æ³•</p>
</li>
</ol>
<h3 id="16-2-1-ç»§æ‰¿-Thread-ç±»">16.2.1 ç»§æ‰¿ Thread ç±»</h3>
<blockquote>
<p>Thread ç±»æ˜¯ Java ç”¨äºè¡¨ç¤ºçº¿ç¨‹çš„ç±»ã€‚é‚£ä¹ˆï¼Œä¸€ä¸ªç±»è¢«å®šä¹‰ä¸ºå…¶å­ç±»ï¼Œåˆ™è¯¥ç±»ä¹Ÿèƒ½ç”¨æ¥è¡¨ç¤ºçº¿ç¨‹</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"> <span class="type">Type</span> <span class="variable">type</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Type</span>();</span><br><span class="line"> type.start();								<span class="comment">//å¼€å§‹çº¿ç¨‹</span></span><br><span class="line"> 											<span class="comment">//å¦‚æœç”¨ run æ–¹æ³•ï¼Œåˆ™è¿˜æ˜¯åœç•™åœ¨ä¸»çº¿ç¨‹</span></span><br><span class="line"> 											<span class="comment">//  é‚£æ ·ï¼Œç›¸å½“äº ä¸²è¡Œã€‚æ‰§è¡Œå®Œæ¯•æ‰ç»§ç»­</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Type</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;						<span class="comment">//å…ˆç»§æ‰¿ Thread ç±»</span></span><br><span class="line"> <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">     <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">         System.out.println(i);</span><br><span class="line">         <span class="keyword">try</span> &#123;</span><br><span class="line">             Thread.sleep(<span class="number">100</span>);				<span class="comment">//ä¼‘çœ  100 æ¯«ç§’</span></span><br><span class="line">         &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">             e.printStackTrace();</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">if</span> (i++ == <span class="number">10</span>) &#123;					<span class="comment">//i = 10 æ—¶åœæ­¢å¾ªç¯</span></span><br><span class="line">             <span class="keyword">break</span>;</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>å…³äº <code>start()</code> æ–¹æ³•</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">start</span><span class="params">()</span> &#123;</span><br><span class="line">	...</span><br><span class="line">    start0();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">native</span> <span class="keyword">void</span> <span class="title function_">start0</span><span class="params">()</span>;					<span class="comment">//start0 æ˜¯ nativeã€‚å³ï¼Œåº•å±‚æ–¹æ³•</span></span><br></pre></td></tr></table></figure>
<ol>
<li><code>start()</code> æ–¹æ³•è°ƒç”¨äº†ä¸€ä¸ª <code>start0()</code> åº•å±‚æ–¹æ³•</li>
<li><code>start0()</code> æ˜¯æœ¬åœ°æ–¹æ³•ï¼Œç”± JVM è°ƒç”¨ï¼Œåº•å±‚æ˜¯ c/c++ å®ç°</li>
<li>çœŸæ­£çš„å¤šçº¿ç¨‹æ•ˆæœï¼Œæ˜¯ <code>start0()</code>ï¼Œè€Œä¸æ˜¯ <code>run()</code></li>
<li><code>start()</code> æ–¹æ³•è°ƒç”¨ <code>start0()</code> æ–¹æ³•åï¼Œè¯¥çº¿ç¨‹ä¸ä¸€å®šä¼šç«‹åˆ»æ‰§è¡Œï¼Œåªæ˜¯å°†çº¿ç¨‹å˜æˆäº†å¯è¿è¡ŒçŠ¶æ€ã€‚å…·ä½“ä½•æ—¶è¿è¡Œï¼Œç”± CPU ç»Ÿä¸€è°ƒåº¦</li>
</ol>
<h3 id="16-2-2-å®ç°-Runable-æ¥å£">16.2.2 å®ç° Runable æ¥å£</h3>
<blockquote>
<p>Runnable æ˜¯ Java ç”¨ä»¥å®ç°çº¿ç¨‹çš„æ¥å£ã€‚ä»æ ¹æœ¬ä¸Šå°†ï¼Œä»»ä½•å®ç°çº¿ç¨‹çš„ç±»éƒ½å¿…é¡»å®ç°è¯¥æ¥å£ã€‚</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"> <span class="type">Runnable</span> <span class="variable">type</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Type</span>();					<span class="comment">//Runable æ²¡æœ‰ start()æ–¹æ³•</span></span><br><span class="line"> <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(type);				<span class="comment">//æ‰€ä»¥ï¼Œè¿™é‡Œä½¿ç”¨äº† é™æ€ä»£ç†</span></span><br><span class="line"> thread.start();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Type</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;				<span class="comment">//è¿™éƒ¨åˆ†å’Œ Thread ç›¸ä¼¼</span></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">     <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">     <span class="keyword">while</span> (<span class="literal">true</span>)&#123;</span><br><span class="line">         System.out.println(i &lt;&lt; i);</span><br><span class="line">         <span class="keyword">try</span> &#123;</span><br><span class="line">             Thread.sleep(<span class="number">100</span>);</span><br><span class="line">         &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">             e.printStackTrace();</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">if</span> (++i &gt; <span class="number">15</span>)&#123;</span><br><span class="line">             <span class="keyword">break</span>;</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>å…³äº é™æ€ä»£ç†</strong></p>
<blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Thread</span> <span class="keyword">implements</span> <span class="title class_">Runable</span> &#123;&#125;</span><br><span class="line">	...	</span><br><span class="line">	<span class="keyword">private</span> Runnable target;</span><br><span class="line">	...</span><br><span class="line"> <span class="keyword">public</span> <span class="title function_">Thread</span><span class="params">(Runnable target)</span> &#123;	<span class="comment">//æ„é€ å™¨</span></span><br><span class="line">     init(<span class="literal">null</span>, target, <span class="string">&quot;Thread-&quot;</span> + nextThreadNum(), <span class="number">0</span>);</span><br><span class="line">     								<span class="comment">//è¿™å¥è¯å¯ä»¥å…ˆç†è§£ä¸º this.target = target;</span></span><br><span class="line"> &#125;</span><br><span class="line">	...</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">     <span class="keyword">if</span> (target != <span class="literal">null</span>) &#123;</span><br><span class="line">         target.run();</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç›¸å½“äºï¼Œå…ˆåˆ›å»ºäº†ä¸€ä¸ªæ–°çº¿ç¨‹ï¼Œç„¶ååœ¨æ–°çº¿ç¨‹ä¸­è°ƒç”¨ run æ–¹æ³•</p>
</blockquote>
<h3 id="16-2-3-ç»§æ‰¿-Thread-å’Œ-å®ç°-Runable-çš„åŒºåˆ«">16.2.3 ç»§æ‰¿ Thread å’Œ å®ç° Runable çš„åŒºåˆ«</h3>
<ol>
<li>ä» Java è®¾è®¡æ¥çœ‹ï¼Œä¸¤è€…æœ¬è´¨ä¸Šæ²¡æœ‰åŒºåˆ«ã€‚<code>Thread</code> ç±»æœ¬èº«å°±å®ç°äº† <code>Runable</code> æ¥å£</li>
<li>å®ç° <code>Runable</code> æ¥å£çš„æ–¹å¼æ›´åŠ é€‚åˆå¤šä¸ªçº¿ç¨‹å…±äº«ä¸€ä¸ªèµ„æºçš„æƒ…å†µï¼Œä¸”é¿å…äº†å•ç»§æ‰¿çš„é™åˆ¶ã€‚å»ºè®®ä½¿ç”¨ã€‚</li>
</ol>
<h3 id="16-2-4-çº¿ç¨‹ä¸­æ­¢">16.2.4 çº¿ç¨‹ä¸­æ­¢</h3>
<ol>
<li>
<p>å½“çº¿ç¨‹ç»“æŸåï¼Œä¼šè‡ªåŠ¨é€€å‡º</p>
</li>
<li>
<p>è¿˜å¯ä»¥é€šè¿‡ä½¿ç”¨å˜é‡æ¥æ§åˆ¶ <code>run</code> æ–¹æ³•é€€å‡ºçš„æ–¹å¼æ¥åœæ­¢çº¿ç¨‹ï¼Œå³ é€šçŸ¥æ–¹å¼ã€‚</p>
<blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line"> <span class="keyword">while</span> (active) &#123;					<span class="comment">//è¿™ä¸ªåœºåˆï¼Œåªè¦å¤–éƒ¨æ§åˆ¶ active å³å¯</span></span><br><span class="line">     <span class="keyword">try</span> &#123;</span><br><span class="line">         Thread.sleep(<span class="number">1</span>);</span><br><span class="line">     &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">         e.printStackTrace();</span><br><span class="line">     &#125;</span><br><span class="line">     move();</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
</ol>
<h3 id="16-2-5-çº¿ç¨‹å¸¸ç”¨æ–¹æ³•">16.2.5 çº¿ç¨‹å¸¸ç”¨æ–¹æ³•</h3>
<ul>
<li>
<p><code>setName(name)</code>ï¼šè®¾ç½®çº¿ç¨‹åç§°ï¼Œä½¿ä¹‹ä¸å‚æ•° name ç›¸åŒ</p>
</li>
<li>
<p><code>getName()</code>ï¼šè¿”å›çº¿ç¨‹åç§°</p>
</li>
<li>
<p><code>start()</code>ï¼šçº¿ç¨‹å¼€å§‹æ‰§è¡Œã€‚JVM è°ƒç”¨ <code>start0</code> æ–¹æ³•</p>
<p>è¯¥æ–¹æ³•ä¼šåˆ›å»ºæ–°çš„çº¿ç¨‹ï¼Œæ–°çº¿ç¨‹è°ƒç”¨ <code>run</code>ã€‚</p>
</li>
<li>
<p><code>run()</code>ï¼šåˆ°ä¸‹é¢ç©è·‘æ­¥</p>
<p>å°±æ˜¯ç®€å•çš„æ–¹æ³•è°ƒç”¨ï¼Œä¸ä¼šäº§ç”Ÿæ–°çº¿ç¨‹ã€‚</p>
</li>
<li>
<p><code>setPriority(int priority)</code>ï¼šæ›´æ”¹çº¿ç¨‹ä¼˜å…ˆçº§</p>
<p><code>getPriority()</code>ï¼šè·å–çº¿ç¨‹ä¼˜å…ˆçº§</p>
<p>priority èŒƒå›´ï¼š</p>
<ul>
<li>MAX_PRIORITYï¼šæœ€é«˜ä¼˜å…ˆçº§ï¼ˆ10ï¼‰</li>
<li>MIN_PRIORITYï¼šæœ€ä½ä¼˜å…ˆçº§ï¼ˆ1ï¼‰</li>
<li>NORM_PRIORITYï¼šä¸é«˜ä¸ä½ï¼ŒçœŸæ˜¯å¥½æäº†çš„ä¼˜å…ˆçº§ï¼ˆ5ï¼‰</li>
</ul>
<p>æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ª<strong>ä¼˜å…ˆçº§</strong>ã€‚Java çº¿ç¨‹è°ƒåº¦é‡‡ç”¨å¦‚ä¸‹ä¼˜å…ˆçº§ç­–ç•¥ï¼š</p>
<ul>
<li>ä¼˜å…ˆçº§é«˜çš„å…ˆæ‰§è¡Œï¼Œä¼˜å…ˆçº§ä½çš„åæ‰§è¡Œ</li>
<li>æ¯ä¸ªçº¿ç¨‹åˆ›å»ºæ—¶ä¼šè¢«è‡ªåŠ¨åˆ†é…ä¸€ä¸ªä¼˜å…ˆçº§ã€‚é»˜è®¤çš„åœºåˆï¼Œç»§æ‰¿çˆ¶ç±»ä¼˜å…ˆçº§</li>
<li>ä»»åŠ¡ç´§æ€¥çš„çº¿ç¨‹ï¼Œä¼˜å…ˆçº§è¾ƒé«˜</li>
<li>åŒä¼˜å…ˆçº§çº¿ç¨‹æŒ‰ â€œå…ˆè¿›å…ˆå‡ºâ€ åŸåˆ™è°ƒåº¦</li>
</ul>
</li>
<li>
<p><code>sleep(int millsecond)</code>ï¼šè®©çº¿ç¨‹ä¼‘çœ æŒ‡å®šçš„æ—¶é—´</p>
<p>è¯¥æ–¹æ³•æ˜¯ Thread ç±»çš„é™æ€æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨</p>
</li>
<li>
<p><code>interrupt()</code>ï¼šä¸­æ–­çº¿ç¨‹ï¼ˆä¸æ˜¯ ä¸­æ­¢ï¼‰</p>
</li>
<li>
<p><code>yield()</code>ï¼šçº¿ç¨‹çš„ç¤¼è®©ã€‚è®©å‡º CPU è®©å…¶ä»–çº¿ç¨‹æ‰§è¡Œã€‚å› ä¸ºç¤¼è®©çš„æ—¶é—´ä¸ç¡®å®šï¼Œæ‰€ä»¥ä¸ä¸€å®šç¤¼è®©æˆåŠŸã€‚</p>
<p>æœ¬è´¨æ˜¯ RUNNING åˆ‡æ¢ä¸º READYï¼Œå³è®©å½“å‰çº¿ç¨‹æ”¾å¼ƒæ‰§è¡Œæƒ</p>
</li>
<li>
<p><code>wait()</code>ï¼šå¯¼è‡´å½“å‰çº¿ç¨‹ç­‰å¾…</p>
<p>ç›´åˆ°å…¶ä»–çº¿ç¨‹è°ƒç”¨æ­¤å¯¹è±¡çš„ <code>notify()</code> æ–¹æ³•æˆ– <code>notifyAll()</code> æ–¹æ³•æ‰èƒ½å”¤é†’æ­¤çº¿ç¨‹</p>
<p><code>notify()</code>ã€<code>notifyAll()</code>ï¼šå”¤é†’å›  <code>wait()</code> é˜»å¡çš„çº¿ç¨‹ã€‚</p>
<p>è¿™äº›æ–¹æ³•ï¼ˆ<code>wait()</code>ã€<code>notify()</code>ã€<code>notifyAll()</code>ï¼‰åªèƒ½åœ¨ synchrnized æ–¹æ³•æˆ–ä»£ç å—ä¸­è°ƒç”¨</p>
</li>
<li>
<p><code>join()</code>ï¼šçº¿ç¨‹çš„æ’é˜Ÿã€‚æ’é˜Ÿçš„çº¿ç¨‹ä¸€æ—¦æ’å…¥æˆåŠŸï¼Œåˆ™å¿…å®šå…ˆæ‰§è¡Œå®Œæ’é˜Ÿçº¿ç¨‹çš„æ‰€æœ‰ä»»åŠ¡</p>
<p>å°†å¯¼è‡´å…¶ä»–çº¿ç¨‹çš„ç­‰å¾…ï¼Œç›´åˆ° <code>join()</code> æ–¹æ³•çš„çº¿ç¨‹ç»“æŸ</p>
<p><code>join(long timeout)</code>ï¼šjoinï¼Œä½†æ˜¯æ—¶é—´åˆ°åä¹Ÿèƒ½ç»“æŸå…¶ä»–çº¿ç¨‹çš„ç­‰å¾…</p>
</li>
<li>
<p><code>isAlive()</code>ï¼šæµ‹è¯•å½“å‰çº¿ç¨‹æ˜¯å¦åœ¨æ´»åŠ¨</p>
</li>
<li>
<p><code>Thread.currentThread()</code>ï¼šå¼•ç”¨å½“å‰è¿è¡Œä¸­çš„çº¿ç¨‹</p>
</li>
</ul>
<h3 id="16-2-6-ç”¨æˆ·çº¿ç¨‹å’Œå®ˆæŠ¤çº¿ç¨‹">16.2.6 ç”¨æˆ·çº¿ç¨‹å’Œå®ˆæŠ¤çº¿ç¨‹</h3>
<ul>
<li>
<p>ç”¨æˆ·çº¿ç¨‹ï¼šä¹Ÿå«å·¥ä½œçº¿ç¨‹ã€‚å½“çº¿ç¨‹ä»»åŠ¡æ‰§è¡Œå®Œæ¯•æˆ–é€šçŸ¥æ–¹å¼ç»“æŸ</p>
</li>
<li>
<p>å®ˆæŠ¤çº¿ç¨‹ï¼šä¸€èˆ¬æ˜¯ä¸ºå·¥ä½œçº¿ç¨‹æœåŠ¡çš„ã€‚å½“æ‰€æœ‰çº¿ç¨‹ç»“æŸï¼Œå®ˆæŠ¤çº¿ç¨‹è‡ªåŠ¨ç»“æŸ</p>
<p>å¸¸è§çš„å®ˆæŠ¤çº¿ç¨‹ï¼šåƒåœ¾å›æ”¶æœºåˆ¶</p>
<blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Thread</span> <span class="variable">thraed</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(bullet);</span><br><span class="line">thread.setDeamon(<span class="literal">true</span>);							<span class="comment">//è¿™æ ·ï¼Œå­çº¿ç¨‹è¢«è®¾ç½®ä¸ºä¸»çº¿ç¨‹çš„å®ˆæŠ¤çº¿ç¨‹</span></span><br><span class="line">thread.start();</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
</ul>
<h3 id="16-2-7-çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ">16.2.7 çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ</h3>
<p>çº¿ç¨‹çš„çŠ¶æ€æœ‰</p>
<ul>
<li>
<p>NEWï¼šå°šæœªå¯åŠ¨</p>
</li>
<li>
<p>RUNNABLEï¼šåœ¨ JVM ä¸­æ‰§è¡Œçš„çº¿ç¨‹</p>
<p>å¯ç»†åˆ†ä¸º READY å’Œ RUNNING</p>
</li>
<li>
<p>BLOCKEDï¼šè¢«é˜»å¡ç­‰å¾…ç›‘è§†å™¨é”å®šçš„çº¿ç¨‹</p>
</li>
<li>
<p>WAITINGï¼šæ­£ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œç‰¹å®šåŠ¨ä½œçš„çº¿ç¨‹</p>
</li>
<li>
<p>TIMED_WAITINGï¼šæ­£ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œç‰¹å®šåŠ¨ä½œè¾¾åˆ°ç­‰å¾…æ—¶é—´çš„çº¿ç¨‹</p>
</li>
<li>
<p>TERMINATEDï¼šå·²é€€å‡ºçš„çº¿ç¨‹</p>
</li>
</ul>
<p>æœ‰ä¸€å¼ é‡è¦çš„å›¾ï¼Œå» <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1fh411y7R8?p=593&amp;t=1010.6">è¿™é‡Œ</a> æŸ¥çœ‹å§</p>
<h2 id="16-3-çº¿ç¨‹çš„äº’æ–¥">16.3 çº¿ç¨‹çš„äº’æ–¥</h2>
<blockquote>
<p>åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œä¸€äº›æ•æ„Ÿæ•°æ®ä¸å…è®¸è¢«å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ã€‚æ­¤æ—¶å°±ç”¨åŒæ­¥è®¿é—®æŠ€æœ¯ï¼Œä¿è¯æ•°æ®åœ¨ä»»æ„æ—¶åˆ»ï¼Œæœ€å¤šæœ‰ä¸€ä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ï¼Œä»¥ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ã€‚</p>
<p>ä¹Ÿå¯ä»¥è¿™æ ·ç†è§£ï¼šçº¿ç¨‹åŒæ­¥ï¼Œå³å½“æœ‰ä¸€ä¸ªçº¿ç¨‹å¯¹å†…å­˜è¿›è¡Œæ“ä½œæ—¶ï¼Œå…¶ä»–çº¿ç¨‹éƒ½ä¸èƒ½å¯¹è¿™ä¸ªå†…å­˜åœ°å€è¿›è¡Œæ“ä½œï¼ˆè¢«é˜»å¡ï¼‰ï¼Œç›´åˆ°è¯¥çº¿ç¨‹å®Œæˆæ“ä½œï¼Œå†è®©ä¸‹ä¸€çº¿ç¨‹è¿›è¡Œæ“ä½œã€‚</p>
</blockquote>
<h3 id="16-3-1-äº’æ–¥é”">16.3.1 äº’æ–¥é”</h3>
<blockquote>
<p>åœ¨ Java è¯­è¨€ä¸­ï¼Œå¼•å…¥äº† â€œå¯¹è±¡äº’æ–¥é”â€ çš„æ¦‚å¿µï¼Œä¹Ÿç§°ä¸ºç›‘è§†å™¨ï¼Œæ¥ä¿è¯å…±äº«æ•°æ®æ“ä½œçš„å®Œæ•´æ€§</p>
<p>æ¯ä¸ªå¯¹è±¡éƒ½å¯¹åº”ä¸€ä¸ªå¯ç§°ä¸º â€œäº’æ–¥é”â€ çš„æ ‡è®°ï¼Œè¿™ä¸ªæ ‡è®°ç”¨æ¥ä¿è¯åœ¨ä»»ä¸€æ—¶åˆ»éƒ½åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®å¯¹è±¡ã€‚</p>
<p>Java è¯­è¨€ä¸­ï¼Œæœ‰ 2 ç§æ–¹å¼å®ç°äº’æ–¥é”ï¼š</p>
<ul>
<li>ç”¨å…³é”®å­— volatile å£°æ˜ä¸€ä¸ªå…±äº«æ•°æ®ï¼ˆå˜é‡ï¼‰ã€‚ä¸€èˆ¬å¾ˆå°‘ä½¿ç”¨è¯¥å…³é”®å­—</li>
<li>ç”¨å…³é”®å­— synchronized å£°æ˜å…±äº«æ•°æ®çš„ä¸€ä¸ªæ–¹æ³•æˆ–ä¸€ä¸ªä»£ç </li>
</ul>
<p>åŒæ­¥çš„å±€é™æ€§ï¼šå¯¼è‡´ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡è¦é™ä½ã€‚</p>
<p>éé™æ€çš„å¯¹è±¡ï¼ŒåŒæ­¥æ–¹æ³•çš„é”å¯ä»¥æ˜¯ thisï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–å¯¹è±¡ï¼ˆè¦æ±‚æ˜¯åŒä¸€å¯¹è±¡ï¼‰</p>
<p>é™æ€å¯¹è±¡ï¼ŒåŒæ­¥æ–¹æ³•çš„é”ä¸ºå½“å‰ç±»æœ¬èº«</p>
</blockquote>
<ol>
<li>
<p>åŒæ­¥ä»£ç å—</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">synchronized</span> (å¯¹è±¡) &#123;		<span class="comment">//å¾—åˆ°å¯¹è±¡çš„é”ï¼Œæ‰èƒ½æ“ä½œåŒæ­¥ä»£ç </span></span><br><span class="line">	éœ€è¦è¢«åŒæ­¥ä»£ç ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ç¬¬ä¸€ä¸ªçº¿ç¨‹æŒæœ‰é”å®šæ ‡è®°æ—¶ï¼Œå¦‚æœå¦ä¸€ä¸ªçº¿ç¨‹ä¼å›¾æ‰§è¡Œè¯¥ä»£ç å—è¯­å¥ï¼Œå°†ä»å¯¹è±¡ä¸­ç´¢å–é”å®šæ ‡è®°ã€‚</p>
<p>å› ä¸ºæ­¤æ—¶è¯¥æ ‡è®°ä¸å¯å¾—ï¼Œå¤è¯¥çº¿ç¨‹ä¸èƒ½ç»§ç»­æ‰§è¡Œï¼Œè€Œæ˜¯åŠ å…¥ç­‰å¾…é˜Ÿåˆ—ã€‚</p>
<p>ç¨‹åºè¿è¡Œå®Œ synchronized ä»£ç å—åï¼Œé”å®šæ ‡è®°ä¼šè¢«è‡ªåŠ¨è¿”è¿˜ã€‚å³ä½¿è¯¥åŒæ­¥ä»£ç å—æ‰§è¡Œè¿‡ç¨‹ä¸­æŠ›å‡ºå¼‚å¸¸ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ä¸€ä¸ªçº¿ç¨‹å¤šæ¬¡è°ƒç”¨è¯¥åŒæ­¥ä»£ç å—çš„åœºåˆï¼Œä¹Ÿä¼šåœ¨æœ€å¤–å±‚æ‰§è¡Œå®Œæ¯•åæ­£ç¡®è¿”è¿˜ã€‚</p>
</li>
<li>
<p>æ”¾åœ¨æ–¹æ³•å£°æ˜ä¸­ï¼Œè¡¨ç¤ºæ•´ä¸ªæ–¹æ³•ä¸ºåŒæ­¥æ–¹æ³•</p>
<p>å› ä¸º synchronized è¯­å¥çš„å‚æ•°å¿…é¡»æ˜¯ thisï¼Œå› æ­¤å…è®¸ä¸‹é¢è¿™ç§ç®€æ´çš„å†™æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span>&#123;</span><br><span class="line">	ä»£ç ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="16-3-2-çº¿ç¨‹æ­»é”">16.3.2 çº¿ç¨‹æ­»é”</h3>
<blockquote>
<p>å¤šä¸ªçº¿ç¨‹éƒ½å ç”¨äº†å¯¹æ–¹çš„èµ„æºï¼Œä¸è‚¯ç›¸è®©ï¼Œå°±å¯¼è‡´äº†æ­»é”ã€‚ç¼–ç¨‹æ—¶è¦é¿å…æ­»é”çš„äº§ç”Ÿã€‚</p>
</blockquote>
<ul>
<li>
<p>ä»¥ä¸‹æ“ä½œä¼šé‡Šæ”¾é”</p>
<ol>
<li>å½“å‰çº¿ç¨‹çš„åŒæ­¥æ–¹æ³•ã€åŒæ­¥ä»£ç å—æ‰§è¡Œç»“æŸã€‚</li>
<li>å½“å‰çº¿ç¨‹åœ¨åŒæ­¥æ–¹æ³•ã€åŒæ­¥ä»£ç å—ä¸­é‡åˆ° <code>break</code>ã€<code>return</code></li>
<li>å½“å‰çº¿ç¨‹åœ¨åŒæ­¥æ–¹æ³•ã€åŒæ­¥ä»£ç å—ä¸­å‡ºç°äº†æœªå¤„ç†çš„ <code>Error</code></li>
<li>å½“å‰çº¿ç¨‹åœ¨åŒæ­¥æ–¹æ³•ã€åŒæ­¥ä»£ç å—ä¸­æ‰§è¡Œäº† <code>wait()</code> æ–¹æ³•ï¼Œå½“å‰çº¿ç¨‹æš‚åœï¼Œå¹¶é‡Šæ”¾é”</li>
</ol>
</li>
<li>
<p>ä»¥ä¸‹æ“ä½œä¸ä¼šé‡Šæ”¾é”</p>
<ol>
<li>
<p>æ‰§è¡ŒåŒæ­¥æ–¹æ³•ã€åŒæ­¥ä»£ç å—æ—¶ï¼Œç¨‹åºè°ƒç”¨ <code>Thread.sleep()</code> æˆ– <code>Thread.yield()</code> æ–¹æ³•æš‚åœå½“å‰çº¿ç¨‹çš„æ‰§è¡Œï¼Œä¸ä¼šé‡Šæ”¾é”</p>
</li>
<li>
<p>çº¿ç¨‹æ‰§è¡ŒåŒæ­¥ä»£ç å—æ—¶ï¼Œå…¶ä»–çº¿ç¨‹è°ƒç”¨äº†è¯¥çº¿ç¨‹çš„ <code>suspend()</code> æ–¹æ³•å°†è¯¥çº¿ç¨‹æŒ‚èµ·ï¼Œè¯¥çº¿ç¨‹ä¸ä¼šé‡Šæ”¾é”</p>
<p>æ‰€ä»¥ï¼Œåº”å°½é‡é¿å…ä½¿ç”¨ <code>suspend()</code> å’Œ <code>resume()</code> æ¥æ§åˆ¶çº¿ç¨‹</p>
</li>
</ol>
</li>
</ul>
<h2 id="16-4-çº¿ç¨‹çš„åŒæ­¥">16.4 çº¿ç¨‹çš„åŒæ­¥</h2>
<blockquote>
<p>Java ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>wait()</code>ã€<code>notify()</code>ã€<code>notifyAll()</code> æ¥åè°ƒçº¿ç¨‹é—´çš„è¿è¡Œé€Ÿåº¦å…³ç³»ã€‚è¿™äº›æ–¹æ³•éƒ½è¢«å®šä¹‰åœ¨ java.lang.Object ä¸­</p>
<p>Java ä¸­çš„æ¯ä¸ªå¯¹è±¡å®ä¾‹éƒ½æœ‰ä¸¤ä¸ªçº¿ç¨‹é˜Ÿåˆ—å’Œå®ƒç›¸è¿ã€‚ä¸€ä¸ªç”¨ä»¥å®ç°ç­‰å¾…é”å®šæ ‡å¿—çš„çº¿ç¨‹ï¼Œå¦ä¸€ä¸ªç”¨æ¥å®ç° <code>wait()</code> å’Œ <code>notify()</code> çš„äº¤äº’æœºåˆ¶</p>
</blockquote>
<ul>
<li>
<p><code>wait()</code>ï¼šè®©å½“å‰çº¿ç¨‹é‡Šæ”¾æ‰€æœ‰å…¶æŒæœ‰çš„ â€œå¯¹è±¡äº’æ–¥é”â€ï¼Œè¿›å…¥ç­‰å¾…é˜Ÿåˆ—</p>
</li>
<li>
<p><code>notify()</code>ã€<code>notifyAll()</code>ï¼šå”¤é†’ä¸€ä¸ªæˆ–æ‰€æœ‰åœ¨ç­‰å¾…é˜Ÿåˆ—ä¸­ç­‰å¾…çš„çº¿ç¨‹ï¼Œå¹¶å°†ä»–ä»¬ç§»å…¥åŒä¸€ä¸ªç­‰å¾… â€œå¯¹è±¡äº’æ–¥é”â€ çš„é˜Ÿåˆ—ã€‚</p>
<p>æ‰§è¡Œè¿™äº›æ–¹æ³•æ—¶å¦‚æœæ²¡æœ‰ç­‰å¾…ä¸­çš„çº¿ç¨‹ï¼Œåˆ™å…¶ä¸ä¼šç”Ÿæ•ˆï¼Œä¹Ÿä¸ä¼šè¢«ä¿ç•™åˆ°ä»¥åå†ç”Ÿæ•ˆ</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">synchronized</span> (key) &#123;</span><br><span class="line">    <span class="keyword">if</span> (key.value == <span class="number">0</span>) key.wait();</span><br><span class="line">    key.value--;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">synchronized</span> (key) &#123;</span><br><span class="line">    key.value++;</span><br><span class="line">    key.nitifyAll();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å› ä¸ºè°ƒç”¨è¿™äº›æ–¹æ³•æ—¶å¿…é¡»æŒæœ‰å¯¹è±¡çš„ â€œå¯¹è±¡äº’æ–¥é”â€ï¼Œæ‰€ä»¥ä¸Šè¿°æ–¹æ³•åªèƒ½åœ¨ synhronized æ–¹æ³•æˆ–ä»£ç å—ä¸­æ‰§è¡Œã€‚</p>
<h1>17 IOæµ</h1>
<h2 id="17-1-æ–‡ä»¶">17.1 æ–‡ä»¶</h2>
<blockquote>
<p>æ–‡ä»¶å°±æ˜¯ä¿å­˜æ•°æ®çš„åœ°æ–¹ã€‚</p>
<p>æ–‡ä»¶æµï¼šæ–‡ä»¶ åœ¨ ç¨‹åº ä¸­æ˜¯ä»¥ æµ çš„å½¢å¼æ¥æ“ä½œçš„ã€‚</p>
<p>æµï¼šæ•°æ®åœ¨æ•°æ®æºï¼ˆæ–‡ä»¶ï¼‰å’Œç¨‹åºï¼ˆå†…å­˜ï¼‰ä¹‹é—´ç»å†çš„è·¯å¾„</p>
<p>è¾“å…¥æµï¼šæ•°æ®ä»æ•°æ®æºåˆ°ç¨‹åºçš„è·¯å¾„</p>
<p>è¾“å‡ºæµï¼šæ•°æ®ä»ç¨‹åºåˆ°æ•°æ®æºçš„è·¯å¾„</p>
</blockquote>
<h3 id="17-1-1-å¸¸ç”¨çš„æ–‡ä»¶æ“ä½œ">17.1.1 å¸¸ç”¨çš„æ–‡ä»¶æ“ä½œ</h3>
<blockquote>
<p>Java æä¾›äº† File ç±»ï¼Œç”¨äºå¤„ç†æ–‡ä»¶ç›¸å…³çš„æ“ä½œ</p>
</blockquote>
<ol>
<li>
<p>åˆ›å»ºæ–‡ä»¶å¯¹è±¡ç›¸å…³æ„é€ å™¨å’Œæ–¹æ³•</p>
<ul>
<li>
<p><code>new File(String pathname)</code>ï¼šæ ¹æ®è·¯å¾„åˆ›å»ºä¸€ä¸ª File å¯¹è±¡</p>
<blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">path1</span> <span class="operator">=</span> <span class="string">&quot;d:/test.jpg&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">path2</span> <span class="operator">=</span> <span class="string">&quot;d:\\test.jpg&quot;</span>;</span><br><span class="line"><span class="type">File</span> <span class="variable">file1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(path1);</span><br><span class="line"><span class="type">File</span> <span class="variable">file2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(path2);			<span class="comment">//æ­¤æ—¶åªæ˜¯åœ¨å†…å­˜ä¸­äº§ç”Ÿäº†ä¸€ä¸ªå¯¹è±¡</span></span><br></pre></td></tr></table></figure>
</blockquote>
</li>
<li>
<p><code>new File(File parent, String child)</code>ï¼šæ ¹æ®çˆ¶ç›®å½•æ–‡ä»¶ + å­è·¯å¾„æ„å»º</p>
<blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">File</span> <span class="variable">parentFile1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;d:\\&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">fileName1</span> <span class="operator">=</span> <span class="string">&quot;test.txt&quot;</span>;</span><br><span class="line"><span class="type">File</span> <span class="variable">file3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(parentFile1, fileName1);</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
<li>
<p><code>new File(String parent, String child)</code>ï¼šæ ¹æ®çˆ¶è·¯å¾„ + å­è·¯å¾„æ„å»º</p>
</li>
<li>
<p><code>creatNewFile()</code>ï¼šåˆ›å»ºæ–°æ–‡ä»¶</p>
<blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"> file.createNewFile();				<span class="comment">//è¿™ä¸ªåœºåˆï¼Œå†…å­˜å¯¹è±¡æ‰å†™å…¥ç£ç›˜</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line"> e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
</ul>
</li>
<li>
<p>è·å–æ–‡ä»¶ç›¸å…³ä¿¡æ¯</p>
<ul>
<li>
<p><code>getName()</code>ï¼šè·å–åç§°</p>
</li>
<li>
<p><code>getAbsolutePath()</code>ï¼šè·å–æ–‡ä»¶ç»å¯¹è·¯å¾„</p>
</li>
<li>
<p><code>getParent()</code>ï¼šè·å–æ–‡ä»¶çˆ¶çº§ç›®å½•</p>
</li>
<li>
<p><code>long length()</code>ï¼šè·å–æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰</p>
</li>
<li>
<p><code>exists()</code>ï¼šæ–‡ä»¶æ˜¯å¦å­˜åœ¨</p>
</li>
<li>
<p><code>isFile()</code>ï¼šæ˜¯ä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶</p>
</li>
<li>
<p><code>isDirectory()</code>ï¼šæ˜¯ä¸æ˜¯ä¸€ä¸ªç›®å½•</p>
</li>
<li>
<p><code>isAbsolute()</code>ï¼šæ˜¯ä¸æ˜¯ç»å¯¹è·¯å¾„</p>
</li>
<li>
<p><code>canRead()</code>ï¼šæ˜¯å¦å¯è¯»</p>
<p><code>canWirte()</code>ï¼šæ˜¯å¦å¯å†™</p>
</li>
<li>
<p><code>long lastModified()</code>ï¼šæœ€åä¿®æ”¹æ—¶é—´</p>
</li>
<li>
<p><code>String[] list()</code>ï¼šåˆ—å‡ºç¬¦åˆæ¨¡å¼çš„æ–‡ä»¶å</p>
</li>
</ul>
</li>
<li>
<p>ç›®å½•çš„æ“ä½œå’Œæ–‡ä»¶åˆ é™¤</p>
<ul>
<li><code>mkdir</code>ï¼šåˆ›å»ºä¸€çº§ç›®å½•</li>
<li><code>mkdirs</code>ï¼šåˆ›å»ºå¤šçº§ç›®å½•</li>
<li><code>delete</code>ï¼šåˆ é™¤ç©ºç›®å½•æˆ–æ–‡ä»¶</li>
<li><code>boolean renameTo(File newName)</code>ï¼šæ›´æ”¹æ–‡ä»¶å</li>
</ul>
<p>å…¶å®ç›®å½•ï¼ˆåœ¨å†…å­˜çœ‹æ¥ï¼‰å°±æ˜¯ç‰¹æ®Šçš„æ–‡ä»¶</p>
</li>
</ol>
<p>æ³¨æ„äº‹é¡¹ï¼š</p>
<ul>
<li>File ç±»å¯ä»¥è·å–æ–‡ä»¶çš„å„ç§ç›¸å…³å±æ€§ï¼Œå¯ä»¥å¯¹å…¶è¿›è¡Œæ”¹åï¼Œç”šè‡³åˆ é™¤ã€‚ä½†é™¤äº†æ–‡ä»¶åå¤–çš„å±æ€§æ²¡æœ‰ä¿®æ”¹æ–¹æ³•</li>
<li>File ç±»å¯ä»¥ç”¨æ¥æè¿°ä¸€ä¸ªç›®å½•ï¼Œä½†ä¸èƒ½æ”¹å˜ç›®å½•åï¼Œä¹Ÿä¸èƒ½åˆ é™¤ç›®å½•</li>
</ul>
<h2 id="17-2-IOæµ">17.2 IOæµ</h2>
<ol>
<li>I / O æ˜¯ Input / Output çš„ç¼©å†™ã€‚IO æŠ€æœ¯æ˜¯éå¸¸å®ç”¨çš„æŠ€æœ¯ï¼Œç”¨äºå¤„ç†æ•°æ®ä¼ è¾“ã€‚å¦‚ è¯» / å†™ æ–‡ä»¶ï¼Œç½‘ç»œé€šè®¯ç­‰ã€‚</li>
<li>Java ç¨‹åºä¸­ï¼Œå¯¹äºæ•°æ®çš„ è¾“å…¥ / è¾“å‡º æ“ä½œä»¥ â€œæµï¼ˆstreamï¼‰â€çš„æ–¹å¼è¿›è¡Œ</li>
<li><code>java.io</code> åŒ…ä¸‹æä¾›äº†å„ç§ â€œæµâ€ ç±»å’Œæ¥å£ï¼Œç”¨ä»¥è·å–ä¸åŒç§ç±»çš„æ•°æ®ï¼Œå¹¶é€šè¿‡æ–¹æ³•è¾“å…¥æˆ–è¾“å‡ºæ•°æ®</li>
<li>è¾“å…¥ï¼ˆinputï¼‰ï¼šè¯»å–å¤–éƒ¨æ•°æ®ï¼ˆç£ç›˜ã€å…‰ç›˜ã€ç½‘ç»œæ•°æ®ç­‰ï¼‰åˆ°ç¨‹åºï¼ˆå†…å­˜ï¼‰ä¸­</li>
<li>è¾“å‡ºï¼ˆoutputï¼‰ï¼šå°†ç¨‹åºï¼ˆå†…å­˜ï¼‰æ•°æ®è¾“å‡ºåˆ°å¤–éƒ¨å­˜å‚¨</li>
</ol>
<h3 id="17-2-1-IOæµçš„åˆ†ç±»">17.2.1 IOæµçš„åˆ†ç±»</h3>
<ul>
<li>
<p>æŒ‰æ“ä½œæ•°æ®å•ä½ä¸åŒåˆ†ä¸ºï¼š</p>
<ul>
<li>å­—èŠ‚æµï¼ˆ8 bitï¼‰ï¼šäºŒè¿›åˆ¶æ–‡ä»¶ç”¨è¯¥æ–¹æ³•ï¼Œèƒ½ç¡®ä¿æ–‡ä»¶æ— æŸ</li>
<li>å­—ç¬¦æµï¼ˆæŒ‰ç…§å­—ç¬¦ï¼Œå­—ç¬¦çš„å­—èŠ‚æ•°ç”±ç¼–ç å†³å®šï¼‰ï¼šæ–‡æœ¬æ–‡ä»¶ï¼Œæ•ˆç‡æ›´é«˜</li>
</ul>
</li>
<li>
<p>æŒ‰æ•°æ®æµçš„æµå‘ä¸åŒåˆ†ä¸ºï¼š</p>
<ul>
<li>è¾“å…¥æµï¼šè¯»å–å¤–éƒ¨æ•°æ®ï¼ˆç£ç›˜ã€å…‰ç›˜ã€ç½‘ç»œæ•°æ®ç­‰ï¼‰åˆ°ç¨‹åºï¼ˆå†…å­˜ï¼‰ä¸­</li>
<li>è¾“å‡ºæµï¼šå°†ç¨‹åºï¼ˆå†…å­˜ï¼‰æ•°æ®è¾“å‡ºåˆ°å¤–éƒ¨å­˜å‚¨</li>
</ul>
</li>
<li>
<p>æŒ‰æµçš„è§’è‰²ä¸åŒåˆ†ä¸ºï¼š</p>
<ul>
<li>èŠ‚ç‚¹æµ</li>
<li>å¤„ç†æµ / åŒ…è£…æµ</li>
</ul>
<table>
<thead>
<tr>
<th>Î£(ã£ Â°Ğ” Â°;)ã£</th>
<th>å­—èŠ‚æµ</th>
<th>å­—ç¬¦æµ</th>
</tr>
</thead>
<tbody>
<tr>
<td>è¾“å…¥æµ</td>
<td>InputStream</td>
<td>Reader</td>
</tr>
<tr>
<td>è¾“å‡ºæµ</td>
<td>OutputStream</td>
<td>Writer</td>
</tr>
</tbody>
</table>
</li>
</ul>
<p>Java çš„ IOæµ æ€»å…±æ¶‰åŠ 40å¤šä¸ªç±»ï¼Œå®é™…ä¸Šéƒ½æ˜¯ä¸Šè¿° 4 ç±»çš„æŠ½è±¡åŸºç±»æ´¾ç”Ÿçš„</p>
<p>ç”±è¿™ 4 ä¸ªç±»æ´¾ç”Ÿçš„å­ç±»åç§°éƒ½æ˜¯ä»¥å…¶çˆ¶ç±»åä½œä¸ºå­ç±»ååç¼€</p>
<h3 id="17-2-2-IOæµ-å¸¸ç”¨ç±»">17.2.2 IOæµ å¸¸ç”¨ç±»</h3>
<h4 id="17-2-2-1-FileInputStreamï¼šæ–‡ä»¶å­—èŠ‚è¾“å…¥æµ">17.2.2.1 <code>FileInputStream</code>ï¼šæ–‡ä»¶å­—èŠ‚è¾“å…¥æµ</h4>
<ul>
<li>
<p>æ„é€ å™¨ï¼š</p>
<blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">FileInputStream</span>(File file);				<span class="comment">//é€šè¿‡ä¸€ä¸ª File çš„è·¯å¾„æŒ‡å®šåˆ›å»º</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">FileInputStream</span>(String path);			<span class="comment">//é€šè¿‡ä¸€ä¸ªè·¯å¾„æŒ‡å®šåˆ›å»º</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">FileInputStream</span>(FileDescriptor fdObj);	<span class="comment">//é€šè¿‡æ–‡ä»¶æè¿°ç¬¦åˆ›å»º</span></span><br></pre></td></tr></table></figure>
</blockquote>
</li>
<li>
<p>æ–¹æ³•ï¼š</p>
<ul>
<li>
<p><code>available()</code>ï¼šè¿”å›ç›®å‰å¯ä»¥ä»æµä¸­è¯»å–çš„å­—èŠ‚æ•°</p>
<p>å®é™…æ“ä½œæ—¶ï¼Œè¯»å–çš„å­—èŠ‚æ•°å¯èƒ½å¤§äºè¿™ä¸ªè¿”å›å€¼</p>
</li>
<li>
<p><code>close()</code>ï¼šå…³é—­æ–‡ä»¶è¾“å…¥æµï¼Œé‡Šæ”¾èµ„æº</p>
</li>
<li>
<p><code>finalize()</code>ï¼šç¡®ä¿åœ¨ä¸å¼•ç”¨æ–‡ä»¶è¾“å…¥æµæ—¶è°ƒç”¨å…¶ <code>close()</code> æ–¹æ³•</p>
</li>
<li>
<p><code>getChannel()</code>ï¼šè¿”å›ä¸æ­¤æµæœ‰å…³çš„å”¯ä¸€çš„ <code>FileChannel</code> å¯¹è±¡</p>
</li>
<li>
<p><code>getFD()</code>ï¼šè¿”å›æè¿°ç¬¦</p>
</li>
<li>
<p><code>read()</code>ï¼šä»è¯¥è¾“å…¥æµä¸­è¯»å–ä¸€ä¸ªæ•°æ®å­—èŠ‚</p>
<p>å¦‚æœæ²¡æœ‰è¾“å…¥å¯ç”¨ï¼Œè¯¥æ–¹æ³•ä¼šè¢«é˜»æ­¢ã€‚è¿”å› -1 çš„åœºåˆï¼Œè¯´æ˜åˆ°è¾¾æ–‡ä»¶çš„æœ«å°¾ã€‚</p>
<blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;d:\\test&quot;</span>);</span><br><span class="line"><span class="type">FileInputStream</span> <span class="variable">fileInputStream</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"><span class="type">int</span> read;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"> fileInputStream = <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line"> <span class="keyword">while</span> ((read = fileInputStream.read()) != -<span class="number">1</span>)&#123;</span><br><span class="line">     System.out.print((<span class="type">char</span>) read);</span><br><span class="line"> &#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line"> e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line"> <span class="keyword">try</span> &#123;</span><br><span class="line">     fileInputStream.close();</span><br><span class="line"> &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">     e.printStackTrace();</span><br><span class="line"> &#125;</span><br><span class="line">&#125;										<span class="comment">//çœŸ TM å¤æ‚ã€‚throw äº†ç®—äº†</span></span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªåœºåˆï¼Œæ•ˆç‡è¾ƒä½</p>
</blockquote>
<p><code>read(byte[] b)</code>ï¼šä»è¯¥è¾“å…¥æµä¸­æŠŠæœ€å¤š b.length ä¸ªå­—èŠ‚çš„æ•°æ®è¯»å…¥ä¸€ä¸ª byte æ•°ç»„</p>
<p>è¯»å–æ­£å¸¸çš„åœºåˆï¼Œè¿”å›å®é™…è¯»å–çš„å­—èŠ‚æ•°ã€‚</p>
<blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="type">byte</span>[] b = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">8</span>];					<span class="comment">//ä¸€æ¬¡è¯»å– 8 å­—èŠ‚</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"> fileInputStream = <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line"> <span class="keyword">while</span> ((read = fileInputStream.read(b)) != -<span class="number">1</span>)&#123;</span><br><span class="line">     System.out.print(<span class="keyword">new</span> <span class="title class_">String</span>(b, <span class="number">0</span>, read));</span><br><span class="line">     								<span class="comment">//è¿™ä¸€å¥çœ‹ä¸æ‡‚è¯·çœ‹[12.2 - 4]</span></span><br><span class="line"> &#125;</span><br><span class="line"><span class="keyword">catch</span> </span><br><span class="line">...</span><br><span class="line"><span class="keyword">finally</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
</blockquote>
<p><code>read(byte[] b, int off, int len)</code>ï¼šä»è¯¥è¾“å…¥æµä¸­è¯»å– len å­—èŠ‚æ•°æ®ï¼Œä»æ•°ç»„ä¸‹æ ‡ off å¤„èµ·å†™å…¥</p>
</li>
<li>
<p><code>skip(long n)</code>ï¼šä»è¯¥è¾“å…¥æµä¸­è·³è¿‡å¹¶å»ä¸¢å¼ƒ n ä¸ªå­—èŠ‚çš„æ•°æ®</p>
</li>
<li>
<p><code>mark(int markArea)</code>ï¼šæ ‡è®°æ•°æ®é‡çš„å½“å‰ä½ç½®ï¼Œå¹¶åˆ’å‡ºä¸€ä¸ªç¼“å†²åŒºã€‚ç¼“å†²åŒºå¤§å°è‡³å°‘ä¸º markArea</p>
<p><code>reset()</code>ï¼šå°†è¾“å…¥æµé‡æ–°å®šä½åˆ°å¯¹æ­¤æµæœ€åè°ƒç”¨ <code>mark()</code> æ–¹æ³•æ—¶çš„ä½ç½®</p>
<p><code>markSupported()</code>ï¼šæµ‹è¯•æ•°æ®æµæ˜¯å¦æ”¯æŒ <code>mark()</code> å’Œ <code>reset()</code> æ“ä½œ</p>
</li>
</ul>
</li>
</ul>
<h4 id="17-2-2-2-FileOutputStreamï¼šæ–‡ä»¶å­—èŠ‚è¾“å‡ºæµ">17.2.2.2 <code>FileOutputStream</code>ï¼šæ–‡ä»¶å­—èŠ‚è¾“å‡ºæµ</h4>
<ul>
<li>
<p>æ„é€ å™¨ï¼š</p>
<blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(File file);			<span class="comment">//é€šè¿‡ä¸€ä¸ª File çš„è·¯å¾„æŒ‡å®šåˆ›å»º</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(File file, <span class="type">boolean</span> append);			</span><br><span class="line">							<span class="comment">//append = falseï¼Œå†™å…¥é‡‡ç”¨ è¦†ç›–åŸæ–‡ä»¶ æ–¹å¼</span></span><br><span class="line">							<span class="comment">//append = true çš„åœºåˆï¼Œå†™å…¥é‡‡ç”¨ æœ«å°¾è¿½åŠ  æ–¹å¼</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(String path);			<span class="comment">//é€šè¿‡ä¸€ä¸ªè·¯å¾„æŒ‡å®šåˆ›å»º</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(String path, <span class="type">boolean</span> append);			</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(FileDescriptor fdObj);	<span class="comment">//é€šè¿‡æ–‡ä»¶æè¿°ç¬¦åˆ›å»º</span></span><br></pre></td></tr></table></figure>
</blockquote>
</li>
<li>
<p>æ–¹æ³•ï¼š</p>
<ul>
<li>
<p><code>close()</code>ï¼šå…³é—­æ–‡ä»¶è¾“å…¥æµï¼Œé‡Šæ”¾èµ„æº</p>
</li>
<li>
<p><code>flush()</code>ï¼šåˆ·æ–°æ­¤è¾“å‡ºæµå¹¶å¼ºåˆ¶å†™å‡ºæ‰€æœ‰ç¼“å†²çš„è¾“å‡ºå­—èŠ‚</p>
</li>
<li>
<p><code>finalize()</code>ï¼šç¡®ä¿åœ¨ä¸å¼•ç”¨æ–‡ä»¶è¾“å…¥æµæ—¶è°ƒç”¨å…¶ <code>close()</code> æ–¹æ³•</p>
</li>
<li>
<p><code>getChannel()</code>ï¼šè¿”å›ä¸æ­¤æµæœ‰å…³çš„å”¯ä¸€çš„ <code>FileChannel</code> å¯¹è±¡</p>
</li>
<li>
<p><code>getFD()</code>ï¼šè¿”å›æè¿°ç¬¦</p>
</li>
<li>
<p><code>write(byte[] b)</code>ï¼šå°† b.length ä¸ªå­—èŠ‚ä»æŒ‡å®š byte æ•°ç»„å†™å…¥æ­¤æ–‡ä»¶è¾“å‡ºæµ</p>
<blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;d:\\test1&quot;</span>);</span><br><span class="line"><span class="type">FileOutputStream</span> <span class="variable">fileOutputStream</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"> fileOutputStream = <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(file);</span><br><span class="line"> 									<span class="comment">//æ­¤æ—¶ï¼Œè‹¥æ–‡ä»¶ä¸å­˜åœ¨ä¼šè¢«åˆ›å»º</span></span><br><span class="line"> fileOutputStream.write(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line"> <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;Melody&quot;</span>;</span><br><span class="line"> fileOutputStream.write(str.getBytes());</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">catch</span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">finally</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
</blockquote>
<p><code>write(byte[] bï¼Œ int off, int len)</code>ï¼šå°†æŒ‡å®š byte æ•°ç»„ä¸­ä¸‹æ ‡ off å¼€å§‹çš„ len ä¸ªå­—èŠ‚å†™å…¥æ­¤æ–‡ä»¶è¾“å‡ºæµ</p>
<p><code>write(int b)</code>ï¼šå°†æŒ‡å®šå­—èŠ‚å†™å…¥æ­¤æ–‡ä»¶è¾“å‡ºæµ</p>
</li>
</ul>
</li>
</ul>
<h4 id="17-2-2-3-FileReaderï¼šæ–‡ä»¶å­—ç¬¦è¾“å…¥æµ">17.2.2.3 <code>FileReader</code>ï¼šæ–‡ä»¶å­—ç¬¦è¾“å…¥æµ</h4>
<blockquote>
<p>ä¸å…¶ä»–ç¨‹åºè®¾è®¡è¯­è¨€ä½¿ç”¨ ASCII ç ä¸åŒï¼ŒJava ä½¿ç”¨ Unicode ç è¡¨ç¤ºå­—ç¬¦ä¸²å’Œå­—ç¬¦ã€‚ASCII ç çš„å­—ç¬¦å ç”¨ 1 å­—èŠ‚ï¼Œå¯ä»¥è®¤ä¸ºä¸€ä¸ªå­—ç¬¦å°±æ˜¯ä¸€ä¸ªå­—èŠ‚ã€‚ä½† Unicode ç ç”¨ 2 å­—èŠ‚è¡¨ç¤º 1 ä¸ªå­—ç¬¦ï¼Œæ­¤æ—¶å­—ç¬¦æµå’Œå­—èŠ‚æµå°±ä¸ç›¸åŒã€‚</p>
</blockquote>
<ul>
<li>
<p>æ„é€ å™¨ï¼š</p>
<blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">FileRaeder</span>(File file);</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">FileRaeder</span>(String string);</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
<li>
<p>æ–¹æ³•ï¼š</p>
<ul>
<li><code>read()</code>ï¼šè¯»å–å•ä¸ªå­—ç¬¦ã€‚</li>
<li><code>read(char[])</code>ï¼šæ‰¹é‡è¯»å–å¤šä¸ªå­—ç¬¦åˆ°æ•°ç»„ã€‚</li>
</ul>
</li>
</ul>
<h4 id="17-2-2-3-FileWriterï¼šæ–‡ä»¶å­—ç¬¦è¾“å‡ºæµ">17.2.2.3 <code>FileWriter</code>ï¼šæ–‡ä»¶å­—ç¬¦è¾“å‡ºæµ</h4>
<ul>
<li>
<p>æ„é€ å™¨ï¼š</p>
<blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">FileWriter</span>(File path);</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">FileWriter</span>(String path2);</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">FileWriter</span>(File path3, <span class="type">boolean</span> append);</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">FileWriter</span>(String path4, <span class="type">boolean</span> append);</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
<li>
<p>æ–¹æ³•ï¼š</p>
<ul>
<li><code>write(int)</code>ï¼šå†™å…¥å•ä¸ªå­—ç¬¦</li>
<li><code>write(char[])</code>ï¼šå†™å…¥æŒ‡å®šæ•°ç»„</li>
<li><code>write(char[], off, len)</code>ï¼šå†™å…¥æŒ‡å®šæ•°ç»„çš„æŒ‡å®šéƒ¨åˆ†</li>
<li><code>write(string)</code>ï¼šå†™å…¥å­—ç¬¦ä¸²</li>
<li><code>write(string, off, len)</code>ï¼šå†™å…¥å­—ç¬¦ä¸²çš„æŒ‡å®šéƒ¨åˆ†</li>
<li><code>flush()</code>ï¼šåˆ·æ–°è¯¥æµçš„ç¼“å†²ã€‚å¦‚æœæ²¡æœ‰æ‰§è¡Œï¼Œå†…å®¹å°±ä¸ä¼šå†™å…¥æ–‡ä»¶</li>
<li><code>close()</code>ï¼šç­‰äº <code>flush()</code> + å…³é—­</li>
</ul>
<p><strong>æ³¨æ„ï¼<code>FileWriter</code> ä½¿ç”¨åï¼Œå¿…é¡»å…³é—­ï¼ˆcloseï¼‰æˆ–åˆ·æ–°ï¼ˆflushï¼‰ï¼Œå¦åˆ™æ— æ³•çœŸæ­£å†™å…¥</strong></p>
</li>
</ul>
<h4 id="17-2-2-4-è½¬æ¢æµ-InputStreamReader-å’Œ-OutputStreamWriter">17.2.2.4 è½¬æ¢æµ <code>InputStreamReader</code> å’Œ <code>OutputStreamWriter</code></h4>
<ol>
<li><code>InputStreamReader</code> æ˜¯ <code>Reader</code> çš„å­ç±»ã€‚å¯ä»¥æŠŠ <code>InputStream</code>ï¼ˆå­—èŠ‚æµï¼‰è½¬æ¢æˆ <code>Reader</code>ï¼ˆå­—ç¬¦æµï¼‰</li>
<li><code>OutputStreamWriter</code> æ˜¯ <code>Writer</code> çš„å­ç±»ã€‚å¯ä»¥æŠŠ <code>OutputStream</code>ï¼ˆå­—èŠ‚æµï¼‰è½¬æ¢æˆ <code>Writer</code>ï¼ˆå­—ç¬¦æµï¼‰</li>
<li>å¤„ç†çº¯æ–‡æœ¬æ•°æ®æ—¶ï¼Œå¦‚æœä½¿ç”¨å­—ç¬¦æµæ•ˆç‡æ›´é«˜ï¼Œå¹¶èƒ½æœ‰æ•ˆè§£å†³ä¸­æ–‡é—®é¢˜ï¼Œå»ºè®®å°†å­—èŠ‚æµè½¬æ¢æˆå­—ç¬¦æµã€‚</li>
<li>å¯ä»¥åœ¨ä½¿ç”¨æ—¶æŒ‡å®šç¼–ç æ ¼å¼ï¼ˆUTF -8ã€GBK ç­‰ï¼‰</li>
</ol>
<ul>
<li>
<p>æ„é€ å™¨</p>
<blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">InputStreamReader</span> <span class="variable">isr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(fileInputStream, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">										<span class="comment">//ä¼ å…¥ å­—èŠ‚æµ å’Œ ç¼–ç ç±»å‹</span></span><br><span class="line"><span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Bufferedreader</span>(isr);</span><br><span class="line">										<span class="comment">//ç”¨å¦ä¸€ä¸ªå¤„ç†æµåŒ…è£…</span></span><br></pre></td></tr></table></figure>
</blockquote>
</li>
</ul>
<h3 id="17-2-3-èŠ‚ç‚¹æµå’Œå¤„ç†æµ">17.2.3 èŠ‚ç‚¹æµå’Œå¤„ç†æµ</h3>
<ol>
<li>èŠ‚ç‚¹æµï¼šä»ä¸€ä¸ªç‰¹å®šæ•°æ®æºè¯»å†™æ•°æ®ã€‚</li>
<li>å¤„ç†æµï¼ˆåŒ…è£…æµï¼‰ï¼šæ˜¯ â€œè¿æ¥â€ åœ¨å·²å­˜åœ¨çš„æµï¼ˆèŠ‚ç‚¹æµæˆ–å¤„ç†æµï¼‰ä¸Šï¼Œä¸ºç¨‹åºæä¾›æ›´å¼ºå¤§çš„è¯»å†™åŠŸèƒ½ã€‚</li>
</ol>
<h4 id="èŠ‚ç‚¹æµå’Œå¤„ç†æµçš„åŒºåˆ«å’Œè”ç³»">èŠ‚ç‚¹æµå’Œå¤„ç†æµçš„åŒºåˆ«å’Œè”ç³»</h4>
<ol>
<li>èŠ‚ç‚¹æµæ˜¯ åº•å±‚æµ / ä½çº§æµã€‚ç›´æ¥å’Œæ•°æ®æºç›¸æ¥ã€‚</li>
<li>å¤„ç†æµï¼ˆåŒ…è£…æµï¼‰åŒ…è£…èŠ‚ç‚¹æµï¼Œæ—¢å¯ä»¥æ¶ˆé™¤ä¸åŒèŠ‚ç‚¹æµçš„å®ç°å·®å¼‚ï¼Œä¹Ÿå¯ä»¥æä¾›æ›´æ–¹ä¾¿çš„æ–¹æ³•å®Œæˆè¾“å…¥è¾“å‡º</li>
<li>å¤„ç†æµå¯¹èŠ‚ç‚¹æµè¿›è¡ŒåŒ…è£…ï¼Œä½¿ç”¨äº†ä¿®é¥°å™¨è®¾è®¡æ¨¡å¼ã€‚ä¸ä¼šç›´æ¥ä¸æ•°æ®æºç›¸è¿</li>
<li>å¤„ç†æµçš„åŠŸèƒ½ä¸»è¦ä½“ç°åœ¨
<ul>
<li>æ€§èƒ½çš„æé«˜ï¼šä»¥å¢åŠ ç¼“å†²çš„æ–¹å¼æé«˜è¾“å…¥è¾“å‡ºçš„æ•ˆç‡</li>
<li>æ“ä½œçš„ä¾¿æ·ï¼šå¤„ç†æµå¯èƒ½æä¾›äº†ä¸€ç³»åˆ—ä¾¿æ·æ–¹æ³•æ¥ä¸€æ¬¡æ€§è¾“å…¥å¤§é‡æ•°æ®ï¼Œä½¿ç”¨æ›´åŠ çµæ´»æ–¹ä¾¿</li>
</ul>
</li>
<li>å…³é—­æ—¶å…³é—­å¤–å±‚æµå³å¯</li>
</ol>
<h4 id="17-2-3-1-ç¼“å†²åŒºæµ">17.2.3.1 ç¼“å†²åŒºæµ</h4>
<blockquote>
<p>ç¼“å†²åŒºæµæ˜¯ä¸€ç§åŒ…è£…æµã€‚ç¼“å†²åŒºå­—èŠ‚æµæœ‰ BufferedInputStream å’Œ BufferedOutputStreamï¼›ç¼“å†²åŒºå­—ç¬¦æµæœ‰ BufferedWriter å’Œ BufferedReaderã€‚ä»–ä»¬æ˜¯åœ¨æ•°æ®æµä¸ŠåŠ äº†ä¸€ä¸ªç¼“å†²åŒºã€‚è¯»å†™æ•°æ®æ—¶ï¼Œæ•°æ®ä»¥å—ä¸ºå•ä½è¿›å…¥ç¼“å†²åŒºï¼Œå…¶åçš„è¯»å†™æ“ä½œåˆ™ä½œç”¨äºç¼“å†²åŒºã€‚</p>
<p>è¿™ç§æ–¹å¼èƒ½é™ä½ä¸åŒç¡¬ä»¶è®¾å¤‡é—´çš„é€Ÿåº¦å·®å¼‚ï¼Œæé«˜ I/O æ•ˆç‡ã€‚</p>
</blockquote>
<p>æ„é€ å™¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">BufferedReader</span>(reader);					<span class="comment">//ä¼ å…¥ä¸€ä¸ª Reader</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">BufferedReader</span>(reader, <span class="number">1024</span>);			<span class="comment">//ä¼ å…¥ Reader å¹¶æŒ‡å®šç¼“å†²åŒºå¤§å°</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(writer);					<span class="comment">//ä¼ å…¥ä¸€ä¸ª Writer</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(writer, <span class="number">1024</span>);			<span class="comment">//ä¼ å…¥ Writer å¹¶æŒ‡å®šç¼“å†²åŒºå¤§å°</span></span><br><span class="line">											<span class="comment">//è¿½åŠ è¿˜æ˜¯è¦†ç›–ï¼Œå–å†³äº writer</span></span><br></pre></td></tr></table></figure>
<p>æ–¹æ³•ï¼š</p>
<ul>
<li>
<p><code>bufferedReader.readLine()</code>ï¼šæŒ‰è¡Œè¯»å–ï¼ˆä¸å«æ¢è¡Œç¬¦ï¼‰ã€‚</p>
<p>ä¼šè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚è¿”å› null æ—¶ï¼Œè¡¨ç¤ºè¯»å–å®Œæ¯•ã€‚</p>
<blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">String line;</span><br><span class="line"><span class="keyword">while</span> (line = bufferedReader.readLine() != <span class="literal">null</span>)&#123;</span><br><span class="line"> ...</span><br><span class="line">&#125;</span><br><span class="line">bufferedReader.close();</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
<li>
<p><code>bufferedWriter.write(String str)</code>ï¼šæ’å…¥å­—ç¬¦ä¸²</p>
</li>
<li>
<p><code>bufferedWriter.newLine()</code>ï¼šæ’å…¥ä¸€ä¸ªï¼ˆå’Œç³»ç»Ÿç›¸å…³çš„ï¼‰æ¢è¡Œ</p>
</li>
</ul>
<h4 id="17-2-3-2-æ•°æ®æ•°æ®æµ">17.2.3.2 æ•°æ®æ•°æ®æµ</h4>
<blockquote>
<p>é™¤äº†å­—èŠ‚æˆ–å­—èŠ‚æ•°ç»„å¤–ï¼Œå¤„ç†çš„æ•°æ®è¿˜æœ‰å…¶ä»–ç±»å‹ã€‚ä¸ºè§£å†³æ­¤é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ DataInputStream å’Œ DataOutputStreamã€‚å®ƒä»¬å…è®¸é€šè¿‡æ•°æ®æµæ¥è¯»å†™ Java åŸºæœ¬ç±»å‹ï¼Œå¦‚å¸ƒå°”å‹ï¼ˆbooleanï¼‰ã€æµ®ç‚¹å‹ï¼ˆfloatï¼‰ç­‰</p>
</blockquote>
<p>æ„é€ å™¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">DataInputStream</span>(inputStream);</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">DataOutputStream</span>(outputStream);</span><br></pre></td></tr></table></figure>
<p>æ–¹æ³•ï¼š</p>
<ul>
<li>
<p><code>byte readByte()</code>ï¼šè¯»å–ä¸‹ä¸€ä¸ª byte</p>
<p><code>int readInt()</code>ã€<code>double readDouble()</code>ã€<code>String readUTF()</code>â€¦â€¦</p>
</li>
<li>
<p><code>void writeByte(byte b)</code>ï¼šå†™å…¥ä¸€ä¸ª byte</p>
<p><code>void writeInt(int n)</code>ã€<code>void writeUTF(String str)</code>â€¦â€¦</p>
<p>è™½ç„¶æœ‰å¯¹å­—ç¬¦ä¸²çš„è¯»å†™æ–¹æ³•ï¼Œä½†åº”é¿å…ä½¿ç”¨è¿™äº›æ–¹æ³•ï¼Œè½¬è€Œä½¿ç”¨å­—ç¬¦è¾“å…¥/è¾“å‡ºæµã€‚</p>
</li>
</ul>
<h4 id="17-2-3-3-å¯¹è±¡æµ">17.2.3.3 å¯¹è±¡æµ</h4>
<blockquote>
<p>å½“æˆ‘ä»¬ä¿å­˜æ•°æ®æ—¶ï¼ŒåŒæ—¶ä¹ŸæŠŠ æ•°æ®ç±»å‹ æˆ– å¯¹è±¡ ä¿å­˜ã€‚</p>
<p>ä»¥ä¸Šè¦æ±‚ï¼Œå°±æ˜¯èƒ½å¤Ÿå°† åŸºæœ¬æ•°æ®ç±»å‹ æˆ– å¯¹è±¡ è¿›è¡Œ åºåˆ—åŒ–Â·ååºåˆ—åŒ– æ“ä½œ</p>
</blockquote>
<p><strong>åºåˆ—åŒ–å’Œååºåˆ—åŒ–</strong></p>
<ol>
<li>æŠŠå¯¹è±¡è½¬æˆå­—ç¬¦åºåˆ—çš„è¿‡ç¨‹ç§°ä¸ºåºåˆ—åŒ–ã€‚ä¿å­˜æ•°æ®æ—¶ï¼Œä¿å­˜æ•°æ®çš„å€¼å’Œæ•°æ®ç±»å‹</li>
<li>æŠŠå­—ç¬¦åºåˆ—è½¬æˆå¯¹è±¡çš„è¿‡ç¨‹ç§°ä¸ºååºåˆ—åŒ–ã€‚æ¢å¤æ•°æ®æ—¶ï¼Œæ¢å¤æ•°æ®çš„å€¼å’Œæ•°æ®ç±»å‹</li>
<li>éœ€è¦è®©æŸä¸ªå¯¹è±¡æ”¯æŒåºåˆ—åŒ–æœºåˆ¶ï¼Œåˆ™å¿…é¡»è®©å…¶ç±»æ˜¯ å¯åºåˆ—åŒ–çš„ã€‚ç”±æ­¤ï¼Œè¯¥ç±»å¿…é¡»å®ç°ä¸‹åˆ—æ¥å£ä¹‹ä¸€
<ul>
<li><code>Serializable</code>ï¼šæ¨èã€‚å› ä¸ºæ˜¯æ ‡è®°æ¥å£ï¼Œæ²¡æœ‰æ–¹æ³•</li>
<li><code>Externalizable</code>ï¼šè¯¥æ¥å£æœ‰æ–¹æ³•éœ€è¦å®ç°</li>
</ul>
</li>
</ol>
<p><strong>transient å…³é”®å­—</strong></p>
<ol>
<li>æœ‰ä¸€äº›å¯¹è±¡çŠ¶æ€ä¸å…·æœ‰å¯æŒä¹…æ€§ï¼ˆå¦‚ Thread å¯¹è±¡æˆ–æµå¯¹è±¡ï¼‰ï¼Œè¿™æ ·çš„æˆå‘˜å˜é‡å¿…é¡»ç”¨ transient å…³é”®å­—æ ‡æ˜ã€‚ä»»ä½•æ ‡æœ‰ transient å…³é”®å­—çš„æˆå‘˜å˜é‡éƒ½ä¸ä¼šè¢«ä¿å­˜ã€‚</li>
<li>ä¸€äº›éœ€è¦ä¿å¯†çš„æ•°æ®ï¼Œä¸åº”ä¿å­˜åœ¨æ°¸ä¹…ä»‹è´¨ä¸­ã€‚ä¸ºä¿è¯å®‰å…¨ï¼Œè¿™äº›å˜é‡å‰åº”åŠ ä¸Š transient å…³é”®å­—ã€‚</li>
</ol>
<ul>
<li>
<p>æ„é€ å™¨ï¼š</p>
<blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(InputStream inputStream);</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(OutputStream outputStream);</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
<li>
<p>æ–¹æ³•ï¼š</p>
<p>ååºåˆ—åŒ–é¡ºåºéœ€è¦å’Œåºåˆ—åŒ–é¡ºåºä¸€è‡´ï¼Œå¦åˆ™å‡ºç°å¼‚å¸¸ã€‚</p>
<ul>
<li>
<p><code>writeInt(Integer)</code>ï¼šå†™å…¥ä¸€ä¸ª int</p>
<p><code>readInt()</code>ï¼šè¯»å–ä¸€ä¸ª int</p>
</li>
<li>
<p><code>writeBoolean(Boolaen)</code>ï¼šå†™å…¥ä¸€ä¸ª boolean</p>
<p><code>readBoolean()</code>ï¼šè¯»å–ä¸€ä¸ª boolean</p>
</li>
<li>
<p><code>writeChar(Character)</code>ï¼šå†™å…¥ä¸€ä¸ª char</p>
<p><code>readChar()</code>ï¼šè¯»å–ä¸€ä¸ª char</p>
</li>
<li>
<p><code>writeDouble(Double)</code>ï¼šå†™å…¥ä¸€ä¸ª double</p>
<p><code>readDouble()</code>ï¼šè¯»å–ä¸€ä¸ª double</p>
</li>
<li>
<p><code>writeUTF(String)</code>ï¼šå†™å…¥ä¸€ä¸ª String</p>
<p><code>readUTF()</code>ï¼šè¯»å–ä¸€ä¸ª String</p>
</li>
<li>
<p><code>writeObject(Serializable)</code>ï¼šå†™å…¥ä¸€ä¸ª Obj</p>
<p><code>readObject()</code>ï¼šè¯»å–ä¸€ä¸ª Obj</p>
<p>è¯»å–çš„åœºåˆï¼Œå¦‚æœæƒ³è¦è°ƒç”¨æ–¹æ³•ï¼Œéœ€è¦å‘ä¸‹è½¬å‹ã€‚</p>
<p>ä¸ºæ­¤ï¼Œéœ€è¦è¯¥ç±»å…¶å¼•å…¥ï¼Œæˆ–å°†ç±»çš„å®šä¹‰æ‹·è´åˆ°å¯ä»¥å¼•ç”¨çš„ä½ç½®ã€‚</p>
</li>
</ul>
</li>
<li>
<p><strong>æ³¨æ„äº‹é¡¹</strong></p>
<ol>
<li>
<p>è¯»å†™é¡ºåºè¦ä¸€è‡´</p>
</li>
<li>
<p>å®ç°åºåˆ—åŒ–æˆ–ååºåˆ—åŒ–çš„å¯¹è±¡ï¼Œè¦å®ç° <code>Serializable</code> æˆ– <code>Externalizable</code> æ¥å£</p>
</li>
<li>
<p>åºåˆ—åŒ–çš„ç±»ä¸­å»ºè®®æ·»åŠ  <code>SerialVersionUID</code> ä»¥æé«˜ç‰ˆæœ¬å…¼å®¹æ€§</p>
<blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</blockquote>
<p>æœ‰æ­¤åºåˆ—å·çš„åœºåˆï¼Œåç»­ä¿®æ”¹è¯¥ç±»ï¼Œç³»ç»Ÿä¼šè®¤ä¸ºåªæ˜¯ç‰ˆæœ¬ä¿®æ”¹ï¼Œè€Œéæ–°çš„ç±»</p>
</li>
<li>
<p>åºåˆ—åŒ–å¯¹è±¡æ—¶ï¼Œé»˜è®¤å°†å…¶ä¸­æ‰€æœ‰å±æ€§è¿›è¡Œåºåˆ—åŒ–ï¼ˆé™¤äº† <code>static</code> å’Œ <code>tansient</code> ä¿®é¥°çš„æˆå‘˜ï¼‰</p>
</li>
<li>
<p>åºåˆ—åŒ–å¯¹è±¡æ—¶ï¼Œè¦æ±‚å…¶å±æ€§ä¹Ÿå®ç°åºåˆ—åŒ–æ¥å£</p>
</li>
<li>
<p>åºåˆ—åŒ–å…·å¤‡å¯ç»§æ‰¿æ€§ã€‚æŸç±»è‹¥å®ç°å¯åºåˆ—åŒ–ï¼Œåˆ™å…¶å­ç±»ä¹Ÿå¯åºåˆ—åŒ–</p>
</li>
</ol>
</li>
</ul>
<h4 id="17-2-3-4-æ ‡å‡†è¾“å…¥-è¾“å‡ºæµ">17.2.3.4 æ ‡å‡†è¾“å…¥ / è¾“å‡ºæµ</h4>
<table>
<thead>
<tr>
<th>Î£( Â° â–³ Â°lllï¼‰</th>
<th>ç¼–è¯‘ç±»å‹</th>
<th>è¿è¡Œç±»å‹</th>
<th>é»˜è®¤è®¾å¤‡</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>System.in</code>ï¼šæ ‡å‡†è¾“å…¥</td>
<td><code>InputStream</code></td>
<td><code>BufferedInputStream</code></td>
<td>é”®ç›˜</td>
</tr>
<tr>
<td><code>System.out</code>ï¼šæ ‡å‡†è¾“å‡º</td>
<td><code>PaintStream</code></td>
<td><code>PaintStream</code></td>
<td>æ˜¾ç¤ºå™¨</td>
</tr>
</tbody>
</table>
<h4 id="17-2-3-5-æ‰“å°æµ-PaintStream-å’Œ-PaintWriter">17.2.3.5 æ‰“å°æµ <code>PaintStream</code> å’Œ <code>PaintWriter</code></h4>
<blockquote>
<p>æ‰“å°æµåªæœ‰è¾“å‡ºæµï¼Œæ²¡æœ‰è¾“å…¥æµ</p>
</blockquote>
<ol>
<li>
<p><code>PaintStream</code> æ˜¯ <code>OutputStream</code> çš„å­ç±»ã€‚<code>PaintWriter</code> æ˜¯ <code>Writer</code> çš„å­ç±»ã€‚</p>
</li>
<li>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>System.out</code> è¾“å‡ºä½ç½®æ˜¯ æ ‡å‡†è¾“å‡ºï¼ˆå³ï¼šæ˜¾ç¤ºå™¨ï¼‰</p>
<p>ä¿®æ”¹é»˜è®¤è¾“å‡ºä½ç½®ï¼š</p>
<blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">System.setOut(<span class="keyword">new</span> <span class="title class_">PrintStream</span>(path));</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</blockquote>
</li>
</ol>
<h4 id="17-2-3-6-Properties-ç±»">17.2.3.6 <code>Properties</code> ç±»</h4>
<ol>
<li>
<p><code>Properties</code> æ˜¯ä¸“é—¨ç”¨äºè¯»å†™é…ç½®æ–‡ä»¶çš„é›†åˆç±»</p>
<p>åº•å±‚ç»´æŠ¤äº†ä¸€ä¸ª <code>Entry</code> æ•°ç»„</p>
</li>
<li>
<p>é…ç½®æ–‡ä»¶æ ¼å¼ï¼š</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">é”®<span class="operator">=</span>å€¼</span><br><span class="line">é”®<span class="operator">=</span>å€¼</span><br><span class="line">â€¦ABNF</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨æ„ï¼šé”®å€¼å¯¹ä¸éœ€è¦ç©ºæ ¼ï¼Œå€¼ä¸éœ€è¦å¼•å·ï¼ˆå€¼é»˜è®¤ <code>String</code>ï¼‰</strong></p>
</li>
<li>
<p>å¸¸è§æ–¹æ³•ï¼š</p>
<ul>
<li>
<p><code>load(InputStream)</code></p>
<p><code>load(Reader)</code>ï¼šåŠ è½½é…ç½®æ–‡ä»¶çš„é”®å€¼å¯¹åˆ° <code>Properties</code> å¯¹è±¡</p>
<blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">properties.load(<span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;d:\\data.data&quot;</span>));</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
<li>
<p><code>list(PaintStream)</code></p>
<p><code>list(PaintWriter)</code>ï¼šå°†æ•°æ®æ˜¾ç¤ºåˆ°æŒ‡å®šè®¾å¤‡</p>
<blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">properties.list(System.out);			<span class="comment">//åœ¨æ§åˆ¶å°æ˜¾ç¤º</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</blockquote>
</li>
<li>
<p><code>getProperty(key)</code>ï¼šæ ¹æ®é”®è·å–å€¼</p>
<blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">properties.get(<span class="string">&quot;IQ&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</blockquote>
</li>
<li>
<p><code>setProperty(key, value)</code>ï¼šè®¾ç½®é”®å€¼å¯¹åˆ° <code>Properties</code> å¯¹è±¡</p>
<p>å¦‚æœæ²¡æœ‰è¯¥ keyï¼Œå°±æ˜¯åˆ›å»ºã€‚å¦‚æœ‰ï¼Œå°±æ˜¯æ›¿æ¢ã€‚</p>
<blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">properties.set(<span class="string">&quot;IQ&quot;</span>, <span class="number">0</span>);</span><br><span class="line">properties.set(<span class="string">&quot;Balance&quot;</span>, <span class="number">0</span>);</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
<li>
<p><code>store(Writer, String)</code></p>
<p><code>store(OutputStream, String)</code>ï¼šæŠŠ <code>Properties</code> ä¸­çš„é”®å€¼å¯¹å­˜å‚¨åˆ°é…ç½®æ–‡ä»¶ã€‚</p>
<p>åé¢çš„ <code>String</code> æ˜¯æ³¨é‡Šã€‚å¦‚æœ‰ï¼Œä¼šè¢«ç”¨ <code>#</code> æ ‡è®°å¹¶å†™åœ¨æ–‡ä»¶æœ€ä¸Šæ–¹ã€‚æ³¨é‡Šå¯ä»¥ä¸º nullã€‚</p>
<p>IDEA ä¸­ï¼Œå¦‚æœå«æœ‰ä¸­æ–‡ï¼Œä¼šå‚¨å­˜ä¸º unicode ç </p>
<p><a target="_blank" rel="noopener" href="http://tool.chinaz.com/tools/unicode.aspx">æŸ¥è¯¢ unicode ç </a></p>
</li>
</ul>
</li>
</ol>
<h4 id="17-2-3-7-éšæœºè®¿é—®æ–‡ä»¶">17.2.3.7 éšæœºè®¿é—®æ–‡ä»¶</h4>
<blockquote>
<p>ç¨‹åºé˜…è¯»æ–‡ä»¶æ—¶ä¸ä»…è¦ä»å¤´è¯»åˆ°å°¾ï¼Œè¿˜è¦å®ç°æ¯æ¬¡åœ¨ä¸åŒä½ç½®è¿›è¡Œè¯»å–ã€‚æ­¤æ—¶å¯ä»¥ä½¿ç”¨ RandomAccessFile</p>
</blockquote>
<p>æ„é€ å™¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">RandomAccessFile</span>(String name, String mode);		<span class="comment">//é€šè¿‡æ–‡ä»¶å</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">RandomAccessFile</span>(File file, String mode);		<span class="comment">//é€šè¿‡æ–‡ä»¶å¯¹è±¡</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>å‚æ•° mode å†³å®šä»¥åªè¯»æ–¹å¼ <code>mode = &quot;r&quot;</code> è¿˜æ˜¯è¯»å†™æ–¹å¼ <code>mode = &quot;rw&quot;</code> è®¿é—®æ–‡ä»¶ã€‚</p>
</blockquote>
<p>æ–¹æ³•ï¼š</p>
<ul>
<li>
<p><code>long getFilePointer()</code>ï¼šè¿”å›æ–‡æ¡£æŒ‡é’ˆçš„å½“å‰ä½ç½®</p>
</li>
<li>
<p><code>void seek(long pos)</code>ï¼šå°†æ–‡æ¡£æŒ‡é’ˆç½®äºæŒ‡å®šçš„ç»å¯¹ä½ç½® pos</p>
<p>æ–‡æ¡£æŒ‡é’ˆçš„ä½ç½®ä»æ–‡æ¡£å¼€å§‹çš„å­—ç¬¦å¤„å¼€å§‹è®¡ç®—ï¼Œ<code>pos = 0L</code> è¡¨ç¤ºæ–‡æ¡£çš„å¼€å§‹</p>
</li>
<li>
<p><code>long length()</code>ï¼šè¿”å›æ–‡ä»¶é•¿åº¦</p>
</li>
</ul>
<h1>18 é¡¹ç›®ï¼šå¦å…‹å¤§æˆ˜</h1>
<p>è¿˜æœ‰å¾ˆå¤šç»†èŠ‚ã€ä¼˜åŒ–æ–¹æ³•æ²¡å®ç°ï¼Œä½†å›°éš¾çš„å·²ç»æ²¡æœ‰äº†ã€‚</p>
<p>å…ˆä¸æ‰“ç£¨äº†ï¼Œè¿˜æ˜¯ä»¥å­¦ä¹  Java ä¸ºä¸»ã€‚</p>
<h3 id="äºŒé˜¶æ®µæ¯•ä¸š">äºŒé˜¶æ®µæ¯•ä¸š</h3>
<blockquote>
<p>å…³äº æ•°é‡ çš„æ³¨é‡Šå¯èƒ½ä¸å¯¹ã€‚é‚£äº›æ³¨é‡Šæ˜¯æ—©äº›æ—¶å€™æ·»åŠ çš„ã€‚åæ¥æ·»åŠ äº†æ–°åŠŸèƒ½ï¼Œè¿™äº›æ³¨é‡Šæ²¡æœ‰åŠæ—¶æ›´æ–°</p>
<p>TankGame.javaï¼šç¨‹åºçš„å…¥å£</p>
<p>MyPanel.javaï¼šçª—å£ã€å›¾åƒçš„ç»˜åˆ¶ã€‚è¿™æ˜¯è¯¥é¡¹ç›®çš„ä¸»å¹²</p>
<p>Player.javaã€Enemy.javaï¼šå·±æ–¹ã€æ•Œæ–¹çš„å¦å…‹ç±»ã€‚Tank.java æ˜¯ä»–ä»¬çš„çˆ¶ç±»</p>
<p>Vehicle.javaï¼šè®°å½•äº†æ‰€æœ‰å¦å…‹é¢„è®¾çš„æšä¸¾ç±»ã€‚è¯¥åŒ…ä¸‹è¿˜æœ‰å¦ä¸€ä¸ªè®°å½•äº†æ‰€æœ‰å­å¼¹ç±»å‹çš„æšä¸¾ç±» Bullet</p>
<p>Map.javaï¼šè®°å½•äº†åœ°å›¾æ•°æ®çš„æšä¸¾ç±»ï¼ŒåŒ…å«ä¸åŒå…³å¡ã€‚ä½†æˆ‘æ²¡è®¾è®¡å…³å¡</p>
<p>InputImage.javaï¼šæ‰€æœ‰å¯¼å…¥çš„å›¾ç‰‡ã€‚æ˜¯æˆ‘å‡†å¤‡çš„ç´ æ</p>
<p>Timing.javaï¼šä¸€ä¸ªè®¡æ—¶å™¨ã€‚å½“æ—¶èƒ½åŠ›æœ‰é™ï¼Œç”¨è¿™ä¸ªä½œä¸ºæŸä¸ªè®¡æ—¶åŠŸèƒ½çš„ä»£æ›¿æ–¹æ¡ˆ</p>
</blockquote>
<ul>
<li>
<p><strong>TankGame.javaï¼ˆå…¥å£ï¼‰</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.melody.tank_game;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.swing.*;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Melody</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0.à°·</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * å°æ´¾è’™ä¼šå¼€å¦å…‹å—ï¼Ÿ</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * â €â €â €â €â €â €â €â €â¢€â£ â ´â ’â ›â ²â¡„â €â €â €â €â €â €â €â €â €â €â €</span></span><br><span class="line"><span class="comment"> * â €â €â €â €   â €â¢»â¡„â£ â ¶â£†â €â£¸â£€â£€â €â €</span></span><br><span class="line"><span class="comment"> * â €â €â € â €â €â¢€â¡ â ¬â ›â¢“â£â ‰â£¾â£‰â£€â ‰â¢¹â¡€â €â €â €â €â €â €â €</span></span><br><span class="line"><span class="comment"> * â €â € â €â¢€â¡–â ‹â£ â ´â ›â ™â¢¹â â¢³â¢€â£¨â¡µâ šâ €â €â €</span></span><br><span class="line"><span class="comment"> * â €â €â €â£°â ‹â¡ â â â£€â ¤â ’â šâ ›â ™â ’â ³â ¤â£„â¡€â €</span></span><br><span class="line"><span class="comment"> * â €â €â €â ˜â â¢¼â –â ‹â €â €â¢€â €â €â €â €â €â €â ˜â£Œâ¡’â ²â¢¹â €â €â €â €</span></span><br><span class="line"><span class="comment"> * â €â € â €â¡¸â â €â €â €â €â¡†â €â €â â €â ¢â£„â €â¡½â¡™â¡²â ‘â ’â ’â¡’â </span></span><br><span class="line"><span class="comment"> * â¢€â¡ â ´â šâ €â €â €â €â €â£•â â£„â¡€â¢€â €â €â¡‡â µâ¢â šâ¢¾â¡€â¢ â –â â €       ___________________</span></span><br><span class="line"><span class="comment"> * â ˆâ ¦â£„â£€â €â¡”â €â €â¢â¡â €â ‰â ²â£„â¡€â¢²â¢¼â €â¢€â ³â¡„â â €â¢£â €â €     /  å¦å…‹ï¼Ÿæ˜¯æ–°æ¸¸æˆå–”ã€‚   \</span></span><br><span class="line"><span class="comment"> * â €â €â£ â ƒâ¢â „â €â €â ´â …â  â¡Šâ¡¢â €â ‰â ‰â â €â¢†â •â ¹â¡€â €â ˆâ¡†â €  &lt;   å¼€ç©ç¬‘ï¼Œæˆ‘è¶…å‹‡çš„å¥½ä¸å¥½   \</span></span><br><span class="line"><span class="comment"> * â €â  â¡‡â €â¡¸â €â €â €â ¨â¡…â €â ’â ˆâ €â¢„â  â  â ”â €â €â €â¢»â €â €â¢£â €     \     æˆ‘è¶…ä¼šç©çš„å•¦ ~     /</span></span><br><span class="line"><span class="comment"> * â €â¢¸â …â €â¡•â €â €â €â €â£‡â €â €â €â €â €â €â €â €â €â£€â¡¤â¡â €â €â¢¸â €       \____________________/</span></span><br><span class="line"><span class="comment"> * â €â ˆâ¡‡â €â££â €â €â ˆâ €â ¸â¡¦â ´â ²â¢šâ¢šâ ™â â ™â â â£±â â¢ â €â¢¸â …</span></span><br><span class="line"><span class="comment"> * â €â €â ™â£†â ˜â£„â €â  â£„â €â ¹â£Œâ Œâ €â ‚â â¢ˆâ „â¡â¢Œâ ³â£ºâ â¢€â¡â €</span></span><br><span class="line"><span class="comment"> * â €â €â €â €â ™â ºâ ›â£²â œâ Ÿâ¡“â¡šâ£â£”â¡€â¡Œâ£€â¢‚â£”â ´â ‹â¢â ’â â €â €</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * ä»€ä¹ˆæ–°æ¸¸æˆï¼Œæ¯”æ¸¸æˆè¿˜åˆºæ¿€ï¼è¿˜å¯ä»¥æ•™ä½  å­¦ Ja va å“¦ ~</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TankGame</span> <span class="keyword">extends</span> <span class="title class_">JFrame</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> MyPanel mp;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Thread thread;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">File</span> <span class="variable">savePath</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;d:\\Program\\Melody\\TankGame\\saveData.sav&quot;</span>);</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> abandoned;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">width</span> <span class="operator">=</span> <span class="number">1200</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">height</span> <span class="operator">=</span> <span class="number">800</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">enemyNum</span> <span class="operator">=</span> <span class="number">5</span>;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">char</span> <span class="variable">inpChar</span> <span class="operator">=</span> <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">        mp = <span class="keyword">new</span> <span class="title class_">MyPanel</span>(width, height, enemyNum);</span><br><span class="line">        <span class="keyword">if</span> (savePath.isFile()) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;å¼€å§‹æ–°æ¸¸æˆï¼Ÿï¼ˆYæ–°æ¸¸æˆ/Nè¯»æ¡£ï¼‰&quot;</span>);</span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">                inpChar = scanner.next().charAt(<span class="number">0</span>);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (inpChar == <span class="string">&#x27;Y&#x27;</span> || inpChar == <span class="string">&#x27;y&#x27;</span>) &#123;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (inpChar == <span class="string">&#x27;N&#x27;</span> || inpChar == <span class="string">&#x27;n&#x27;</span>) &#123;</span><br><span class="line">                        mp.pause = <span class="literal">true</span>;</span><br><span class="line">                        mp.toLoad = <span class="literal">true</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>();</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;é”™è¯¯ï¼è¯·é‡æ–°è¾“å…¥ï¼ˆYæ–°æ¸¸æˆ/Nè¯»æ¡£ï¼‰&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">TankGame</span> <span class="variable">game</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TankGame</span>(Math.abs(width), Math.abs(height), Math.abs(enemyNum));</span><br><span class="line">        thread = <span class="keyword">new</span> <span class="title class_">Thread</span>(game.mp);</span><br><span class="line">        thread.start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TankGame</span><span class="params">(<span class="type">int</span> width, <span class="type">int</span> height, <span class="type">int</span> enemyNum)</span> &#123;</span><br><span class="line">        width = Math.max(width, <span class="number">800</span>);</span><br><span class="line">        height = Math.max(height, <span class="number">600</span>);</span><br><span class="line">        <span class="built_in">this</span>.add(mp);</span><br><span class="line">        <span class="built_in">this</span>.setSize(width + <span class="number">20</span>, height + <span class="number">240</span>);</span><br><span class="line">        <span class="built_in">this</span>.addKeyListener(mp);</span><br><span class="line">        <span class="built_in">this</span>.setVisible(<span class="literal">true</span>);</span><br><span class="line">        <span class="built_in">this</span>.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>MyPanel.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.melody.tank_game;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.swing.*;</span><br><span class="line"><span class="keyword">import</span> java.awt.*;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.KeyEvent;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.KeyListener;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedHashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Vector;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Melody</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼è¯¥ç±»éœ€è¦é‡æ–°æ•´ç†ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyPanel</span> <span class="keyword">extends</span> <span class="title class_">JPanel</span> <span class="keyword">implements</span> <span class="title class_">KeyListener</span>, Runnable, Serializable &#123;</span><br><span class="line">    <span class="comment">//5 ä¸ªé™æ€å˜é‡ä¾æ¬¡æ˜¯ï¼šå…è®¸çš„åŒå±æœ€å¤§æ•Œäººæ•°é‡çš„ä¸Šé™ã€æˆ˜æ–—åŒºåŸŸå®½åº¦ã€æˆ˜æ–—åŒºåŸŸé«˜åº¦ã€ç©å®¶ã€æ˜¯å¦é€šå…³</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">ENEMY_MAX</span> <span class="operator">=</span> <span class="number">20</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">width</span> <span class="operator">=</span> <span class="number">1200</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">height</span> <span class="operator">=</span> <span class="number">1000</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Player</span> <span class="variable">player</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Player</span>(<span class="number">640</span>, <span class="number">640</span>);</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="variable">gameSuspend</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[][][] mapData = <span class="keyword">new</span> <span class="title class_">int</span>[width][height][<span class="number">2</span>];                        <span class="comment">//*****æ­¤å¤„éœ€è¦ä¿®æ”¹*****</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//12 ä¸ªæˆå‘˜å˜é‡ï¼Œä¾æ¬¡æ˜¯ï¼šæ‰€æœ‰æ•Œäººå¦å…‹ã€æ‰€æœ‰è¢«æ‘§æ¯çš„æ•Œäººå¦å…‹ã€åŒå±æœ€å¤§æ•Œäººæ•°é‡ï¼ˆç”¨æˆ·è®¾å®šï¼‰ã€æ•Œäººåˆå§‹ä½ç½®é›†ï¼ˆå«åæ ‡ã€å ç”¨æƒ…å†µï¼‰ã€</span></span><br><span class="line">    <span class="comment">//          æ•Œäººåˆå§‹ä½ç½®é›†ï¼ˆä»…åæ ‡ï¼‰ã€å…³å¡æ•Œäººæ€»æ•°ã€Wé”®æ˜¯å¦æ­£è¢«æŒ‰ä¸‹ã€Aé”®æ˜¯å¦æ­£è¢«æŒ‰ä¸‹ã€Sé”®æ˜¯å¦æ­£è¢«æŒ‰ä¸‹ã€Dé”®æ˜¯å¦æ­£è¢«æŒ‰ä¸‹ã€å¼€ç«é”®æ˜¯å¦æ­£è¢«æŒ‰ä¸‹ã€</span></span><br><span class="line">    <span class="comment">//          å¯¼å…¥å›¾ç‰‡åª’ä»‹ã€åœ°å›¾é›†ã€å…³å¡æ•°</span></span><br><span class="line">    <span class="keyword">private</span> Vector&lt;Tank&gt; enemy = <span class="keyword">new</span> <span class="title class_">Vector</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> Vector&lt;Tank&gt; deadEnemy = <span class="keyword">new</span> <span class="title class_">Vector</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> enemyMax;</span><br><span class="line">    <span class="keyword">private</span> LinkedHashMap&lt;<span class="type">int</span>[], Boolean&gt; enemyPositions = <span class="keyword">new</span> <span class="title class_">LinkedHashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[][] enemyPosition;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> <span class="type">boolean</span> <span class="variable">isPressingW</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> <span class="type">boolean</span> <span class="variable">isPressingA</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> <span class="type">boolean</span> <span class="variable">isPressingS</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> <span class="type">boolean</span> <span class="variable">isPressingD</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> <span class="type">boolean</span> <span class="variable">isFiring</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> <span class="type">Image</span> <span class="variable">image</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> Map[] maps = Map.values();</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">level</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">private</span> Tank boss;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">bossActive</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">pause</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">transient</span> <span class="type">boolean</span> <span class="variable">saved</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">loaded</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">transient</span> <span class="type">boolean</span> <span class="variable">toLoad</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> <span class="type">boolean</span> <span class="variable">toSave</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">transient</span> <span class="type">boolean</span> <span class="variable">abandoned</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ„é€ å™¨</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyPanel</span><span class="params">(<span class="type">int</span> width, <span class="type">int</span> height, <span class="type">int</span> enemyNum)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.width = (<span class="type">int</span>) (width / <span class="number">40</span>) * <span class="number">40</span>;</span><br><span class="line">        <span class="built_in">this</span>.height = (<span class="type">int</span>) (height / <span class="number">40</span>) * <span class="number">40</span>;               <span class="comment">//è®¾ç½®é•¿å®½</span></span><br><span class="line">        enemyNum = Math.max(enemyNum, <span class="number">0</span>);</span><br><span class="line">        enemyMax = Math.min(enemyNum, ENEMY_MAX);           <span class="comment">//è®¾ç½®åŒå±æœ€å¤§æ•Œäººæ•°é‡</span></span><br><span class="line">        enemyPosition = <span class="keyword">new</span> <span class="title class_">int</span>[enemyMax][<span class="number">2</span>];                <span class="comment">//å·²ç»ç¡®å®šäº†è¦ç”Ÿæˆçš„æ•Œäººä½ç½®æ•°é‡ï¼Œç”Ÿæˆä½ç½®æ•°ç»„ï¼ˆç©ºï¼‰</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; enemyMax; i++) &#123;                <span class="comment">//ç”Ÿæˆæ•Œäººåˆå§‹ä½ç½®ã€‚</span></span><br><span class="line">            <span class="type">int</span>[] tempPosition = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">2</span>];</span><br><span class="line">            tempPosition[<span class="number">0</span>] = i * <span class="number">150</span> + <span class="number">50</span>;</span><br><span class="line">            tempPosition[<span class="number">1</span>] = <span class="number">50</span>;</span><br><span class="line">            <span class="keyword">while</span> (tempPosition[<span class="number">0</span>] &gt; (width - <span class="number">100</span>)) &#123;</span><br><span class="line">                tempPosition[<span class="number">1</span>] += <span class="number">120</span>;</span><br><span class="line">                tempPosition[<span class="number">0</span>] -= (width - <span class="number">150</span>);</span><br><span class="line">                <span class="keyword">if</span> (tempPosition[<span class="number">1</span>] &gt; height - <span class="number">100</span>) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            enemyPosition[i][<span class="number">0</span>] = tempPosition[<span class="number">0</span>];</span><br><span class="line">            enemyPosition[i][<span class="number">1</span>] = tempPosition[<span class="number">1</span>];</span><br><span class="line">        &#125;                                                    <span class="comment">//æ­¤æ—¶ æ•Œäººåˆå§‹ä½ç½®æ•°ç»„ ç”Ÿæˆå®Œæ¯•ã€‚</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span>[] ints : enemyPosition) &#123;</span><br><span class="line">            enemyPositions.put(ints, <span class="literal">false</span>);                 <span class="comment">//è£…æ»¡ æ•Œäººåˆå§‹ä½ç½®é›† é»˜è®¤å…¨éƒ¨æ˜¯æœªå ç”¨</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        nextLevel();</span><br><span class="line">        player.start();             <span class="comment">//å¯åŠ¨ç©å®¶çº¿ç¨‹</span></span><br><span class="line">        <span class="keyword">while</span> (!abandoned) &#123;</span><br><span class="line">            creatEnemy();</span><br><span class="line">            gameSuspend = <span class="literal">false</span>;<span class="comment">//åˆ›å»ºæ•Œäººå¦å…‹ã€‚è¿™ä¸ªæ–¹æ³•åŒæ—¶ä¼šå¯åŠ¨æ•Œäººå¦å…‹çº¿ç¨‹</span></span><br><span class="line">            <span class="keyword">while</span> (!gameSuspend) &#123;</span><br><span class="line">                repaint();              <span class="comment">//åˆ·æ–°</span></span><br><span class="line">                checkLevelClear();</span><br><span class="line">                <span class="keyword">if</span>(toSave)&#123;</span><br><span class="line">                    saveData();</span><br><span class="line">                    toSave  = <span class="literal">false</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span>(toLoad)&#123;</span><br><span class="line">                    loadData();</span><br><span class="line">                    toLoad  = <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            pauseBetweenLevels(<span class="number">1200</span> + (bossActive ? <span class="number">2000</span> : <span class="number">0</span>));</span><br><span class="line">            <span class="keyword">while</span> (!gameSuspend) &#123;</span><br><span class="line">                repaint();</span><br><span class="line">            &#125;</span><br><span class="line">            nextLevel();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">paint</span><span class="params">(Graphics g)</span> &#123;</span><br><span class="line">        drawUI(g);                      <span class="comment">//ç”»å‡º UI</span></span><br><span class="line">        drawPlayer(g);                  <span class="comment">//ç”»å‡º ç©å®¶å¦å…‹ï¼ˆåŒ…å«å­å¼¹ï¼‰</span></span><br><span class="line">        drawEnemy(g);                   <span class="comment">//ç”»å‡º æ‰€æœ‰æ•Œäººå¦å…‹ï¼ˆåŒ…å«å­å¼¹ï¼‰</span></span><br><span class="line">        drawDeadTank(g);                <span class="comment">//ç”»å‡º è¢«ç ´åå¦å…‹çš„æ®‹ç•™åŠ¨ç”»å’Œæ®‹ç•™å­å¼¹</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”»å‡º UI</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">drawUI</span><span class="params">(Graphics g)</span> &#123;</span><br><span class="line">        g.setColor(Color.BLACK);</span><br><span class="line">        g.fillRect(<span class="number">0</span>, <span class="number">0</span>, width, height);</span><br><span class="line">        g.setColor(Color.GRAY);</span><br><span class="line">        g.fillRect(<span class="number">2</span>, <span class="number">2</span>, width - <span class="number">4</span>, height - <span class="number">4</span>);        <span class="comment">//ä»¥ä¸Š 4 è¡Œï¼Œç”»å‡ºäº†æˆ˜æ–—åœºåœ°</span></span><br><span class="line">        g.setColor(Color.WHITE);</span><br><span class="line">        g.fillRect(<span class="number">0</span>, height, width, <span class="number">200</span>);</span><br><span class="line">        drawHp(g);                                                      <span class="comment">//ç”» HP æ§½</span></span><br><span class="line">        drawFireCD(g);                                                  <span class="comment">//ç”» å¼€ç« æ§½</span></span><br><span class="line">        drawEnemyNum(g);                                                <span class="comment">//ç”» é›·è¾¾ æ§½</span></span><br><span class="line">        drawStars(g);                                                   <span class="comment">//ç”» ç»éªŒå€¼ æ˜Ÿæ˜Ÿ</span></span><br><span class="line">        <span class="keyword">if</span> (pause) &#123;</span><br><span class="line">            drawPause(g);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”» HP æ§½</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">drawHp</span><span class="params">(Graphics g)</span> &#123;</span><br><span class="line">        <span class="comment">//ä¸‹é¢ç”»å‡º ç»¿è‰² HP æ§½ã€‚éšç€ HP å‡å°‘ï¼Œæ§½ä¼šå˜ç©º</span></span><br><span class="line">        g.setFont(<span class="keyword">new</span> <span class="title class_">Font</span>(<span class="string">&quot;ç­‰çº¿&quot;</span>, Font.ITALIC + Font.BOLD, <span class="number">50</span>));</span><br><span class="line">        g.setColor(Color.BLACK);</span><br><span class="line">        g.fillRect(<span class="number">50</span>, height + <span class="number">60</span>, (<span class="type">int</span>) (<span class="number">20</span> * player.vehicle.LIFE) + <span class="number">4</span>, <span class="number">30</span>);</span><br><span class="line">        g.setColor(player.lifeRemains / player.vehicle.LIFE &gt; <span class="number">0.2</span> ? Color.GREEN : Color.RED);</span><br><span class="line">        g.fill3DRect(<span class="number">52</span>, height + <span class="number">62</span>, (<span class="type">int</span>) (<span class="number">20</span> * Math.max(player.lifeRemains, <span class="number">0</span>)), <span class="number">26</span>, <span class="literal">true</span>);</span><br><span class="line">        g.fill3DRect(<span class="number">52</span>, height + <span class="number">80</span>, (<span class="type">int</span>) (<span class="number">20</span> * Math.max(player.lifeRemains, <span class="number">0</span>) - <span class="number">1</span>), <span class="number">6</span>, <span class="literal">false</span>);</span><br><span class="line">        <span class="comment">//ä¸‹é¢ç”»å‡ºä¸€æ®µè¯´æ˜æ–‡</span></span><br><span class="line">        g.setColor(Color.GRAY);</span><br><span class="line">        <span class="keyword">if</span> (player.vehicle == Vehicle.Basic) &#123;</span><br><span class="line">            g.drawString(<span class="string">&quot;é˜²å¼¹è¡£&quot;</span>, <span class="number">50</span>, height + <span class="number">140</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            g.drawString(player.vehicle == Vehicle.Tank_Special ? <span class="string">&quot;å¤åˆè£…ç”²&quot;</span> : <span class="string">&quot;è£…ç”²&quot;</span>, <span class="number">50</span>, height + <span class="number">140</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”» å¼€ç« æ§½</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">drawFireCD</span><span class="params">(Graphics g)</span> &#123;</span><br><span class="line">        <span class="comment">//ä»¥ä¸‹ç”»å‡º æ©™è‰² å¼€ç«æ§½ã€‚éšç€è£…å¼¹ï¼Œæ§½ä¼šå¡«æ»¡</span></span><br><span class="line">        g.setFont(<span class="keyword">new</span> <span class="title class_">Font</span>(<span class="string">&quot;ç­‰çº¿&quot;</span>, Font.ITALIC + Font.BOLD, <span class="number">50</span>));</span><br><span class="line">        g.setColor(Color.BLACK);</span><br><span class="line">        g.fillRect((<span class="type">int</span>) ((width / <span class="number">2</span>) + <span class="number">60</span>), height + <span class="number">60</span>, <span class="number">205</span>, <span class="number">30</span>);</span><br><span class="line">        g.setColor(player.vehicle == Vehicle.Tank_Special ? Color.cyan : Color.ORANGE);</span><br><span class="line">        g.fill3DRect((<span class="type">int</span>) ((width / <span class="number">2</span>) + <span class="number">62</span>), height + <span class="number">62</span>,</span><br><span class="line">                (<span class="type">int</span>) (player.getAtkSpeed() * (player.fireCD - Math.max(player.fireCount, <span class="number">0</span>)) + <span class="number">1</span>), <span class="number">26</span>, <span class="literal">true</span>);</span><br><span class="line">        g.fill3DRect((<span class="type">int</span>) ((width / <span class="number">2</span>) + <span class="number">62</span>), height + <span class="number">80</span>,</span><br><span class="line">                (<span class="type">int</span>) (player.getAtkSpeed() * (player.fireCD - Math.max(player.fireCount, <span class="number">0</span>))), <span class="number">6</span>, <span class="literal">false</span>);</span><br><span class="line">        <span class="comment">//ä»¥ä¸‹ç”»å‡ºä¸€æ®µè¯´æ˜æ–‡å­—</span></span><br><span class="line">        g.setColor(Color.GRAY);</span><br><span class="line">        <span class="keyword">if</span> (player.vehicle == Vehicle.Basic) &#123;</span><br><span class="line">            g.drawString(player.fireCount &lt;= <span class="number">10</span> ? <span class="string">&quot;å“’å“’å“’å“’å“’â€¦â€¦&quot;</span> : player.fireCount == player.fireCD ? <span class="string">&quot;åŠ ç‰¹æ—åœäº†&quot;</span> : <span class="string">&quot;åŠ ç‰¹æ—è½¬å•Šï¼&quot;</span>,</span><br><span class="line">                    width / <span class="number">2</span> + <span class="number">60</span>, height + <span class="number">140</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            g.drawString(player.fireCount &lt;= <span class="number">0</span> ? <span class="string">&quot;å¼¹è¯è£…å¡«å®Œæ¯•&quot;</span> : <span class="string">&quot;è£…å¡«ä¸­â€¦&quot;</span>, width / <span class="number">2</span> + <span class="number">60</span>, height + <span class="number">140</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”»å‡º æ•Œäººæ•°é‡ï¼ˆè¿™ä¸ªæ–¹æ³•æ˜¯UIçš„ä¸€éƒ¨åˆ†ï¼Œç»Ÿè®¡æ•°é‡ï¼Œè€Œä¸æ˜¯ç”»å¦å…‹ï¼‰</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">drawEnemyNum</span><span class="params">(Graphics g)</span> &#123;</span><br><span class="line">        g.setFont(<span class="keyword">new</span> <span class="title class_">Font</span>(<span class="string">&quot;ç­‰çº¿&quot;</span>, Font.ITALIC + Font.BOLD, <span class="number">20</span>));</span><br><span class="line">        g.setColor(Color.BLACK);</span><br><span class="line">        g.drawString(<span class="string">&quot;é›·è¾¾å‘ç°æ•Œäººæ•°é‡ï¼š&quot;</span> + (maps[level].levelEnemyNum - deadEnemy.size()), (<span class="type">int</span>) (width * <span class="number">0.77</span>), height + <span class="number">22</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”»å‡º ç»éªŒå€¼ã€‚æœ‰å‡ ç‚¹å°±æœ‰å‡ é¢—çº¢æ˜Ÿè¢«ç‚¹äº®ã€‚</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">drawStars</span><span class="params">(Graphics g)</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> (player.vehicle.LEVEL_UP_REQUIRED) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">10</span>:</span><br><span class="line">                g.drawImage(player.enhance &gt;= <span class="number">10</span> ? InputImage.star : InputImage.nStar,</span><br><span class="line">                        <span class="number">280</span>, height + <span class="number">10</span>, <span class="number">30</span>, <span class="number">30</span>, <span class="built_in">this</span>);</span><br><span class="line">                g.drawImage(player.enhance &gt;= <span class="number">9</span> ? InputImage.star : InputImage.nStar,</span><br><span class="line">                        <span class="number">250</span>, height + <span class="number">10</span>, <span class="number">30</span>, <span class="number">30</span>, <span class="built_in">this</span>);</span><br><span class="line">                g.drawImage(player.enhance &gt;= <span class="number">8</span> ? InputImage.star : InputImage.nStar,</span><br><span class="line">                        <span class="number">220</span>, height + <span class="number">10</span>, <span class="number">30</span>, <span class="number">30</span>, <span class="built_in">this</span>);</span><br><span class="line">                g.drawImage(player.enhance &gt;= <span class="number">7</span> ? InputImage.star : InputImage.nStar,</span><br><span class="line">                        <span class="number">190</span>, height + <span class="number">10</span>, <span class="number">30</span>, <span class="number">30</span>, <span class="built_in">this</span>);</span><br><span class="line">                g.drawImage(player.enhance &gt;= <span class="number">6</span> ? InputImage.star : InputImage.nStar,</span><br><span class="line">                        <span class="number">160</span>, height + <span class="number">10</span>, <span class="number">30</span>, <span class="number">30</span>, <span class="built_in">this</span>);</span><br><span class="line">            <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">                g.drawImage(player.enhance &gt;= <span class="number">5</span> ? InputImage.star : InputImage.nStar,</span><br><span class="line">                        <span class="number">130</span>, height + <span class="number">10</span>, <span class="number">30</span>, <span class="number">30</span>, <span class="built_in">this</span>);</span><br><span class="line">            <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">                g.drawImage(player.enhance &gt;= <span class="number">4</span> ? InputImage.star : InputImage.nStar,</span><br><span class="line">                        <span class="number">100</span>, height + <span class="number">10</span>, <span class="number">30</span>, <span class="number">30</span>, <span class="built_in">this</span>);</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                g.drawImage(player.enhance &gt;= <span class="number">3</span> ? InputImage.star : InputImage.nStar,</span><br><span class="line">                        <span class="number">70</span>, height + <span class="number">10</span>, <span class="number">30</span>, <span class="number">30</span>, <span class="built_in">this</span>);</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                g.drawImage(player.enhance &gt;= <span class="number">2</span> ? InputImage.star : InputImage.nStar,</span><br><span class="line">                        <span class="number">40</span>, height + <span class="number">10</span>, <span class="number">30</span>, <span class="number">30</span>, <span class="built_in">this</span>);</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                g.drawImage(player.enhance &gt;= <span class="number">1</span> ? InputImage.star : InputImage.nStar,</span><br><span class="line">                        <span class="number">10</span>, height + <span class="number">10</span>, <span class="number">30</span>, <span class="number">30</span>, <span class="built_in">this</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                g.setColor(Color.GRAY);             <span class="comment">//ä¸èƒ½å‡çº§çš„å¦å…‹ï¼Œç”»ä¸€ä¸ªå°å°çš„åœ†</span></span><br><span class="line">                g.fillOval(<span class="number">40</span>, height + <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">drawPause</span><span class="params">(Graphics g)</span> &#123;</span><br><span class="line">        g.setFont(<span class="keyword">new</span> <span class="title class_">Font</span>(<span class="string">&quot;ç­‰çº¿&quot;</span>, Font.ITALIC + Font.BOLD, <span class="number">70</span>));</span><br><span class="line">        g.setColor(Color.DARK_GRAY);</span><br><span class="line">        g.drawString(<span class="string">&quot;æ¸¸æˆæš‚åœä¸­ï¼ŒæŒ‰ P é”®ç»§ç»­æ¸¸æˆ&quot;</span>, (<span class="type">int</span>) ((width / <span class="number">2</span>) * <span class="number">0.2</span>), (height / <span class="number">2</span> - <span class="number">100</span>));</span><br><span class="line">        <span class="keyword">if</span> (saved)&#123;</span><br><span class="line">            g.setFont(<span class="keyword">new</span> <span class="title class_">Font</span>(<span class="string">&quot;ç­‰çº¿&quot;</span>, Font.ITALIC + Font.BOLD, <span class="number">50</span>));</span><br><span class="line">            g.setColor(Color.DARK_GRAY);</span><br><span class="line">            g.drawString(<span class="string">&quot;å­˜æ¡£æˆåŠŸï¼&quot;</span>, (<span class="type">int</span>) ((width / <span class="number">2</span>) * <span class="number">0.8</span>), (height / <span class="number">2</span>));</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(loaded)&#123;</span><br><span class="line">            g.setFont(<span class="keyword">new</span> <span class="title class_">Font</span>(<span class="string">&quot;ç­‰çº¿&quot;</span>, Font.ITALIC + Font.BOLD, <span class="number">50</span>));</span><br><span class="line">            g.setColor(Color.DARK_GRAY);</span><br><span class="line">            g.drawString(<span class="string">&quot;è¯»æ¡£æˆåŠŸï¼&quot;</span>, (<span class="type">int</span>) ((width / <span class="number">2</span>) * <span class="number">0.8</span>), (height / <span class="number">2</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (deadEnemy.size() &gt;= maps[level].levelEnemyNum &amp;&amp; (!bossActive || !boss.alive))&#123;</span><br><span class="line">            g.setFont(<span class="keyword">new</span> <span class="title class_">Font</span>(<span class="string">&quot;é»‘ä½“&quot;</span>, Font.ITALIC + Font.BOLD, <span class="number">70</span>));</span><br><span class="line">            g.setColor(Color.ORANGE);</span><br><span class="line">            g.drawString(<span class="string">&quot;ä¸‹ä¸€æ³¢æ•Œäººæ¥è¿‘ä¸­ï¼&quot;</span>, (<span class="type">int</span>) ((width / <span class="number">2</span>) * <span class="number">0.5</span>), (<span class="type">int</span>)(height * <span class="number">0.8</span>));</span><br><span class="line">                                                                                        <span class="comment">//*****æ­¤å¤„éœ€è¦ä¿®æ”¹*****</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”»å‡º ç©å®¶å¦å…‹</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">drawPlayer</span><span class="params">(Graphics g)</span> &#123;</span><br><span class="line">        player.pause = <span class="built_in">this</span>.pause;</span><br><span class="line">        drawLivingTank(g, player);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”»å‡ºæ•Œäººå¦å…‹</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">drawEnemy</span><span class="params">(Graphics g)</span> &#123;</span><br><span class="line">        Iterator&lt;Tank&gt; iterator = enemy.iterator();</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            <span class="type">Tank</span> <span class="variable">temp</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">            <span class="keyword">if</span> (!temp.alive) &#123;                              <span class="comment">//è¿™ä¸ªåˆ†æ”¯ï¼Œå¦å…‹å·²è¢«æ‘§æ¯</span></span><br><span class="line">                temp.releaseCollisionSize();                <span class="comment">//æ¶ˆé™¤å…¶ç¢°æ’ä½“ç§¯</span></span><br><span class="line">                iterator.remove();</span><br><span class="line">                deadEnemy.add(temp);                        <span class="comment">//ä» æ•Œäººé›† æŠŠè¯¥å¦å…‹åˆ é™¤ï¼ŒåŠ å…¥ ç ´åå¦å…‹é›†</span></span><br><span class="line">                player.enhanced(temp.vehicle);              <span class="comment">//ç»™ç©å®¶ç»“ç®—ç»éªŒ</span></span><br><span class="line">                enemyPositions.put(enemyPosition[n], <span class="literal">false</span>);<span class="comment">//è¯¥å¦å…‹å ç”¨çš„ä½ç½®è¢«è§£æ”¾</span></span><br><span class="line">            &#125;</span><br><span class="line">            n++;</span><br><span class="line">        &#125;</span><br><span class="line">        creatEnemy();                       <span class="comment">//å°è¯•ç”Ÿæˆæ–°çš„å¦å…‹</span></span><br><span class="line">        iterator = enemy.iterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            <span class="type">Tank</span> <span class="variable">t</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">            t.pause = <span class="built_in">this</span>.pause;                <span class="comment">//æš‚åœè®¾ç½®</span></span><br><span class="line"><span class="comment">//            if (t.specialCount &gt; 0) &#123;</span></span><br><span class="line"><span class="comment">//                t.specialCount--;                                     //*****æ­¤å¤„éœ€è¦ä¿®æ”¹*****</span></span><br><span class="line"><span class="comment">//            &#125; else &#123;</span></span><br><span class="line">            drawLivingTank(g, t);       <span class="comment">//ç”»å‡ºæ‰€æœ‰ï¼ˆæ•Œäººçš„ï¼‰å¦å…‹</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (bossActive) &#123;</span><br><span class="line">            boss.pause = <span class="built_in">this</span>.pause;</span><br><span class="line">            drawBoss(g);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">drawBoss</span><span class="params">(Graphics g)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (boss.alive) &#123;</span><br><span class="line">            drawTank(g, boss);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            drawExplosion(g, boss);</span><br><span class="line">        &#125;</span><br><span class="line">        drawBullet(g, boss);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”»å‡ºè¢«æ‘§æ¯çš„å¦å…‹çš„æ®‹ç•™ç‰¹æ•ˆåŠå…¶æ‰€æœ‰æ®‹ç•™å­å¼¹</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">drawDeadTank</span><span class="params">(Graphics g)</span> &#123;</span><br><span class="line">        Iterator&lt;Tank&gt; iterator = deadEnemy.iterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            <span class="type">Tank</span> <span class="variable">temp</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">            temp.pause = <span class="built_in">this</span>.pause;</span><br><span class="line">            <span class="keyword">if</span> (temp.specialCount &gt; <span class="number">0</span>) &#123;          <span class="comment">//æ•Œäººçš„ç‰¹æ®Šè®¡æ•°æ®‹ç•™æ—¶ï¼Œç”»å‡ºå…¶çˆ†ç‚¸æ•ˆæœ</span></span><br><span class="line">                temp.specialCount--;                                        <span class="comment">//*****æ­¤å¤„éœ€è¦ä¿®æ”¹*****</span></span><br><span class="line">                drawExplosion(g, temp);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (temp.bullets.size() &gt; <span class="number">0</span>) &#123;          <span class="comment">//æ•Œäººçš„å­å¼¹æœ‰æ®‹ç•™æ—¶ï¼Œç”»å‡ºè¯¥å­å¼¹</span></span><br><span class="line">                drawBullet(g, temp);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”»å‡ºå­˜æ´»çš„å¦å…‹åŠå…¶æ‰€æœ‰å­å¼¹</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">drawLivingTank</span><span class="params">(Graphics g, Tank tank)</span> &#123;</span><br><span class="line">        <span class="comment">//ä»¥ä¸‹éƒ¨åˆ†ç”»å‡ºå¦å…‹</span></span><br><span class="line">        <span class="keyword">if</span> (tank.alive) &#123;</span><br><span class="line">            drawTank(g, tank);       <span class="comment">//å­˜æ´»çš„åœºåˆï¼Œç”»å‡ºå¦å…‹</span></span><br><span class="line">            drawBullet(g, tank);                <span class="comment">//ç”»å‡ºå­å¼¹</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”»å¦å…‹ã€‚è¿™ä¸ªæ–¹æ³•èƒ½ç”»å‡ºæœå‘æ­£ç¡®çš„å¦å…‹ã€‚</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">drawTank</span><span class="params">(Graphics g, Tank tank)</span> &#123;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">b</span> <span class="operator">=</span> dirState2(tank.dir);</span><br><span class="line">        <span class="keyword">switch</span> (tank.vehicle) &#123;</span><br><span class="line">            <span class="keyword">case</span> Tank_Lv1:</span><br><span class="line">                image = dirState(tank.dir) ? InputImage.tank1 : InputImage.tank1r;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> Tank_Lv2:</span><br><span class="line">                image = dirState(tank.dir) ? InputImage.tank2 : InputImage.tank2r;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> Tank_Lv3:</span><br><span class="line">                image = dirState(tank.dir) ? InputImage.tank3 : InputImage.tank3r;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> Tank_E1:</span><br><span class="line">                image = dirState(tank.dir) ? InputImage.tankE1 : InputImage.tankE1r;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> Tank_E2:</span><br><span class="line">                image = dirState(tank.dir) ? InputImage.tankE2 : InputImage.tankE2r;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> Tank_E3:</span><br><span class="line">                image = dirState(tank.dir) ? InputImage.tankE3 : InputImage.tankE3r;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> Tank_Special:</span><br><span class="line">                image = dirState(tank.dir) ? InputImage.tankSp : InputImage.tankSpr;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> Basic:</span><br><span class="line">                <span class="keyword">if</span> (tank.fireCount &lt;= <span class="number">3</span>) &#123;</span><br><span class="line">                    image = dirState(tank.dir) ? InputImage.basicL : InputImage.basicLR;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    image = dirState(tank.dir) ? InputImage.basic : InputImage.basicR;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        g.drawImage(image, b ? tank.x + <span class="number">80</span> : tank.x, b ? tank.y + <span class="number">80</span> : tank.y, b ? -<span class="number">80</span> : <span class="number">80</span>, b ? -<span class="number">80</span> : <span class="number">80</span>, <span class="built_in">this</span>);</span><br><span class="line">        <span class="keyword">if</span> (tank.invincible &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">switch</span> (tank.vehicle) &#123;             <span class="comment">//æ— æ•ŒæŒç»­ä¸­çš„åœºåˆï¼Œç”»å‡ºæŠ¤ç›¾</span></span><br><span class="line">                <span class="keyword">case</span> Tank_Special:</span><br><span class="line">                <span class="keyword">case</span> Basic:</span><br><span class="line">                    image = dirState(tank.dir) ? InputImage.bubble : InputImage.bubbleR;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                    image = dirState(tank.dir) ? InputImage.bubbleE : InputImage.bubbleER;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            g.drawImage(image, tank.x - <span class="number">5</span>, tank.y - <span class="number">5</span>, <span class="number">90</span>, <span class="number">90</span>, <span class="built_in">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”»å‡ºå­å¼¹ã€‚è¿™ä¸ªæ–¹æ³•ä¹Ÿä¼šåˆ¤æ–­å­å¼¹çš„çŠ¶æ€ï¼ˆæ˜¯å¦å­˜æ´»ï¼‰</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">drawBullet</span><span class="params">(Graphics g, Tank tank)</span> &#123;</span><br><span class="line">        Iterator&lt;Bullet&gt; iterator = tank.bullets.iterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            <span class="type">Bullet</span> <span class="variable">temp</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">            temp.pause = pause;</span><br><span class="line">            <span class="keyword">if</span> (!temp.active) &#123;                 <span class="comment">//å­å¼¹æ¶ˆäº¡çš„åœºåˆï¼Œç§»é™¤å­å¼¹</span></span><br><span class="line">                iterator.remove();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;                            <span class="comment">//èµ°åˆ°è¿™é‡Œï¼Œè¯´æ˜å­å¼¹å­˜æ´»ã€‚</span></span><br><span class="line">                <span class="keyword">switch</span> (tank.party) &#123;           <span class="comment">//çœ‹çœ‹æ˜¯å“ªä¸ªé˜µè¥å‘å‡ºçš„å­å¼¹ï¼Œå»åˆ¤å®šåˆ«çš„é˜µè¥çš„å¦å…‹</span></span><br><span class="line">                    <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                        <span class="keyword">if</span> (bossActive &amp;&amp; checkHit(boss, temp, tank)) &#123;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">for</span> (Tank t : enemy) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (checkHit(t, temp, tank)) &#123;      <span class="comment">//éå†æ•Œå¦å…‹ï¼Œçœ‹çœ‹æ‰“ä¸­äº†è°ã€‚æ‰“ä¸­åˆ™åœæ­¢åˆ¤å®š</span></span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                        checkHit(player, temp, tank);           <span class="comment">//çœ‹çœ‹æœ‰æ²¡æœ‰å‡»ä¸­ç©å®¶</span></span><br><span class="line">                    <span class="keyword">default</span>:</span><br><span class="line">                &#125;</span><br><span class="line">                drawBullet(g, tank.vehicle, temp.getDir(), temp.getX(), temp.getY());       <span class="comment">//ç”»å‡ºå­å¼¹</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”»å‡ºå­å¼¹ã€‚è¿™ä¸ªæ–¹æ³•é€šå¸¸ç”±ä¸Šä¸ªæ–¹æ³•è°ƒç”¨ï¼Œèƒ½ç”»å‡ºæœå‘æ­£ç¡®çš„å­å¼¹</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">drawBullet</span><span class="params">(Graphics g, Vehicle vehicle, <span class="type">char</span> dir, <span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">b</span> <span class="operator">=</span> dirState2(dir);</span><br><span class="line">        <span class="keyword">switch</span> (vehicle.BULLET) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;n&#x27;</span>:</span><br><span class="line">                image = dirState(dir) ? InputImage.nBullet : InputImage.nBulletR;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;e&#x27;</span>:</span><br><span class="line">                image = dirState(dir) ? InputImage.eBullet : InputImage.eBulletR;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;g&#x27;</span>:</span><br><span class="line">                image = dirState(dir) ? InputImage.gBullet : InputImage.gBulletR;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        g.drawImage(image, b ? x + <span class="number">10</span> : x, b ? y + <span class="number">10</span> : y, b ? -<span class="number">10</span> : <span class="number">10</span>, b ? -<span class="number">10</span> : <span class="number">10</span>, <span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”»å‡ºçˆ†ç‚¸ã€‚çˆ†ç‚¸åˆ†ä¸ºå‡ ä¸ªé˜¶æ®µï¼Œè€Œä¸”ä¸åŒå¦å…‹ä¹Ÿæœ‰ä¸åŒçˆ†ç‚¸ç‰¹æ•ˆ</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">drawExplosion</span><span class="params">(Graphics g, Tank tank)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (tank.specialCount &gt; <span class="number">350</span>) &#123;</span><br><span class="line">            drawTank(g, tank);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">switch</span> (tank.vehicle) &#123;</span><br><span class="line">            <span class="keyword">case</span> Tank_E3:</span><br><span class="line">                <span class="keyword">if</span> (tank.specialCount &lt; <span class="number">600</span> &amp;&amp; tank.specialCount &gt;= <span class="number">100</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (tank.specialCount &gt;= <span class="number">500</span>) &#123;</span><br><span class="line">                        image = InputImage.explosion1;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (tank.specialCount &gt;= <span class="number">400</span>) &#123;</span><br><span class="line">                        image = InputImage.explosion2;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (tank.specialCount &gt;= <span class="number">300</span>) &#123;</span><br><span class="line">                        image = InputImage.explosion3;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (tank.specialCount &gt;= <span class="number">200</span>) &#123;</span><br><span class="line">                        image = InputImage.explosion4;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        image = InputImage.explosion5;</span><br><span class="line">                    &#125;</span><br><span class="line">                    g.drawImage(image, tank.x, tank.y, <span class="number">80</span>, <span class="number">80</span>, <span class="built_in">this</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> Tank_E1:</span><br><span class="line">            <span class="keyword">case</span> Tank_E2:</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">if</span> (tank.specialCount &lt; <span class="number">450</span> &amp;&amp; tank.specialCount &gt;= <span class="number">50</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (tank.specialCount &gt;= <span class="number">250</span>) &#123;</span><br><span class="line">                        image = InputImage.explosion1;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (tank.specialCount &gt; <span class="number">100</span>) &#123;</span><br><span class="line">                        image = InputImage.explosion2;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        image = InputImage.explosion3;</span><br><span class="line">                    &#125;</span><br><span class="line">                    g.drawImage(image, tank.x, tank.y, <span class="number">80</span>, <span class="number">80</span>, <span class="built_in">this</span>);</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        tank.specialCount = Math.max(tank.specialCount, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¸‹é¢è¿™ä¸¤ä¸ªæ–¹æ³•å¯ä»¥å¸®åŠ©å…¶ä»–æ–¹æ³•ç”»å‡ºæ­£ç¡®æœå‘çš„å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">dirState</span><span class="params">(<span class="type">char</span> dir)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> dir == <span class="string">&#x27;u&#x27;</span> || dir == <span class="string">&#x27;d&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">dirState2</span><span class="params">(<span class="type">char</span> dir)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> dir == <span class="string">&#x27;l&#x27;</span> || dir == <span class="string">&#x27;d&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ£€æŸ¥å­å¼¹æ˜¯å¦å‡»ä¸­ç›®æ ‡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">checkHit</span><span class="params">(Tank tank, Bullet bullet, Tank from)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (hit(tank, bullet) &amp;&amp; !bullet.hasHit(tank)) &#123;        <span class="comment">//æ£€æŸ¥æ˜¯å¦å‡»ä¸­ç›®æ ‡ åŠ ç›®æ ‡æ˜¯å¦å·²è¢«å‡»ä¸­è¿‡</span></span><br><span class="line">            bullet.setHit(tank);</span><br><span class="line">            <span class="keyword">if</span> (tank.invincible &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                bullet.pierce = <span class="number">0</span>;              <span class="comment">//æ’åˆ°æ— æ•Œçš„å¦å…‹æ—¶ï¼Œå­å¼¹ç›´æ¥æŠ¥é”€</span></span><br><span class="line">            &#125;</span><br><span class="line">            bullet.active = bullet.pierce &gt; <span class="number">0</span>;          <span class="comment">//å­å¼¹ç©¿é€é™ä¸º 0 çš„åœºåˆï¼Œå­å¼¹æ¶ˆäº¡</span></span><br><span class="line">            <span class="keyword">if</span> (!tank.takeDamage(from, bullet.getDir())) &#123;                      <span class="comment">//å¦å…‹ä¼¤å®³è®¡æ•°å®Œåï¼Œåœ¨è¿™é‡ŒæŠŠ HP å½’ 0 çš„å¦å…‹è®°ä¸ºå·²é”€æ¯</span></span><br><span class="line">                tank.alive = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//çœ‹çœ‹å­å¼¹æ˜¯å¦å‡»ä¸­å¦å…‹ã€‚ç”±ä¸Šä¸ªæ–¹æ³•è°ƒç”¨</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">hit</span><span class="params">(Tank tank, Bullet bullet)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!tank.alive) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (tank.vehicle == Vehicle.Basic) &#123;</span><br><span class="line">            <span class="keyword">return</span> pIn(tank.x + <span class="number">30</span>, <span class="number">20</span>, bullet.getX() + <span class="number">5</span>) &amp;&amp; pIn(tank.y + <span class="number">30</span>, <span class="number">20</span>, bullet.getY() + <span class="number">5</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">switch</span> (tank.getDir()) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;u&#x27;</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;d&#x27;</span>:</span><br><span class="line">                <span class="keyword">return</span> pIn(tank.x + <span class="number">20</span>, <span class="number">40</span>, bullet.getX() + <span class="number">5</span>) &amp;&amp; pIn(tank.y + <span class="number">3</span>, <span class="number">76</span>, bullet.getY() + <span class="number">5</span>);</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;r&#x27;</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;l&#x27;</span>:</span><br><span class="line">                <span class="keyword">return</span> pIn(tank.x + <span class="number">3</span>, <span class="number">76</span>, bullet.getX() + <span class="number">5</span>) &amp;&amp; pIn(tank.y + <span class="number">20</span>, <span class="number">40</span>, bullet.getY() + <span class="number">5</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//çœ‹çœ‹æŸä¸ªåæ ‡ï¼ˆæ¨ªåæ ‡æˆ–çºµåæ ‡ï¼‰æ˜¯å¦åœ¨[p, p + w]èŒƒå›´å†…</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">pIn</span><span class="params">(<span class="type">int</span> p, <span class="type">int</span> w, <span class="type">int</span> toCheck)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> toCheck &gt;= p &amp;&amp; toCheck &lt;= (p + w);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">keyTyped</span><span class="params">(KeyEvent e)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç›‘è§†å™¨ã€‚ä»¥ä¸‹æ–¹å¼ä¿è¯äº†åŠ¨ç”»çš„æµç•…åº¦</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">keyPressed</span><span class="params">(KeyEvent e)</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> (e.getKeyCode()) &#123;</span><br><span class="line">            <span class="keyword">case</span> KeyEvent.VK_W:</span><br><span class="line">                isPressingW = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> KeyEvent.VK_A:</span><br><span class="line">                isPressingA = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> KeyEvent.VK_D:</span><br><span class="line">                isPressingD = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> KeyEvent.VK_S:</span><br><span class="line">                isPressingS = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> KeyEvent.VK_J:         <span class="comment">//J æ˜¯å¼€ç«é”®</span></span><br><span class="line">                isFiring = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line"><span class="comment">//            //===================ä»¥ä¸‹ä¸ºæµ‹è¯•ç”¨=====================</span></span><br><span class="line"><span class="comment">//            case KeyEvent.VK_Q:                                     //è¯¥ case ä»…æµ‹è¯•ç”¨ã€‚  åŠ¡å¿…åˆ é™¤ï¼åŠ¡å¿…åˆ é™¤ï¼</span></span><br><span class="line"><span class="comment">//                for (Tank tank : enemy) &#123;</span></span><br><span class="line"><span class="comment">//                    tank.alive = false;</span></span><br><span class="line"><span class="comment">//                    tank.releaseCollisionSize();</span></span><br><span class="line"><span class="comment">//                &#125;</span></span><br><span class="line"><span class="comment">//                break;</span></span><br><span class="line"><span class="comment">//            case KeyEvent.VK_E:                                     //è¯¥ case ä»…æµ‹è¯•ç”¨ã€‚  åŠ¡å¿…åˆ é™¤ï¼åŠ¡å¿…åˆ é™¤ï¼</span></span><br><span class="line"><span class="comment">//                deadEnemy.clear();</span></span><br><span class="line"><span class="comment">//                break;</span></span><br><span class="line"><span class="comment">//            case KeyEvent.VK_1:                                     //è¯¥ case ä»…æµ‹è¯•ç”¨ã€‚  åŠ¡å¿…åˆ é™¤ï¼åŠ¡å¿…åˆ é™¤ï¼</span></span><br><span class="line"><span class="comment">//                player.setVehicle(Vehicle.Tank_Lv1);</span></span><br><span class="line"><span class="comment">//                player.releaseCollisionSize();</span></span><br><span class="line"><span class="comment">//                break;</span></span><br><span class="line"><span class="comment">//            case KeyEvent.VK_2:                                     //è¯¥ case ä»…æµ‹è¯•ç”¨ã€‚  åŠ¡å¿…åˆ é™¤ï¼åŠ¡å¿…åˆ é™¤ï¼</span></span><br><span class="line"><span class="comment">//                player.setVehicle(Vehicle.Tank_Lv2);</span></span><br><span class="line"><span class="comment">//                player.releaseCollisionSize();</span></span><br><span class="line"><span class="comment">//                break;</span></span><br><span class="line"><span class="comment">//            case KeyEvent.VK_3:                                     //è¯¥ case ä»…æµ‹è¯•ç”¨ã€‚  åŠ¡å¿…åˆ é™¤ï¼åŠ¡å¿…åˆ é™¤ï¼</span></span><br><span class="line"><span class="comment">//                player.setVehicle(Vehicle.Tank_Lv3);</span></span><br><span class="line"><span class="comment">//                player.releaseCollisionSize();</span></span><br><span class="line"><span class="comment">//                break;</span></span><br><span class="line"><span class="comment">//            case KeyEvent.VK_4:                                     //è¯¥ case ä»…æµ‹è¯•ç”¨ã€‚  åŠ¡å¿…åˆ é™¤ï¼åŠ¡å¿…åˆ é™¤ï¼</span></span><br><span class="line"><span class="comment">//                player.setVehicle(Vehicle.Tank_Special);</span></span><br><span class="line"><span class="comment">//                player.releaseCollisionSize();</span></span><br><span class="line"><span class="comment">//                break;</span></span><br><span class="line"><span class="comment">//            case KeyEvent.VK_5:                                     //è¯¥ case ä»…æµ‹è¯•ç”¨ã€‚  åŠ¡å¿…åˆ é™¤ï¼åŠ¡å¿…åˆ é™¤ï¼</span></span><br><span class="line"><span class="comment">//                player.setVehicle(Vehicle.Basic);</span></span><br><span class="line"><span class="comment">//                player.releaseCollisionSize();</span></span><br><span class="line"><span class="comment">//                break;</span></span><br><span class="line"><span class="comment">//            case KeyEvent.VK_Z:                                     //è¯¥ case ä»…æµ‹è¯•ç”¨ã€‚  åŠ¡å¿…åˆ é™¤ï¼åŠ¡å¿…åˆ é™¤ï¼</span></span><br><span class="line"><span class="comment">//                player.buffedDef = 100;</span></span><br><span class="line"><span class="comment">//                break;</span></span><br><span class="line"><span class="comment">//            case KeyEvent.VK_X:                                     //è¯¥ case ä»…æµ‹è¯•ç”¨ã€‚  åŠ¡å¿…åˆ é™¤ï¼åŠ¡å¿…åˆ é™¤ï¼</span></span><br><span class="line"><span class="comment">//                player.buffedDef = 0;</span></span><br><span class="line"><span class="comment">//                break;</span></span><br><span class="line"><span class="comment">//            case KeyEvent.VK_C:                                     //è¯¥ case ä»…æµ‹è¯•ç”¨ã€‚  åŠ¡å¿…åˆ é™¤ï¼åŠ¡å¿…åˆ é™¤ï¼</span></span><br><span class="line"><span class="comment">//                player.invincible = 1000000;</span></span><br><span class="line"><span class="comment">//                break;</span></span><br><span class="line"><span class="comment">//            case KeyEvent.VK_V:                                     //è¯¥ case ä»…æµ‹è¯•ç”¨ã€‚  åŠ¡å¿…åˆ é™¤ï¼åŠ¡å¿…åˆ é™¤ï¼</span></span><br><span class="line"><span class="comment">//                player.invincible = 0;</span></span><br><span class="line"><span class="comment">//                break;</span></span><br><span class="line">            <span class="comment">//===================ä»¥ä¸Šä¸ºæµ‹è¯•ç”¨=====================</span></span><br><span class="line">        &#125;</span><br><span class="line">        isGoing();          <span class="comment">//çœ‹çœ‹ç©å®¶æ˜¯å¦æ­£åœ¨ç§»åŠ¨</span></span><br><span class="line">        isFiring();         <span class="comment">//çœ‹çœ‹ç©å®¶æ˜¯å¦æ­£åœ¨å¼€ç«</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//åŒä¸Š</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">keyReleased</span><span class="params">(KeyEvent e)</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> (e.getKeyCode()) &#123;</span><br><span class="line">            <span class="keyword">case</span> KeyEvent.VK_W:             <span class="comment">//å‘ä¸Š</span></span><br><span class="line">                isPressingW = <span class="literal">false</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> KeyEvent.VK_A:             <span class="comment">//å‘å·¦</span></span><br><span class="line">                isPressingA = <span class="literal">false</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> KeyEvent.VK_D:             <span class="comment">//å‘å³</span></span><br><span class="line">                isPressingD = <span class="literal">false</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> KeyEvent.VK_S:             <span class="comment">//å‘ä¸‹</span></span><br><span class="line">                isPressingS = <span class="literal">false</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> KeyEvent.VK_J:             <span class="comment">//å¼€ç«</span></span><br><span class="line">                isFiring = <span class="literal">false</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> KeyEvent.VK_P:             <span class="comment">//æš‚åœ</span></span><br><span class="line">                gamePause();</span><br><span class="line">                saved = <span class="literal">false</span>;</span><br><span class="line">                loaded = <span class="literal">false</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> KeyEvent.VK_I:             <span class="comment">//è¯»æ¡£ï¼ˆéœ€è¦æš‚åœï¼‰</span></span><br><span class="line">                toLoad = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> KeyEvent.VK_O:             <span class="comment">//å­˜æ¡£ï¼ˆéœ€è¦æš‚åœï¼‰</span></span><br><span class="line">                toSave = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        isGoing();</span><br><span class="line">        isFiring();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ›´æ–°ç©å®¶çš„ç§»åŠ¨çŠ¶æ€</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">isGoing</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!player.pause) &#123;</span><br><span class="line">            <span class="keyword">if</span> (isPressingW) &#123;</span><br><span class="line">                player.dir = <span class="string">&#x27;u&#x27;</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (isPressingS) &#123;</span><br><span class="line">                player.dir = <span class="string">&#x27;d&#x27;</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (isPressingA) &#123;</span><br><span class="line">                player.dir = <span class="string">&#x27;l&#x27;</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (isPressingD) &#123;</span><br><span class="line">                player.dir = <span class="string">&#x27;r&#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        player.isMoving = isPressingA || isPressingS || isPressingD || isPressingW;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ›´æ–°ç©å®¶çš„å¼€ç«çŠ¶æ€</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">isFiring</span><span class="params">()</span> &#123;</span><br><span class="line">        player.isFiring = isFiring;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”Ÿæˆæ•Œäººï¼Œç›´åˆ°å…è®¸çš„æœ€å¤§æ•°é‡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">creatEnemy</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (enemy.size() &lt; enemyMax &amp;&amp; enemy.size() &lt; maps[level].levelEnemyNum - deadEnemy.size()) &#123;</span><br><span class="line">            <span class="type">int</span>[] temp = <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span>[] ints : enemyPosition) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!enemyPositions.get(ints)) &#123;            <span class="comment">//ä¸ºå¦å…‹åˆ†é…åˆå§‹ä½ç½®</span></span><br><span class="line">                    temp = ints;</span><br><span class="line">                    enemyPositions.put(ints, <span class="literal">true</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (temp == <span class="literal">null</span>) &#123;                 <span class="comment">//åº”è¯¥ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ä½†ï¼Œä»¥é˜²ä¸‡ä¸€ï¼ŒåŠ ä¸Šè¿™å¥</span></span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">Tank</span> <span class="variable">tempTank</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Enemy</span>(temp[<span class="number">0</span>], temp[<span class="number">1</span>], maps[level]);</span><br><span class="line">            <span class="keyword">if</span> (deadEnemy.size() == <span class="number">0</span>) &#123;</span><br><span class="line">                tempTank.specialCount = <span class="number">0</span>;          <span class="comment">//å¦å…‹æœ‰å»¶è¿Ÿæ˜¾ç¤ºã€‚è¿™é‡Œå–æ¶ˆäº†ç¬¬ä¸€ç»„å¦å…‹ï¼ˆåˆå§‹æ•Œäººå¦å…‹ï¼‰çš„å»¶è¿Ÿæ˜¾ç¤º</span></span><br><span class="line">            &#125;</span><br><span class="line">            enemy.add(tempTank);         <span class="comment">//åœ¨ æ•Œäººé›† ä¸­æ·»åŠ æ–°çš„å¦å…‹</span></span><br><span class="line">            tempTank.start();            <span class="comment">//å¯åŠ¨è¯¥æ–°å¦å…‹çº¿ç¨‹</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¿™ä¸ªæ–¹æ³•æœ‰ä¸¤ä¸ªä½œç”¨ï¼š</span></span><br><span class="line">    <span class="comment">//  1. å…¶ä»–æ•Œäººå…¨ç­æ—¶ï¼Œæ¿€æ´» BOSS</span></span><br><span class="line">    <span class="comment">//  2. æ‰€æœ‰æ•Œäººå…¨ç­æ—¶ï¼Œè¿›å…¥ä¸‹ä¸€å…³</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">checkLevelClear</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (deadEnemy.size() == maps[level].levelEnemyNum &amp;&amp; !bossActive &amp;&amp; boss != <span class="literal">null</span> &amp;&amp; boss.alive) &#123;</span><br><span class="line">            boss.start();</span><br><span class="line">            bossActive = <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (deadEnemy.size() &gt;= maps[level].levelEnemyNum &amp;&amp; (boss == <span class="literal">null</span> || !boss.alive)) &#123;</span><br><span class="line">            gameSuspend = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å…³å¡é—´è®¾ç½®çŸ­æš‚åœé¡¿</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pauseBetweenLevels</span><span class="params">(<span class="type">int</span> time)</span> &#123;</span><br><span class="line">        gameSuspend = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Timing</span>(time)).start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ¯æ¬¡è°ƒç”¨ä¼šåˆ‡æ¢ æš‚åœçŠ¶æ€ã€‚</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">gamePause</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.pause = !<span class="built_in">this</span>.pause;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¿›å…¥ä¸‹ä¸€å…³æ—¶ï¼ŒåŠ è½½ä¸‹ä¸€å…³æ•°æ®</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">nextLevel</span><span class="params">()</span> &#123;</span><br><span class="line">        player.releaseCollisionSize();</span><br><span class="line">        player.x = <span class="number">200</span>;</span><br><span class="line">        player.y = height - <span class="number">200</span>;</span><br><span class="line">        level++;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; maps[level].mapData.length; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; maps[level].mapData[i].length; j++) &#123;</span><br><span class="line">                inputMapData(i, j);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span>[] ints : enemyPosition) &#123;</span><br><span class="line">            enemyPositions.put(ints, <span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (Tank tank : deadEnemy) &#123;</span><br><span class="line">            tank.releaseCollisionSize();</span><br><span class="line">        &#125;</span><br><span class="line">        enemy.clear();</span><br><span class="line">        deadEnemy.clear();</span><br><span class="line">        player.lifeRemains = player.vehicle.LIFE;</span><br><span class="line">        player.invincible = <span class="number">0</span>;</span><br><span class="line">        gameSuspend = <span class="literal">false</span>;</span><br><span class="line">        boss = maps[level].boss;</span><br><span class="line">        <span class="keyword">if</span> (boss != <span class="literal">null</span>) &#123;</span><br><span class="line">            boss.x = Math.max(width / <span class="number">2</span> - <span class="number">40</span>, <span class="number">0</span>);</span><br><span class="line">            boss.y = <span class="number">70</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        bossActive = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä» Map ç±»ä¸­ åŠ è½½æ—¢å®šçš„åœ°å›¾æ•°æ®</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">inputMapData</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>; k &lt; <span class="number">40</span>; k++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">l</span> <span class="operator">=</span> <span class="number">0</span>; l &lt; <span class="number">40</span>; l++) &#123;</span><br><span class="line">                mapData[(x * <span class="number">40</span>) + k][(y * <span class="number">40</span>) + l][<span class="number">1</span>] = maps[level].mapData[x][y][<span class="number">1</span>];</span><br><span class="line">                mapData[(x * <span class="number">40</span>) + k][(y * <span class="number">40</span>) + l][<span class="number">0</span>] = maps[level].mapData[x][y][<span class="number">0</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;                                                                           <span class="comment">//*****æ­¤å¤„éœ€è¦ä¿®æ”¹*****</span></span><br><span class="line">        <span class="comment">//è¿™é‡Œéœ€è¦å¯¹ åœ°å›¾é€»è¾‘ã€å¦å…‹è¡Œè¿›é€»è¾‘ éƒ½è¿›è¡Œä¿®æ”¹ã€‚</span></span><br><span class="line">        <span class="comment">// ç°è¡Œæ–¹æ³•æ˜¯ï¼šç”± mapData[][] è®°å½•æ¯ä¸ªåƒç´ çš„æ•°æ®ã€‚æ¯ä¸ªåƒç´ ç‚¹çš„å ç”¨æƒ…å†µå®æ—¶æ›´æ–°ã€‚</span></span><br><span class="line">        <span class="comment">// æ”¹æˆï¼šç”± mapData[][] è®°å½•æ‰€æœ‰ 40 * 40 æ–¹æ ¼çš„æ•°æ®ã€‚</span></span><br><span class="line">        <span class="comment">//      ç›¸ä¿¡è¿™ä¸ªåŠæ³•åº”è¯¥èƒ½è§£å†³ç°è¡Œæ–¹æ³•å¶å‘çš„ç©ºæ°”å¢™é—®é¢˜ï¼Œæ‰©å±•æ€§ä¹Ÿä¼šæ›´å¥½ã€‚å­˜æ¡£å¤§å°ä¹Ÿèƒ½ç¼©å°ï¼Œå› è€Œä¹Ÿæœ‰æœºä¼šä¼˜åŒ–å­˜æ¡£é€»è¾‘ã€‚</span></span><br><span class="line">        <span class="comment">//      ç›®å‰çš„ä»£ç åŸºæœ¬å…¼å®¹è¿™ä¸ªæ–°æ–¹æ³•ã€‚Map ç±»çš„æ•°æ®æœ¬æ¥å°±æ˜¯ 40 * 40 æ–¹æ ¼æ¨¡å¼ã€‚åœ°å›¾å¤§å°ã€å„ç±»æ¨¡å‹å°ºå¯¸ä¹Ÿéƒ½æ˜¯ 40 çš„æ•´æ•°å€</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¯»æ¡£</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">loadData</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (pause) &#123;</span><br><span class="line">            <span class="type">ObjectInputStream</span> <span class="variable">ois</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (!TankGame.savePath.exists()) &#123;</span><br><span class="line">                    TankGame.savePath.createNewFile();</span><br><span class="line">                &#125;</span><br><span class="line">                ois = <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(TankGame.savePath));</span><br><span class="line">                <span class="keyword">if</span>((MyPanel)ois.readObject() != <span class="literal">null</span>)&#123;</span><br><span class="line">                    player = (Player) ois.readObject();</span><br><span class="line"><span class="comment">//                    mapData = (int[][][]) ois.readObject();</span></span><br><span class="line">                    enemy = (Vector&lt;Tank&gt;) ois.readObject();</span><br><span class="line">                    deadEnemy = (Vector&lt;Tank&gt;) ois.readObject();</span><br><span class="line">                    enemyPositions = (LinkedHashMap&lt;<span class="type">int</span>[], Boolean&gt;) ois.readObject();</span><br><span class="line">                    enemyPosition = (<span class="type">int</span>[][]) ois.readObject();</span><br><span class="line">                    maps = (Map[]) ois.readObject();</span><br><span class="line">                    boss = (Tank) ois.readObject();</span><br><span class="line">                    level = ois.readInt();</span><br><span class="line">                    bossActive = ois.readBoolean();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException | ClassNotFoundException ex) &#123;</span><br><span class="line">                ex.printStackTrace();</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    ois.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException ex) &#123;</span><br><span class="line">                    ex.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            pause = <span class="literal">true</span>;</span><br><span class="line">            loaded = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; maps[level].mapData.length; i++) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; maps[level].mapData[i].length; j++) &#123;</span><br><span class="line">                    inputMapData(i, j);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (Tank tank : enemy) &#123;</span><br><span class="line">                tank.start();</span><br><span class="line">                <span class="keyword">for</span> (Bullet bullet : tank.bullets) &#123;</span><br><span class="line">                    bullet.start();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (Tank tank : deadEnemy) &#123;</span><br><span class="line">                <span class="keyword">for</span> (Bullet bullet : tank.bullets) &#123;</span><br><span class="line">                    bullet.start();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(bossActive &amp;&amp; boss.alive)&#123;</span><br><span class="line">                boss.start();</span><br><span class="line">            &#125;</span><br><span class="line">            player.start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å­˜æ¡£</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">saveData</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (pause) &#123;</span><br><span class="line">            <span class="type">ObjectOutputStream</span> <span class="variable">oos</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (!TankGame.savePath.exists()) &#123;</span><br><span class="line">                    TankGame.savePath.createNewFile();</span><br><span class="line">                &#125;</span><br><span class="line">                oos = <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(TankGame.savePath));</span><br><span class="line">                oos.writeObject(TankGame.mp);</span><br><span class="line">                oos.writeObject(player);</span><br><span class="line"><span class="comment">//                oos.writeObject(mapData);         //å ç”¨å¤ªå¤§</span></span><br><span class="line">                oos.writeObject(enemy);</span><br><span class="line">                oos.writeObject(deadEnemy);</span><br><span class="line">                oos.writeObject(enemyPositions);</span><br><span class="line">                oos.writeObject(enemyPosition);</span><br><span class="line">                oos.writeObject(maps);</span><br><span class="line">                oos.writeObject(boss);</span><br><span class="line">                oos.writeInt(level);</span><br><span class="line">                oos.writeBoolean(bossActive);</span><br><span class="line">                saved = <span class="literal">true</span>;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException ex) &#123;</span><br><span class="line">                ex.printStackTrace();</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    oos.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException ex) &#123;</span><br><span class="line">                    ex.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>Tank.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.melody.tank_game;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.util.Vector;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Melody</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//å¦å…‹ç±»ã€‚è¿™æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼ŒPlayer å’Œ Enemy ç±»ä¼šç»§æ‰¿æ­¤ç±»</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Tank</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;             <span class="comment">//ä¸ºä»€ä¹ˆæ˜¯ ç»§æ‰¿Thread è€Œä¸æ˜¯ å®ç°Runnableï¼Ÿå› ä¸ºæˆ‘å†™è¿™äº›ä»£ç çš„æ—¶å€™è¿˜æ²¡å­¦åˆ°é‚£é‡Œâ€¦â€¦</span></span><br><span class="line">    <span class="comment">/*ä»ä¸Šåˆ°ä¸‹ä¾æ¬¡æ˜¯ï¼šæ¨ªåæ ‡ã€çºµåæ ‡ã€å¦å…‹ç±»å‹ã€æ–¹å‘ã€å½“å‰ç”Ÿå‘½å€¼ã€é€Ÿåº¦å¢å¹…ã€æ”»é€Ÿå¢å¹…ã€æ”»å‡»èŒƒå›´å¢å¹…ã€æ”»å‡»åŠ›å¢å¹…ã€é˜²å¾¡åŠ›å¢å¹…ã€</span></span><br><span class="line"><span class="comment">                    å¼€ç«é—´éš”ã€å¼€ç«é—´éš”è®¡æ—¶ã€å­å¼¹é›†ã€æ˜¯å¦å­˜æ´»ã€æ— æ•ŒçŠ¶æ€æŒç»­æ—¶é—´ã€é˜µè¥ã€æ­»äº¡è®¡æ—¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> x;</span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> y;</span><br><span class="line">    <span class="keyword">protected</span> <span class="type">Vehicle</span> <span class="variable">vehicle</span> <span class="operator">=</span> Vehicle.Basic;</span><br><span class="line">    <span class="keyword">protected</span> <span class="type">char</span> <span class="variable">dir</span> <span class="operator">=</span> <span class="string">&#x27;u&#x27;</span>;</span><br><span class="line">    <span class="keyword">protected</span> <span class="type">double</span> lifeRemains;</span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> <span class="variable">buffedSpeed</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> <span class="variable">buffedAtkSpeed</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> <span class="variable">buffedAtkRange</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> <span class="variable">buffedAtk</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> <span class="variable">buffedDef</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> <span class="variable">fireCD</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="variable">fireCount</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> Vector&lt;Bullet&gt; bullets = <span class="keyword">new</span> <span class="title class_">Vector</span>&lt;&gt;();   <span class="comment">//æ‰€æœ‰æ´»åŠ¨ä¸­çš„å­å¼¹ä¼šè¢«å­˜æ”¾åœ¨é‡Œé¢</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">boolean</span> <span class="variable">alive</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="variable">invincible</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> party;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="variable">pause</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="variable">specialCount</span> <span class="operator">=</span> <span class="number">800</span>;             <span class="comment">//å¦å…‹æ­»äº¡åï¼Œè¯¥è®¡æ—¶æ‰å¼€å§‹è®¡æ•°ã€‚è¿™ä¸ªè®¡æ•°æ˜¯ä¸ºäº†æ’­æ”¾çˆ†ç‚¸åŠ¨ç”»ã€‚è®¡æ•°å®Œæ¯•åè¯¥å¯¹è±¡ä¼šè¢«æ¶ˆé™¤ã€‚</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Tank</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.x = x;</span><br><span class="line">        <span class="built_in">this</span>.y = y;</span><br><span class="line">        setVehicle(Vehicle.Basic);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¾ç½®å¦å…‹ç§ç±»</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setVehicle</span><span class="params">(Vehicle vehicle)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.vehicle = vehicle;</span><br><span class="line">        <span class="built_in">this</span>.lifeRemains = vehicle.LIFE;</span><br><span class="line">        <span class="built_in">this</span>.fireCD = <span class="number">200</span> / getAtkSpeed();      <span class="comment">//å¼€ç«é—´éš”ç”±è¿™ä¸ªå…¬å¼ç®—å‡º</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">char</span> <span class="title function_">getDir</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> dir;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å—åˆ°ä¼¤å®³ã€‚è¿™ä¸ªæ–¹æ³•ç”±å­ç±»å®ç°</span></span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">protected</span> <span class="type">boolean</span> <span class="title function_">takeDamage</span><span class="params">(Tank tank, <span class="type">char</span> dir)</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç§»åŠ¨ã€‚</span></span><br><span class="line"><span class="comment">//    abstract void move(char move);</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">move</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span>[] tryMove()&#123;</span><br><span class="line">        <span class="type">int</span>[] temp = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">2</span>];</span><br><span class="line">        temp[<span class="number">0</span>] = x;</span><br><span class="line">        temp[<span class="number">1</span>] = y;</span><br><span class="line">        <span class="keyword">switch</span> (dir) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;u&#x27;</span>:</span><br><span class="line">                temp[<span class="number">1</span>]--;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;d&#x27;</span>:</span><br><span class="line">                temp[<span class="number">1</span>]++;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;l&#x27;</span>:</span><br><span class="line">                temp[<span class="number">0</span>]--;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;r&#x27;</span>:</span><br><span class="line">                temp[<span class="number">0</span>]++;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> temp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">boolean</span> <span class="title function_">outOfArea</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> x &lt; <span class="number">0</span> || y &lt; <span class="number">0</span> || x &gt; MyPanel.width - <span class="number">80</span> || y &gt; MyPanel.height - <span class="number">80</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">boolean</span> <span class="title function_">runIntoSth</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">checking</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">switch</span> (dir) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;u&#x27;</span>:</span><br><span class="line">                checking = MyPanel.mapData[x + <span class="number">40</span> - (vehicle.SIZE / <span class="number">2</span>)][y + <span class="number">40</span> - (vehicle.SIZE / <span class="number">2</span>)][<span class="number">1</span>] == <span class="number">0</span> &amp;&amp;</span><br><span class="line">                        MyPanel.mapData[x + <span class="number">40</span>][y + <span class="number">40</span> - (vehicle.SIZE / <span class="number">2</span>)][<span class="number">1</span>] == <span class="number">0</span> &amp;&amp;</span><br><span class="line">                        MyPanel.mapData[x + <span class="number">39</span> + (vehicle.SIZE / <span class="number">2</span>)][y + <span class="number">40</span> - (vehicle.SIZE / <span class="number">2</span>)][<span class="number">1</span>] == <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;d&#x27;</span>:</span><br><span class="line">                checking = MyPanel.mapData[x + <span class="number">40</span> - (vehicle.SIZE / <span class="number">2</span>)][y + <span class="number">39</span> + (vehicle.SIZE / <span class="number">2</span>)][<span class="number">1</span>] == <span class="number">0</span> &amp;&amp;</span><br><span class="line">                        MyPanel.mapData[x + <span class="number">40</span>][y + <span class="number">40</span> + (vehicle.SIZE / <span class="number">2</span>)][<span class="number">1</span>] == <span class="number">0</span> &amp;&amp;</span><br><span class="line">                        MyPanel.mapData[x + <span class="number">39</span> + (vehicle.SIZE / <span class="number">2</span>)][y + <span class="number">39</span> + (vehicle.SIZE / <span class="number">2</span>)][<span class="number">1</span>] == <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;r&#x27;</span>:</span><br><span class="line">                checking = MyPanel.mapData[x + <span class="number">39</span> + (vehicle.SIZE / <span class="number">2</span>)][y + <span class="number">40</span> - (vehicle.SIZE / <span class="number">2</span>)][<span class="number">1</span>] == <span class="number">0</span> &amp;&amp;</span><br><span class="line">                        MyPanel.mapData[x + <span class="number">39</span> + (vehicle.SIZE / <span class="number">2</span>)][y + <span class="number">40</span>][<span class="number">1</span>] == <span class="number">0</span> &amp;&amp;</span><br><span class="line">                        MyPanel.mapData[x + <span class="number">39</span> + (vehicle.SIZE / <span class="number">2</span>)][y + <span class="number">39</span> + (vehicle.SIZE / <span class="number">2</span>)][<span class="number">1</span>] == <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;l&#x27;</span>:</span><br><span class="line">                checking = MyPanel.mapData[x + <span class="number">40</span> - (vehicle.SIZE / <span class="number">2</span>)][y + <span class="number">40</span> - (vehicle.SIZE / <span class="number">2</span>)][<span class="number">1</span>] == <span class="number">0</span> &amp;&amp;</span><br><span class="line">                        MyPanel.mapData[x + <span class="number">40</span> - (vehicle.SIZE / <span class="number">2</span>)][y + <span class="number">40</span>][<span class="number">1</span>] == <span class="number">0</span> &amp;&amp;</span><br><span class="line">                        MyPanel.mapData[x + <span class="number">40</span> - (vehicle.SIZE / <span class="number">2</span>)][y + <span class="number">39</span> + (vehicle.SIZE / <span class="number">2</span>)][<span class="number">1</span>] == <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> !checking;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">setCollisionSize</span><span class="params">(<span class="type">int</span> tempX, <span class="type">int</span> tempY, <span class="type">int</span> type, <span class="type">int</span> hp)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; vehicle.SIZE; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; vehicle.SIZE; j++) &#123;</span><br><span class="line">                MyPanel.mapData[tempX + <span class="number">40</span> - (vehicle.SIZE / <span class="number">2</span>) + i][tempY + <span class="number">40</span> - (vehicle.SIZE / <span class="number">2</span>) + j][<span class="number">1</span>] = type;</span><br><span class="line">                MyPanel.mapData[tempX + <span class="number">40</span> - (vehicle.SIZE / <span class="number">2</span>) + i][tempY + <span class="number">40</span> - (vehicle.SIZE / <span class="number">2</span>) + j][<span class="number">0</span>] = hp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">releaseCollisionSize</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; vehicle.SIZE; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; vehicle.SIZE; j++) &#123;</span><br><span class="line">                MyPanel.mapData[x + <span class="number">40</span> - (vehicle.SIZE / <span class="number">2</span>) + i][y + <span class="number">40</span> - (vehicle.SIZE / <span class="number">2</span>) + j][<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">                MyPanel.mapData[x + <span class="number">40</span> - (vehicle.SIZE / <span class="number">2</span>) + i][y + <span class="number">40</span> - (vehicle.SIZE / <span class="number">2</span>) + j][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¼€ç«</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fire</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (fireCount &gt; <span class="number">0</span>) &#123;        <span class="comment">//fireCount &gt; 0 è¯´æ˜å¼€ç«CD è¿˜æ²¡å¥½ï¼Œç›´æ¥ return</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (vehicle == Vehicle.Basic) &#123;     <span class="comment">//Basic ä½“ç§¯å’Œä¸€èˆ¬å¦å…‹ä¸åŒï¼Œæ•…è€Œå‘å°„å­å¼¹çš„ä½ç½®ä¹Ÿä¸åŒ</span></span><br><span class="line">            fireCount = <span class="number">10</span>;                 <span class="comment">//å…¶æ­¦å™¨ä¹Ÿä¸åŒï¼Œæ‰€ä»¥ å¼€ç«CD çš„é€»è¾‘ä¹Ÿä¸åŒã€‚è¿™é‡Œä½¿å…¶æ¯å‘å­å¼¹çš„é—´éš”å¾ˆçŸ­</span></span><br><span class="line">            <span class="keyword">switch</span> (dir) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&#x27;u&#x27;</span>:</span><br><span class="line">                    fire(x + <span class="number">39</span>, y + <span class="number">17</span>, dir, getAtkRange());</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&#x27;d&#x27;</span>:</span><br><span class="line">                    fire(x + <span class="number">31</span>, y + <span class="number">53</span>, dir, getAtkRange());</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&#x27;l&#x27;</span>:</span><br><span class="line">                    fire(x + <span class="number">17</span>, y + <span class="number">31</span>, dir, getAtkRange());</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&#x27;r&#x27;</span>:</span><br><span class="line">                    fire(x + <span class="number">53</span>, y + <span class="number">39</span>, dir, getAtkRange());</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            fireCount = fireCD;</span><br><span class="line">            <span class="keyword">switch</span> (dir) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&#x27;u&#x27;</span>:</span><br><span class="line">                    fire(x + <span class="number">35</span>, y - <span class="number">10</span>, dir, getAtkRange());</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&#x27;d&#x27;</span>:</span><br><span class="line">                    fire(x + <span class="number">35</span>, y + <span class="number">80</span>, dir, getAtkRange());</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&#x27;l&#x27;</span>:</span><br><span class="line">                    fire(x - <span class="number">10</span>, y + <span class="number">35</span>, dir, getAtkRange());</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&#x27;r&#x27;</span>:</span><br><span class="line">                    fire(x + <span class="number">80</span>, y + <span class="number">35</span>, dir, getAtkRange());</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fire</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">char</span> dir, <span class="type">int</span> range)</span> &#123;</span><br><span class="line">        <span class="type">Bullet</span> <span class="variable">tempBullet</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Bullet</span>(vehicle.BULLET, x, y, dir, range, <span class="built_in">this</span>);</span><br><span class="line">        bullets.add(tempBullet);  <span class="comment">//åˆ›å»ºä¸€ä¸ªæ–°çš„ å­å¼¹ å®ä¾‹ï¼Œå¹¶è®©å…¶è¿è¡Œ</span></span><br><span class="line">        tempBullet.start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">boolean</span> <span class="title function_">isFront</span><span class="params">(<span class="type">char</span> dir)</span> &#123;               <span class="comment">//åˆ¤æ–­æ˜¯å¦è¢«ä»æ­£é¢å‡»ä¸­ã€‚å¦‚è‹¥æ˜¯ï¼Œå¦å…‹çš„é˜²å¾¡åŠ›ç”Ÿæ•ˆ</span></span><br><span class="line">        <span class="keyword">switch</span> (dir) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;u&#x27;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">this</span>.dir == <span class="string">&#x27;d&#x27;</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;d&#x27;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">this</span>.dir == <span class="string">&#x27;u&#x27;</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;r&#x27;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">this</span>.dir == <span class="string">&#x27;l&#x27;</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;l&#x27;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">this</span>.dir == <span class="string">&#x27;r&#x27;</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pause</span><span class="params">(<span class="type">boolean</span> pause)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.pause = pause;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAtk</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> vehicle.ATK + buffedAtk;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getDef</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> vehicle.DEF + buffedDef;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAtkSpeed</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> vehicle.ATK_SPEED + buffedAtkSpeed;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getSpeed</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> vehicle.SPEED + buffedSpeed;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAtkRange</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> vehicle.ATK_RANGE + buffedAtkRange;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>Player.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.melody.tank_game;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Melody</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Player</span> <span class="keyword">extends</span> <span class="title class_">Tank</span> &#123;</span><br><span class="line">    <span class="comment">//ä¸‰ä¸ªå±æ€§ä¾æ¬¡æ˜¯ï¼šç»éªŒå€¼ã€æ˜¯å¦æ­£åœ¨ç§»åŠ¨ã€æ˜¯å¦æ­£åœ¨å¼€ç«</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="variable">enhance</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//è¿™ä¸¤ä¸ªå˜é‡ç”± MyPanel çš„ ç›‘è§†å™¨å†³å®šã€‚æŒ‰ä¸‹ç§»åŠ¨/å¼€ç«é”®æ—¶ï¼Œå˜ä¸º trueã€‚æ¾å¼€æ—¶ï¼Œå˜ä¸º false</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="variable">isMoving</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="variable">isFiring</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Player</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(x, y);</span><br><span class="line">        party = <span class="number">0</span>;              <span class="comment">//é˜µè¥ä¸º 0</span></span><br><span class="line">        setVehicle(Vehicle.Basic);          <span class="comment">//è®¾ç½®åˆå§‹å¦å…‹ã€‚               å¯ä»¥éšæ„ä¿®æ”¹</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (alive) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">100</span> / getSpeed());         <span class="comment">//é€Ÿåº¦è¶Šå¿«ã€è¡ŒåŠ¨è¶Šå¿«</span></span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!pause) &#123;</span><br><span class="line">                <span class="keyword">if</span> (invincible &gt; <span class="number">0</span>) &#123;       <span class="comment">//æ— æ•Œå†·å´å‡å°‘</span></span><br><span class="line">                    invincible--;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (isMoving) &#123;             <span class="comment">//æ­£åœ¨ç§»åŠ¨çš„åœºåˆï¼Œä½¿å…¶ç§»åŠ¨</span></span><br><span class="line">                    move();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (isFiring) &#123;             <span class="comment">//æ­£åœ¨å¼€ç«çš„åœºåˆï¼Œä½¿å…¶å¼€ç«</span></span><br><span class="line">                    fire();</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (vehicle == Vehicle.Basic) &#123;          <span class="comment">//Basic æ˜¯ç‰¹åˆ«çš„ã€‚æŒ‰ä½å¼€ç«é”®çš„åœºåˆï¼Œå¼€ç«CDæ‰å‡å°‘ï¼Œä¸ç„¶ä¼šå¢åŠ ã€‚</span></span><br><span class="line">                    <span class="comment">// è¿™æ ·åšæ˜¯ä¸ºäº†æ¨¡æ‹Ÿ åŠ ç‰¹æ— çš„æ‰‹æ„Ÿ</span></span><br><span class="line">                    fireCount += fireCount &gt;= fireCD ? <span class="number">0</span> : <span class="number">1</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    fireCount--;            <span class="comment">//å¼€ç«CD è‡ªç„¶å‡å°‘</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">move</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] temp = tryMove();</span><br><span class="line">        <span class="keyword">if</span> (!outOfArea(temp[<span class="number">0</span>], temp[<span class="number">1</span>]) &amp;&amp; !runIntoSth(temp[<span class="number">0</span>], temp[<span class="number">1</span>])) &#123;</span><br><span class="line">            releaseCollisionSize();</span><br><span class="line">            setCollisionSize(temp[<span class="number">0</span>], temp[<span class="number">1</span>], -<span class="number">2</span>, -<span class="number">1</span>);</span><br><span class="line">            x = temp[<span class="number">0</span>];</span><br><span class="line">            y = temp[<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fire</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (fireCount &gt; <span class="number">0</span>) &#123;            <span class="comment">//å¦‚æœ å¼€ç«CD æ²¡åˆ°ï¼Œè®©å…¶è‡ªç„¶å‡å°‘ï¼Œç„¶å return</span></span><br><span class="line">            fireCount--;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">super</span>.fire();               <span class="comment">//çœŸæ­£çš„å¼€ç«</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å¾—ç»éªŒå€¼ã€‚æ¯æ¬¡æ¶ˆç­æ•Œäººå¦å…‹ä¼šè°ƒç”¨è¯¥æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">enhanced</span><span class="params">(Vehicle vehicle)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.vehicle == Vehicle.Basic &amp;&amp; Math.random() &gt; <span class="number">0.9</span>) &#123;         <span class="comment">//ç‰¹æ®Šè®¾å®šï¼šBasic çš„åœºåˆï¼Œæ¶ˆç­æ•Œäººæœ‰æ¦‚ç‡å¤ºå–å¦å…‹</span></span><br><span class="line">            <span class="keyword">switch</span> (vehicle) &#123;</span><br><span class="line">                <span class="keyword">case</span> Tank_E1:</span><br><span class="line">                    setVehicle(Vehicle.Tank_Lv1);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> Tank_E2:</span><br><span class="line">                    setVehicle(Vehicle.Tank_Lv2);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> Tank_E3:</span><br><span class="line">                    setVehicle(Vehicle.Tank_Lv3);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> Tank_Special:</span><br><span class="line">                    setVehicle(Vehicle.Tank_Special);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">switch</span> (vehicle) &#123;</span><br><span class="line">                <span class="keyword">case</span> Tank_E1:</span><br><span class="line">                    enhance += <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> Tank_E2:</span><br><span class="line">                    enhance += <span class="number">2</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> Tank_E3:</span><br><span class="line">                    enhance += <span class="number">3</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> Tank_Special:</span><br><span class="line">                    enhance += <span class="number">10</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            enhanced();         <span class="comment">//çœ‹çœ‹èƒ½ä¸èƒ½å‡çº§</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŸ¥çœ‹æ˜¯å¦å‡çº§</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">enhanced</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (vehicle.LEVEL_UP_REQUIRED &gt; <span class="number">0</span> &amp;&amp; enhance &gt;= vehicle.LEVEL_UP_REQUIRED) &#123;</span><br><span class="line">            enhance -= vehicle.LEVEL_UP_REQUIRED;</span><br><span class="line">            releaseCollisionSize();</span><br><span class="line">            <span class="keyword">switch</span> (vehicle) &#123;</span><br><span class="line">                <span class="keyword">case</span> Basic:</span><br><span class="line">                    setVehicle(Vehicle.Tank_Lv1);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> Tank_Lv1:</span><br><span class="line">                    setVehicle(Vehicle.Tank_Lv2);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> Tank_Lv2:</span><br><span class="line">                    setVehicle(Vehicle.Tank_Lv3);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">            &#125;</span><br><span class="line">            setCollisionSize(x, y, -<span class="number">2</span>, -<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¾ç½®å¦å…‹ã€‚æ¯æ¬¡è®¾ç½®ä¼šé‡ç½®ç»éªŒå€¼</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setVehicle</span><span class="params">(Vehicle vehicle)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.setVehicle(vehicle);</span><br><span class="line">        <span class="built_in">this</span>.enhance = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (vehicle == Vehicle.Basic) &#123;</span><br><span class="line">            fireCount = fireCD;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//å—åˆ°ä¼¤å®³ã€‚ä¼ å…¥çš„æ˜¯é€ æˆä¼¤å®³çš„å¦å…‹ï¼Œå’Œå‡»ä¸­çš„å­å¼¹æ–¹å‘</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">boolean</span> <span class="title function_">takeDamage</span><span class="params">(Tank tank, <span class="type">char</span> dir)</span> &#123;</span><br><span class="line">        <span class="type">double</span> <span class="variable">damage</span> <span class="operator">=</span> tank.getAtk() * vehicle.DEF_BY_PERCENT - (isFront(dir) ? <span class="built_in">this</span>.getDef() : <span class="number">0</span>);    <span class="comment">//ä¾§åæ–¹ä¸­å¼¹ï¼Œé˜²å¾¡åŠ›ä¸ç”Ÿæ•ˆ</span></span><br><span class="line">        <span class="keyword">if</span> (invincible &gt; <span class="number">0</span>) &#123;               <span class="comment">//æ— æ•Œçš„åœºåˆï¼Œä¸å—ä¼¤å®³</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> ((lifeRemains -= Math.max(damage, <span class="number">0.1</span>)) &lt;= <span class="number">0</span>) &#123;           <span class="comment">//è¿™é‡Œæ‰£é™¤äº†ç”Ÿå‘½å€¼ã€‚æœ€å°‘æ‰£é™¤ 0.1ã€‚</span></span><br><span class="line">            invincible += <span class="number">200</span>;              <span class="comment">//å¦å…‹è¢«æ‰“çˆ†ï¼Œç»™ä¸€æ®µæ— æ•Œæ—¶é—´</span></span><br><span class="line">            releaseCollisionSize();</span><br><span class="line">            <span class="keyword">switch</span> (vehicle) &#123;              <span class="comment">//å¦å…‹é™çº§ã€‚Basic çš„åœºåˆï¼Œæ¸¸æˆç»“æŸ</span></span><br><span class="line">                <span class="keyword">case</span> Tank_Lv3:</span><br><span class="line">                <span class="keyword">case</span> Tank_Lv2:</span><br><span class="line">                <span class="keyword">case</span> Tank_Lv1:</span><br><span class="line">                <span class="keyword">case</span> Tank_Special:</span><br><span class="line">                    setVehicle(Vehicle.Basic);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> Basic:</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">           </span><br><span class="line">            setCollisionSize(x, y, -<span class="number">2</span>, -<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        invincible += <span class="number">100</span>;      <span class="comment">//åªè¦å—åˆ°äº†ä¼¤å®³ï¼Œäº§ç”ŸçŸ­æš‚æ— æ•Œæ—¶é—´</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>Enemy.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.melody.tank_game;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Melody</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ•Œäººçš„å¦å…‹</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Enemy</span> <span class="keyword">extends</span> <span class="title class_">Tank</span> &#123;</span><br><span class="line">    <span class="comment">//stepï¼šå¦å…‹çš„å‰è¿›æ¬¡æ•°ã€‚å½’ 0 æ—¶ä¼šè½¬å‘</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">step</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">double</span> FIRE_PROBABILITY;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Enemy</span><span class="params">(Vehicle vehicle)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        setVehicle(vehicle);</span><br><span class="line">        party = <span class="number">1</span>;</span><br><span class="line">        dir = <span class="string">&#x27;d&#x27;</span>;</span><br><span class="line">        invincible = <span class="number">300</span>;</span><br><span class="line">        FIRE_PROBABILITY = <span class="number">0.95</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Enemy</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, Map map)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>(x, y);</span><br><span class="line">        giveVehicle(map.probability_E1, map.probability_E2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Enemy</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(x, y);</span><br><span class="line">        party = <span class="number">1</span>;              <span class="comment">//æ•Œæ–¹å¦å…‹é˜µè¥ä¸º 1</span></span><br><span class="line"><span class="comment">//        randomDir();</span></span><br><span class="line"><span class="comment">//        giveVehicle();</span></span><br><span class="line">        dir = <span class="string">&#x27;d&#x27;</span>;</span><br><span class="line">        invincible = <span class="number">130</span>;       <span class="comment">//æ•Œæ–¹å¦å…‹å‡ºç”Ÿæ—¶ï¼Œèµ‹äºˆçŸ­æ—¶é—´çš„æ— æ•Œ</span></span><br><span class="line">        FIRE_PROBABILITY = <span class="number">0.985</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">700</span> + specialCount);          <span class="comment">//å¦å…‹å‡ºç”Ÿæ—¶ï¼Œä½¿å…¶çŸ­æš‚ä¼‘çœ ã€‚</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        specialCount = <span class="number">200</span> + (<span class="type">int</span>) (<span class="number">80</span> * lifeRemains);         <span class="comment">//å¦å…‹çš„ æ­»äº¡è®¡æ•°ï¼Œå’Œå¦å…‹ç§ç±»æœ‰å…³</span></span><br><span class="line">        <span class="keyword">while</span> (alive) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep((<span class="number">100</span> / getSpeed()));       <span class="comment">//å¦å…‹é€Ÿåº¦è¶Šå¿«ï¼Œå…¶æ‰€æœ‰è¡ŒåŠ¨é€Ÿåº¦è¶Šå¿«</span></span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!pause) &#123;</span><br><span class="line">                <span class="keyword">if</span> (invincible &gt; <span class="number">0</span>) &#123;           <span class="comment">//æ— æ•Œæ—¶é—´å‡å°‘</span></span><br><span class="line">                    invincible--;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (fireCount &gt; <span class="number">0</span>) &#123;            <span class="comment">//å¼€ç«CDè®¡æ•°å‡å°‘</span></span><br><span class="line">                    fireCount--;</span><br><span class="line">                &#125;</span><br><span class="line">                move();               <span class="comment">//ç§»åŠ¨</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        releaseCollisionSize();</span><br><span class="line">        <span class="keyword">while</span> (specialCount &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!pause) &#123;</span><br><span class="line">                specialCount--;                                    <span class="comment">//*****æ­¤å¤„éœ€è¦ä¿®æ”¹*****</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">giveVehicle</span><span class="params">(<span class="type">double</span> probabilityE1, <span class="type">double</span> probabilityE2)</span> &#123;</span><br><span class="line">        <span class="type">double</span> <span class="variable">result</span> <span class="operator">=</span> Math.random();</span><br><span class="line">        <span class="keyword">if</span> (result &lt;= probabilityE1) &#123;</span><br><span class="line">            setVehicle(Vehicle.Tank_E1);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (result &lt;= probabilityE2) &#123;</span><br><span class="line">            setVehicle(Vehicle.Tank_E2);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            setVehicle(Vehicle.Tank_E3);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">move</span><span class="params">()</span> &#123;            <span class="comment">//ä¼ å…¥çš„å­—ç¬¦æ²¡ç”¨ã€‚</span></span><br><span class="line">        <span class="keyword">if</span> (step &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            randomDir();                        <span class="comment">//æ­¥æ•°å½’ 0 æ—¶ï¼Œèµ‹äºˆå…¶éšæœºæ–¹å‘</span></span><br><span class="line">            realMove();</span><br><span class="line">            step = (<span class="type">int</span>) (Math.random() * <span class="number">200</span> + <span class="number">60</span> - <span class="number">3</span> * getSpeed());       <span class="comment">//èµ‹äºˆå…¶éšæœºçš„æ­¥æ•°</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (step &lt;= <span class="number">60</span> - <span class="number">2</span> * getSpeed()) &#123;       <span class="comment">//æœ€åå‡ æ­¥çš„æ—¶å€™ï¼Œè®©å¦å…‹åœ¨åŸåœ°ç¨ä½œåœç•™ï¼ˆä¸ç§»åŠ¨ï¼‰</span></span><br><span class="line">            step--;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            realMove();</span><br><span class="line">            step--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (Math.random() &gt; FIRE_PROBABILITY) &#123;            <span class="comment">//ä½¿æ•Œæ–¹å¦å…‹æœ‰ 1.5% çš„æ¦‚ç‡å¼€ç«ã€‚è¿™ä¸ªæ¦‚ç‡ç»è¿‡æµ‹è¯•ï¼Œæ¯”è¾ƒåˆé€‚           è¿™é‡Œå¯ä»¥æ›´æ”¹</span></span><br><span class="line">            fire();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">realMove</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] temp = tryMove();</span><br><span class="line">        <span class="keyword">if</span> (!outOfArea(temp[<span class="number">0</span>], temp[<span class="number">1</span>]) &amp;&amp; !runIntoSth(temp[<span class="number">0</span>], temp[<span class="number">1</span>])) &#123;</span><br><span class="line">            releaseCollisionSize();</span><br><span class="line">            setCollisionSize(temp[<span class="number">0</span>], temp[<span class="number">1</span>], -<span class="number">1</span>, -<span class="number">1</span>);</span><br><span class="line">            x = temp[<span class="number">0</span>];</span><br><span class="line">            y = temp[<span class="number">1</span>];</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            step -= <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//èµ‹äºˆéšæœºæ–¹å‘ï¼ˆæ¦‚ç‡å‡åŒ€ï¼‰</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">randomDir</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> ((<span class="type">int</span>) (Math.random() * <span class="number">4</span>)) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                dir = <span class="string">&#x27;u&#x27;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                dir = <span class="string">&#x27;r&#x27;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                dir = <span class="string">&#x27;d&#x27;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                dir = <span class="string">&#x27;l&#x27;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//å—ä¼¤ã€‚ä¼ å…¥çš„æ˜¯é€ æˆä¼¤å®³çš„å¦å…‹ï¼ˆä»¥è®¡ç®—ä¼¤å®³ï¼‰ï¼ŒåŠå­å¼¹æ–¹å‘ï¼ˆç”¨äºåˆ¤æ–­æ˜¯å¦æ˜¯æ­£é¢ä¸­å¼¹ï¼‰</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">boolean</span> <span class="title function_">takeDamage</span><span class="params">(Tank tank, <span class="type">char</span> dir)</span> &#123;</span><br><span class="line">        <span class="type">double</span> <span class="variable">damage</span> <span class="operator">=</span> tank.getAtk() * vehicle.DEF_BY_PERCENT - (isFront(dir) ? getDef() : <span class="number">0</span>);     <span class="comment">//ä¾§åæ–¹ä¸­å¼¹çš„åœºåˆï¼Œé˜²å¾¡åŠ›ä¸ç”Ÿæ•ˆ</span></span><br><span class="line">        <span class="keyword">if</span> (invincible &gt; <span class="number">0</span>) &#123;               <span class="comment">//å¦‚æœå¦å…‹æ— æ•Œï¼Œä¸ä¼šå—åˆ°ä¼¤å®³</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> (<span class="built_in">this</span>.lifeRemains -= Math.max(damage, <span class="number">0.1</span>)) &gt; <span class="number">0</span>;        <span class="comment">//åœ¨è¿™é‡Œè¿›è¡Œäº†ç”Ÿå‘½å€¼çš„æ‰£é™¤ï¼Œæœ€å°‘æ‰£ 0.1ã€‚è¿”å›æ˜¯å¦ç”Ÿå‘½å€¼æœ‰å‰©</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>Vehicle.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.melody.tank_game;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Melody</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//è¯¥æšä¸¾ç±»å­˜æ”¾æ‰€æœ‰å¯èƒ½çš„å¦å…‹ç§ç±»åŠå…¶å‚æ•°</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">Vehicle</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span>&#123;</span><br><span class="line">    <span class="comment">//Basic æ˜¯ç‰¹åˆ«çš„ã€‚è®¾å®šä¸Šï¼ŒBasic æ˜¯ç¦»å¼€è½½å…·ï¼Œæ‰›ç€åŠ ç‰¹æ—çš„é©¾é©¶å‘˜ã€‚å…¶ä½“ç§¯å’Œä¸€èˆ¬å¦å…‹ä¸åŒ</span></span><br><span class="line">    Basic(<span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">20</span>, <span class="number">3</span>, <span class="number">400</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="string">&#x27;g&#x27;</span>, <span class="number">10</span>),</span><br><span class="line">    Tank_Lv1(<span class="number">5</span>, <span class="number">11</span>, <span class="number">1</span>, <span class="number">12</span>, <span class="number">4</span>, <span class="number">1000</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="string">&#x27;n&#x27;</span>),</span><br><span class="line">    Tank_Lv2(<span class="number">7</span>, <span class="number">15</span>, <span class="number">2</span>, <span class="number">12</span>, <span class="number">4</span>, <span class="number">1000</span>, <span class="number">10</span>, <span class="number">0.9</span>, <span class="string">&#x27;n&#x27;</span>),</span><br><span class="line">    Tank_Lv3(<span class="number">10</span>, <span class="number">17</span>, <span class="number">3</span>, <span class="number">12</span>, <span class="number">4</span>, <span class="number">1600</span>, -<span class="number">1</span>, <span class="number">0.8</span>, <span class="string">&#x27;n&#x27;</span>),</span><br><span class="line">    Tank_E1(<span class="number">5</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">11</span>, <span class="number">4</span>, <span class="number">1000</span>, -<span class="number">1</span>, <span class="number">1</span>, <span class="string">&#x27;n&#x27;</span>),</span><br><span class="line">    Tank_E2(<span class="number">7</span>, <span class="number">10</span>, <span class="number">2</span>, <span class="number">10</span>, <span class="number">4</span>, <span class="number">1000</span>, -<span class="number">1</span>, <span class="number">0.8</span>, <span class="string">&#x27;n&#x27;</span>),</span><br><span class="line">    Tank_E3(<span class="number">10</span>, <span class="number">18</span>, <span class="number">3</span>, <span class="number">9</span>, <span class="number">4</span>, <span class="number">1600</span>, -<span class="number">1</span>, <span class="number">0.6</span>, <span class="string">&#x27;n&#x27;</span>),</span><br><span class="line">    Tank_Special(<span class="number">25</span>, <span class="number">13</span>, <span class="number">4</span>, <span class="number">18</span>, <span class="number">1</span>, <span class="number">100000</span>, -<span class="number">1</span>, <span class="number">0.4</span>, <span class="string">&#x27;e&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä»ä¸Šåˆ°ä¸‹ä¾æ¬¡æ˜¯ï¼šæ”»å‡»åŠ›ã€ç”Ÿå‘½å€¼ã€é˜²å¾¡åŠ›ã€é€Ÿåº¦ã€æ”»å‡»é€Ÿåº¦ã€æ”»å‡»èŒƒå›´ã€å‡çº§ç»éªŒã€å‡ä¼¤ã€å­å¼¹ç§ç±»</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> ATK;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">double</span> LIFE;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> DEF;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> SPEED;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> ATK_SPEED;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> ATK_RANGE;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> LEVEL_UP_REQUIRED;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">double</span> DEF_BY_PERCENT;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">char</span> BULLET;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> SIZE;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    Vehicle(<span class="type">int</span> atk, <span class="type">double</span> life, <span class="type">int</span> def, <span class="type">int</span> speed, <span class="type">int</span> atkSpeed, <span class="type">int</span> atkRange,</span><br><span class="line">            <span class="type">int</span> levelUpRequired, <span class="type">double</span> defByPercent, <span class="type">char</span> bullet, <span class="type">int</span> size) &#123;</span><br><span class="line">        <span class="built_in">this</span>.ATK = atk;</span><br><span class="line">        <span class="built_in">this</span>.LIFE = life;</span><br><span class="line">        <span class="built_in">this</span>.DEF = def;</span><br><span class="line">        <span class="built_in">this</span>.SPEED = speed;</span><br><span class="line">        <span class="built_in">this</span>.ATK_SPEED = atkSpeed;</span><br><span class="line">        <span class="built_in">this</span>.ATK_RANGE = atkRange;</span><br><span class="line">        <span class="built_in">this</span>.LEVEL_UP_REQUIRED = levelUpRequired;</span><br><span class="line">        <span class="built_in">this</span>.DEF_BY_PERCENT = defByPercent;</span><br><span class="line">        <span class="built_in">this</span>.BULLET = bullet;</span><br><span class="line">        <span class="built_in">this</span>.SIZE = size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Vehicle(<span class="type">int</span> atk, <span class="type">double</span> life, <span class="type">int</span> def, <span class="type">int</span> speed, <span class="type">int</span> atkSpeed, <span class="type">int</span> atkRange,</span><br><span class="line">            <span class="type">int</span> levelUpRequired, <span class="type">double</span> defByPercent, <span class="type">char</span> bullet) &#123;</span><br><span class="line">        <span class="built_in">this</span>(atk, life, def, speed, atkSpeed, atkRange, levelUpRequired, defByPercent, bullet, <span class="number">80</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å­å¼¹ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bullet</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="comment">//ä»ä¸Šåˆ°ä¸‹ä¾æ¬¡æ˜¯ï¼šæ¨ªåæ ‡ã€çºµåæ ‡ã€æ–¹å‘ã€å­å¼¹é€Ÿåº¦ã€å­å¼¹æ˜¯å¦å­˜åœ¨ã€æœ€å¤§é£è¡ŒèŒƒå›´ã€ç©¿é€æ•°é‡ã€å·²å‘½ä¸­çš„å¦å…‹</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> x;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> y;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">char</span> dir;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> BULLET_SPEED;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="variable">active</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> range;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> pierce;</span><br><span class="line">    <span class="keyword">private</span> Tank master;</span><br><span class="line">    <span class="keyword">private</span> Tank[] hit;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="variable">pause</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Bullet</span><span class="params">(<span class="type">char</span> type, <span class="type">int</span> x, <span class="type">int</span> y, <span class="type">char</span> dir, <span class="type">int</span> range, Tank master)</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;e&#x27;</span>:</span><br><span class="line">                <span class="built_in">this</span>.BULLET_SPEED = <span class="number">3</span>;</span><br><span class="line">                <span class="built_in">this</span>.pierce = <span class="number">3</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;g&#x27;</span>:</span><br><span class="line">                <span class="built_in">this</span>.BULLET_SPEED = <span class="number">2</span>;</span><br><span class="line">                <span class="built_in">this</span>.pierce = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;n&#x27;</span>:</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="built_in">this</span>.BULLET_SPEED = <span class="number">1</span>;</span><br><span class="line">                <span class="built_in">this</span>.pierce = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        hit = <span class="keyword">new</span> <span class="title class_">Tank</span>[pierce];</span><br><span class="line">        <span class="built_in">this</span>.x = x;</span><br><span class="line">        <span class="built_in">this</span>.y = y;</span><br><span class="line">        <span class="built_in">this</span>.dir = dir;</span><br><span class="line">        <span class="built_in">this</span>.range = range;</span><br><span class="line">        <span class="built_in">this</span>.master = master;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">move</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> (dir) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;u&#x27;</span>:</span><br><span class="line">                y -= BULLET_SPEED;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;d&#x27;</span>:</span><br><span class="line">                y += BULLET_SPEED;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;r&#x27;</span>:</span><br><span class="line">                x += BULLET_SPEED;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;l&#x27;</span>:</span><br><span class="line">                x -= BULLET_SPEED;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> ((range -= BULLET_SPEED) &lt;= <span class="number">0</span> || outOfArea(x, y)) &#123;     <span class="comment">//å¦‚æœè¾¾åˆ°æœ€å¤§é£è¡ŒèŒƒå›´ï¼Œåˆ™é”€æ¯è¯¥å­å¼¹</span></span><br><span class="line">            active = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">outOfArea</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> x &lt; <span class="number">0</span> || y &lt; <span class="number">0</span> || x &gt; MyPanel.width - <span class="number">10</span> || y &gt; MyPanel.height - <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getX</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getY</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> y;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">char</span> <span class="title function_">getDir</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> dir;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getBULLET_SPEED</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> BULLET_SPEED;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setHit</span><span class="params">(Tank tank)</span> &#123;             <span class="comment">//å½“æœ‰å¦å…‹è¢«è¯¥å­å¼¹å‡»ä¸­åï¼Œè¯¥æ–¹æ³•ä¼šè¢«è°ƒç”¨ã€‚ä¸€èˆ¬ç”± MyPanel ç±»ä¸­çš„ checkHit æ–¹æ³•è°ƒç”¨</span></span><br><span class="line">        hit[hit.length - pierce--] = tank;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasHit</span><span class="params">(Tank tank)</span> &#123;          <span class="comment">//åˆ¤æ–­ä¸€è¾†å¦å…‹æ˜¯å¦å·²è¢«å‡»ä¸­è¿‡ã€‚ä¸€èˆ¬ç”± MyPanel ç±»ä¸­çš„ checkHit æ–¹æ³•è°ƒç”¨</span></span><br><span class="line">        <span class="keyword">for</span> (Tank t : hit) &#123;</span><br><span class="line">            <span class="keyword">if</span> (t == tank) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pause</span><span class="params">(<span class="type">boolean</span> pause)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.pause = pause;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (active) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!pause) &#123;</span><br><span class="line">                move();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>Map.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.melody.tank_game;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Melody</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">Map</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    Level1(<span class="number">10</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="literal">null</span>, <span class="number">0</span>, creatNewMap1()),</span><br><span class="line">    Level2(<span class="number">15</span>, <span class="number">0.5</span>, <span class="number">1</span>, Vehicle.Tank_E2, <span class="number">10</span>, creatNewMap2()),</span><br><span class="line">    Level3(<span class="number">20</span>, <span class="number">0.33</span>, <span class="number">0.66</span>, Vehicle.Tank_E3, <span class="number">15</span>, creatNewMap3()),</span><br><span class="line">    Level4(<span class="number">20</span>, <span class="number">0.2</span>, <span class="number">0.5</span>, Vehicle.Tank_Special, <span class="number">20</span>, creatNewMap4());</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> levelEnemyNum;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">double</span> probability_E1;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">double</span> probability_E2;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> Tank boss;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[][][] mapData;</span><br><span class="line">    <span class="comment">//[0]ï¼šç§ç±»ã€‚-1 å¦å…‹ï¼›0 é“è·¯ï¼›1 å¢™ï¼›2 è‰ä¸›ï¼›3 æ°´æ± </span></span><br><span class="line">    <span class="comment">//[1]ï¼šHPã€‚-1 ä¸å¯ç ´åï¼›0 å¯ä»¥é€šè¡Œï¼›1 basicä»¥å¤–ä»»æ„å­å¼¹å‡»ä¸­1æ¬¡å¯ä»¥ç ´åï¼›2ã€3 åŒ 1</span></span><br><span class="line"></span><br><span class="line">    Map(<span class="type">int</span> levelEnemyNum, <span class="type">double</span> probability_E1, <span class="type">double</span> probability_E2, Vehicle boss, <span class="type">int</span> bossBuff, <span class="type">int</span>[][][] map) &#123;</span><br><span class="line">        <span class="built_in">this</span>.levelEnemyNum = levelEnemyNum;</span><br><span class="line">        <span class="built_in">this</span>.probability_E1 = probability_E1;</span><br><span class="line">        <span class="built_in">this</span>.probability_E2 = probability_E2;</span><br><span class="line">        <span class="keyword">if</span> (boss == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="built_in">this</span>.boss = <span class="literal">null</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.boss = <span class="keyword">new</span> <span class="title class_">Enemy</span>(boss);</span><br><span class="line">            <span class="built_in">this</span>.boss.lifeRemains += bossBuff;</span><br><span class="line">        &#125;</span><br><span class="line">        mapData = map;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span>[][][] creatNewMap1() &#123;</span><br><span class="line">        <span class="type">int</span>[][][] newMap = creatNewMap();</span><br><span class="line">        <span class="keyword">return</span> newMap;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span>[][][] creatNewMap2() &#123;</span><br><span class="line">        <span class="type">int</span>[][][] newMap = creatNewMap();</span><br><span class="line">        <span class="keyword">return</span> newMap;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span>[][][] creatNewMap3() &#123;</span><br><span class="line">        <span class="type">int</span>[][][] newMap = creatNewMap();</span><br><span class="line">        <span class="keyword">return</span> newMap;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span>[][][] creatNewMap4() &#123;</span><br><span class="line">        <span class="type">int</span>[][][] newMap = creatNewMap();</span><br><span class="line">        <span class="keyword">return</span> newMap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span>[][][] creatNewMap() &#123;</span><br><span class="line">        <span class="type">int</span>[][][] newMap = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">30</span>][<span class="number">20</span>][<span class="number">2</span>];</span><br><span class="line">        newMap = creatBasicMap(newMap);</span><br><span class="line">        <span class="keyword">return</span> newMap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span>[][][] creatBasicMap(<span class="type">int</span>[][][] map)&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; map.length; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; map[i].length; j++) &#123;</span><br><span class="line">                map[i][j][<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">                map[i][j][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">addWall</span><span class="params">(<span class="type">int</span>[][][] map, <span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">        map[x][y][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        map[x][y][<span class="number">1</span>] = -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">addArea</span><span class="params">(<span class="type">int</span>[][][] map, <span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> kind, <span class="type">int</span> hp)</span> &#123;</span><br><span class="line">        map[x][y][<span class="number">0</span>] = kind;</span><br><span class="line">        map[x][y][<span class="number">1</span>] = hp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">removeTankCollisionSize</span><span class="params">(Tank tank)</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">setTankCollisionSize</span><span class="params">(Tank tank)</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>InputImage.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.melody.tank_game;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.awt.*;</span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Melody</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">è¯¥ç±»ä¸­å­˜æ”¾æ‰€æœ‰éœ€è¦çš„å›¾ç‰‡ã€‚</span></span><br><span class="line"><span class="comment">åŒ…å«ï¼šå¦å…‹å›¾ç‰‡ï¼ˆtank/basicï¼š4 * 2 + 1 = 9 ç§ï¼‰ï¼›</span></span><br><span class="line"><span class="comment">     å­å¼¹å›¾ç‰‡ï¼ˆbulletï¼š2 * 2 = 4 ç§ï¼‰ï¼›</span></span><br><span class="line"><span class="comment">     æŠ¤ç›¾å›¾ç‰‡ï¼ˆbubbleï¼š2 * 2 = 4ç§ï¼‰ï¼›</span></span><br><span class="line"><span class="comment">     æ˜Ÿæ˜Ÿå›¾ç‰‡ï¼ˆstarï¼š2ç§ï¼‰ã€çˆ†ç‚¸å›¾ç‰‡ï¼ˆexplosionï¼š5ç§ï¼‰;</span></span><br><span class="line"><span class="comment">     åœ°å½¢å›¾ç‰‡ï¼ˆ4ç§ï¼‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InputImage</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">tank1</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/Tank_Lv1.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">tank2</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/Tank_Lv2.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">tank3</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/Tank_Lv3.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">basic</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/P.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">basicL</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/Pl.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">basicR</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/Pr.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">basicLR</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/Plr.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">tankE1</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/Tank_E1.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">tankE2</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/Tank_E2.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">tankE3</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/Tank_E3.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">tank1r</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/Tank_Lv1r.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">tank2r</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/Tank_Lv2r.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">tank3r</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/Tank_Lv3r.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">tankE1r</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/Tank_E1r.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">tankE2r</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/Tank_E2r.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">tankE3r</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/Tank_E3r.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">tankSp</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/Tank_Sp.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">tankSpr</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/Tank_Spr.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">bubble</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/Bubble_red.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">bubbleR</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/Bubble_red_r.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">bubbleE</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/Bubble.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">bubbleER</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/Bubble_r.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">eBullet</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/E_bullet.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">eBulletR</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/E_bullet_r.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">nBullet</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/N_bullet.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">nBulletR</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/N_bullet_r.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">gBullet</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/G_bullet.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">gBulletR</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/G_bullet_r.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">star</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/Star.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">nStar</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/Star_n.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">explosion1</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/Explosion/Explosion1.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">explosion2</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/Explosion/Explosion2.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">explosion3</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/Explosion/Explosion3.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">explosion4</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/Explosion/Explosion4.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">explosion5</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/Explosion/Explosion5.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">iron</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/Landform/Iron.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">wall</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/Landform/Wall.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">water</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/Landform/Water.png&quot;</span>));</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Image</span> <span class="variable">trees</span> <span class="operator">=</span> Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/pic/Landform/Trees.png&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>Timing.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.melody.tank_game;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Melody</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Timing</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> time;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Timing</span><span class="params">(<span class="type">int</span> time)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.time = time;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(time);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        MyPanel.gameSuspend = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>Javaæ•°æ®ç»“æ„</h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="https://w-zx.cc/posts/javaShuJu.html">https://w-zx.cc/posts/javaShuJu.html</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a"><h>ä½œè€…</h><div class="post-copyright-cc-info"><h>çˆ±å­¦æŠ€æœ¯çš„å°å´ğŸµ</h></div></div><div class="post-copyright-c"><h>å‘å¸ƒäº</h><div class="post-copyright-cc-info"><h>2023-04-17</h></div></div><div class="post-copyright-u"><h>æ›´æ–°äº</h><div class="post-copyright-cc-info"><h>2023-05-17</h></div></div><div class="post-copyright-c"><h>è®¸å¯åè®®</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY-NC-SA 4.0" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/JAVA/"><div class="tags-punctuation"><svg class="faa-tada icon" style="height:1.1em;width:1.1em;fill:currentColor;position:relative;top:2px;margin-right:3px" aria-hidden="true"><use xlink:href="#icon-sekuaibiaoqian"></use></svg></div>JAVA</a><a class="post-meta__tags" href="/tags/%E5%9F%BA%E7%A1%80%E8%AF%AD%E8%A8%80/"><div class="tags-punctuation"><svg class="faa-tada icon" style="height:1.1em;width:1.1em;fill:currentColor;position:relative;top:2px;margin-right:3px" aria-hidden="true"><use xlink:href="#icon-sekuaibiaoqian"></use></svg></div>åŸºç¡€è¯­è¨€</a></div></div><link rel="stylesheet" href="/css/coin.css" media="defer" onload="this.media='all'"/><div class="post-reward"><button class="tip-button reward-button"><span class="tip-button__text">æŠ•å–‚ä½œè€…</span><div class="coin-wrapper"><div class="coin"><div class="coin__middle"></div><div class="coin__back"></div><div class="coin__front"></div></div></div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://i.postimg.cc/1tmk8v0k/QQ-20230520160616.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.postimg.cc/1tmk8v0k/QQ-20230520160616.jpg" alt="å¾®ä¿¡"/></a><div class="post-qr-code-desc">å¾®ä¿¡</div></li><li class="reward-item"><a href="https://i.postimg.cc/3JkHjbM7/QQ-20230520160610.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.postimg.cc/3JkHjbM7/QQ-20230520160610.jpg" alt="æ”¯ä»˜å®"/></a><div class="post-qr-code-desc">æ”¯ä»˜å®</div></li></ul></div></button></div><audio id="coinAudio" src="https://npm.elemecdn.com/akilar-candyassets@1.0.36/audio/aowu.m4a"></audio><script defer="defer" src="/js/coin.js"></script><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/javawl.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27050" onerror="onerror=null;src='/assets/r2.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">Javaç½‘ç»œç¼–ç¨‹</div></div></a></div><div class="next-post pull-right"><a href="/posts/javadx.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27053" onerror="onerror=null;src='/assets/r2.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">Javaé¢å‘å¯¹è±¡</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/posts/java.html" title="Java"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27064" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2023-05-17</div><div class="title">Java</div></div></a></div><div><a href="/posts/javadx.html" title="Javaé¢å‘å¯¹è±¡"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27053" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2023-05-18</div><div class="title">Javaé¢å‘å¯¹è±¡</div></div></a></div><div><a href="/posts/javawl.html" title="Javaç½‘ç»œç¼–ç¨‹"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27050" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2023-05-17</div><div class="title">Javaç½‘ç»œç¼–ç¨‹</div></div></a></div><div><a href="/posts/JVM05.html" title="JAVAå†…å­˜æ¨¡å‹"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27063" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2023-05-17</div><div class="title">JAVAå†…å­˜æ¨¡å‹</div></div></a></div><div><a href="/posts/C01.html" title="C++å…¥é—¨"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27069" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2023-05-17</div><div class="title">C++å…¥é—¨</div></div></a></div><div><a href="/posts/C07.html" title="C++èŒå·¥ç³»ç»Ÿé¡¹ç›®"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27065" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2023-05-17</div><div class="title">C++èŒå·¥ç³»ç»Ÿé¡¹ç›®</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> è¯„è®º</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><svg class="meta_icon" style="width:22px;height:22px;position:relative;top:5px"><use xlink:href="#icon-mulu1"></use></svg><span style="font-weight:bold">ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">13 Java æ•°æ®ç»“æ„</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#13-1-%E9%9B%86%E5%90%88%E7%9A%84%E6%A1%86%E6%9E%B6%E4%BD%93%E7%B3%BB"><span class="toc-text">13.1 é›†åˆçš„æ¡†æ¶ä½“ç³»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-2-%E5%8D%95%E5%88%97%E9%9B%86%E5%90%88%E6%8E%A5%E5%8F%A3-Collection"><span class="toc-text">13.2 å•åˆ—é›†åˆæ¥å£ Collection</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95%EF%BC%9A"><span class="toc-text">å¸¸ç”¨æ–¹æ³•ï¼š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-2-1-%E8%BF%AD%E4%BB%A3%E5%99%A8-Iterator"><span class="toc-text">13.2.1 è¿­ä»£å™¨ Iterator</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-3-%E6%9C%89%E5%BA%8F%E9%9B%86%E5%90%88%E6%8E%A5%E5%8F%A3-List"><span class="toc-text">13.3 æœ‰åºé›†åˆæ¥å£ List</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95%EF%BC%9A-2"><span class="toc-text">å¸¸ç”¨æ–¹æ³•ï¼š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-3-1-%E5%8F%AF%E5%8F%98%E6%95%B0%E7%BB%84-ArrayList"><span class="toc-text">13.3.1 å¯å˜æ•°ç»„ ArrayList</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ArrayList-%E7%9A%84%E6%BA%90%E7%A0%81%EF%BC%9A"><span class="toc-text">ArrayList çš„æºç ï¼š</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-3-2-%E5%8F%AF%E5%8F%98%E6%95%B0%E7%BB%84-Vector"><span class="toc-text">13.3.2 å¯å˜æ•°ç»„ Vector</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Vector-%E7%9A%84%E6%BA%90%E7%A0%81%EF%BC%9A"><span class="toc-text">Vector çš„æºç ï¼š</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-3-3-%E9%93%BE%E8%A1%A8-LinkedList"><span class="toc-text">13.3.3 é“¾è¡¨ LinkedList</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95%EF%BC%9A-3"><span class="toc-text">å¸¸ç”¨æ–¹æ³•ï¼š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#LinkedList-%E7%9A%84%E6%BA%90%E7%A0%81"><span class="toc-text">LinkedList çš„æºç </span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ArrayList-%E5%92%8C-LinkedList-%E7%9A%84%E6%AF%94%E8%BE%83%EF%BC%9A"><span class="toc-text">ArrayList å’Œ LinkedList çš„æ¯”è¾ƒï¼š</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-3-4-%E7%A8%80%E7%96%8F%E6%95%B0%E7%BB%84"><span class="toc-text">13.3.4 ç¨€ç–æ•°ç»„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-3-5-%E6%A0%88-Stack"><span class="toc-text">13.3.5 æ ˆ Stack</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95%EF%BC%9A-4"><span class="toc-text">å¸¸ç”¨æ–¹æ³•ï¼š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-3-5-1-%E6%A0%88%E6%A8%A1%E6%8B%9F%E8%AE%A1%E7%AE%97%E5%99%A8"><span class="toc-text">13.3.5.1 æ ˆæ¨¡æ‹Ÿè®¡ç®—å™¨</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-3-6-%E8%B7%B3%E8%A1%A8-SkipList"><span class="toc-text">13.3.6 è·³è¡¨ SkipList</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-4-%E9%98%9F%E5%88%97%E6%8E%A5%E5%8F%A3-Queue"><span class="toc-text">13.4 é˜Ÿåˆ—æ¥å£ Queue</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95%EF%BC%9A-5"><span class="toc-text">å¸¸ç”¨æ–¹æ³•ï¼š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-4-1-%E4%BC%98%E5%85%88%E7%BA%A7%E9%98%9F%E5%88%97-PriorityQueue"><span class="toc-text">13.4.1 ä¼˜å…ˆçº§é˜Ÿåˆ— PriorityQueue</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-4-2-%E9%98%BB%E5%A1%9E%E9%98%9F%E5%88%97%E6%8E%A5%E5%8F%A3-BlockingQueue"><span class="toc-text">13.4.2 é˜»å¡é˜Ÿåˆ—æ¥å£ BlockingQueue</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95%EF%BC%9A-6"><span class="toc-text">å¸¸ç”¨æ–¹æ³•ï¼š</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-5-%E5%8F%8C%E5%88%97%E9%9B%86%E5%90%88%E6%8E%A5%E5%8F%A3-Map"><span class="toc-text">13.5 åŒåˆ—é›†åˆæ¥å£ Map</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95%EF%BC%9A-7"><span class="toc-text">å¸¸ç”¨æ–¹æ³•ï¼š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Map-%E6%8E%A5%E5%8F%A3%E9%81%8D%E5%8E%86%E5%85%83%E7%B4%A0%EF%BC%9A"><span class="toc-text">Map æ¥å£éå†å…ƒç´ ï¼š</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-5-1-%E6%95%A3%E5%88%97%E8%A1%A8-HashMap"><span class="toc-text">13.5.1 æ•£åˆ—è¡¨ HashMap</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#HashMap-%E7%9A%84%E6%BA%90%E7%A0%81%EF%BC%9A"><span class="toc-text">HashMap çš„æºç ï¼š</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-5-2-%E6%95%A3%E5%88%97%E8%A1%A8-Hashtable"><span class="toc-text">13.5.2 æ•£åˆ—è¡¨ Hashtable</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Hashtable-%E4%B8%8E-HashMap-%E7%9A%84%E6%AF%94%E8%BE%83%EF%BC%9A"><span class="toc-text">Hashtable ä¸ HashMap çš„æ¯”è¾ƒï¼š</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-5-3-%E7%BA%A2%E9%BB%91%E6%A0%91-TreeMap"><span class="toc-text">13.5.3 çº¢é»‘æ ‘ TreeMap</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#TreeMap-%E7%9A%84%E6%BA%90%E7%A0%81%EF%BC%9A"><span class="toc-text">TreeMap çš„æºç ï¼š</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-5-4-Properties"><span class="toc-text">13.5.4 Properties</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-6-%E6%97%A0%E5%BA%8F%E9%9B%86%E5%90%88%E6%8E%A5%E5%8F%A3-Set"><span class="toc-text">13.6 æ— åºé›†åˆæ¥å£ Set</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#13-6-1-HashSet"><span class="toc-text">13.6.1 HashSet</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#HashSet-%E7%9A%84%E6%BA%90%E7%A0%81"><span class="toc-text">HashSet çš„æºç </span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-6-2-LinkedHashSet"><span class="toc-text">13.6.2 LinkedHashSet</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#LinkedHashSet-%E7%9A%84%E6%BA%90%E7%A0%81%EF%BC%9A"><span class="toc-text">LinkedHashSet çš„æºç ï¼š</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-6-3-TreeSet"><span class="toc-text">13.6.3 TreeSet</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-7-%E9%9B%86%E5%90%88%E7%9A%84%E9%80%89%E6%8B%A9"><span class="toc-text">13.7 é›†åˆçš„é€‰æ‹©</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-8-%E5%B7%A5%E5%85%B7%E7%B1%BB-Collections"><span class="toc-text">13.8 å·¥å…·ç±» Collections</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95%EF%BC%9A-8"><span class="toc-text">å¸¸ç”¨æ–¹æ³•ï¼š</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-9-JUnit"><span class="toc-text">13.9 JUnit</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">14 æ ‘</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%A0%91%EF%BC%9F"><span class="toc-text">ä»€ä¹ˆæ˜¯æ ‘ï¼Ÿ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-1-%E4%BA%8C%E5%8F%89%E6%A0%91%EF%BC%9A"><span class="toc-text">14.1 äºŒå‰æ ‘ï¼š</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E9%81%8D%E5%8E%86%EF%BC%9A"><span class="toc-text">äºŒå‰æ ‘çš„éå†ï¼š</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-1-1-%E9%A1%BA%E5%BA%8F%E5%AD%98%E5%82%A8%E4%BA%8C%E5%8F%89%E6%A0%91"><span class="toc-text">14.1.1 é¡ºåºå­˜å‚¨äºŒå‰æ ‘</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A1%BA%E5%BA%8F%E5%AD%98%E5%82%A8%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E8%BD%AC%E6%8D%A2%EF%BC%9A"><span class="toc-text">é¡ºåºå­˜å‚¨äºŒå‰æ ‘çš„è½¬æ¢ï¼š</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-1-2-%E7%BA%BF%E7%B4%A2%E5%8C%96%E4%BA%8C%E5%8F%89%E6%A0%91"><span class="toc-text">14.1.2 çº¿ç´¢åŒ–äºŒå‰æ ‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-1-3-%E8%B5%AB%E5%A4%AB%E6%9B%BC%E6%A0%91"><span class="toc-text">14.1.3 èµ«å¤«æ›¼æ ‘</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E8%B5%AB%E5%A4%AB%E6%9B%BC%E6%A0%91%EF%BC%9A"><span class="toc-text">ç”Ÿæˆèµ«å¤«æ›¼æ ‘ï¼š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B5%AB%E5%A4%AB%E6%9B%BC%E7%BC%96%E7%A0%81%EF%BC%9A"><span class="toc-text">èµ«å¤«æ›¼ç¼–ç ï¼š</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E8%B5%AB%E5%A4%AB%E6%9B%BC%E7%BC%96%E7%A0%81%EF%BC%9A"><span class="toc-text">å®ç°èµ«å¤«æ›¼ç¼–ç ï¼š</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-1-4-%E4%BA%8C%E5%8F%89%E6%8E%92%E5%BA%8F%E6%A0%91"><span class="toc-text">14.1.4 äºŒå‰æ’åºæ ‘</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#14-1-4-1-%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91"><span class="toc-text">14.1.4.1 å¹³è¡¡äºŒå‰æ ‘</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%B7%A6%E6%97%8B%E8%BD%AC%EF%BC%9A"><span class="toc-text">å¹³è¡¡äºŒå‰æ ‘çš„å·¦æ—‹è½¬ï¼š</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%8F%B3%E6%97%8B%E8%BD%AC%EF%BC%9A"><span class="toc-text">å¹³è¡¡äºŒå‰æ ‘çš„å³æ—‹è½¬ï¼š</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%8F%8C%E6%97%8B%E8%BD%AC%EF%BC%9A"><span class="toc-text">å¹³è¡¡äºŒå‰æ ‘çš„åŒæ—‹è½¬ï¼š</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91%EF%BC%9A"><span class="toc-text">å®ç°å¹³è¡¡äºŒå‰æ ‘ï¼š</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-1-5-%E7%BA%BF%E6%AE%B5%E6%A0%91"><span class="toc-text">14.1.5 çº¿æ®µæ ‘</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-2-%E5%A4%9A%E8%B7%AF%E6%9F%A5%E6%89%BE%E6%A0%91"><span class="toc-text">14.2 å¤šè·¯æŸ¥æ‰¾æ ‘</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%8D%E8%AF%8D%E8%A7%A3%E9%87%8A%EF%BC%9A"><span class="toc-text">åè¯è§£é‡Šï¼š</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-2-1-2-3-%E6%A0%91"><span class="toc-text">14.2.1 2-3 æ ‘</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9E%84%E5%BB%BA-2-3-%E6%A0%91%EF%BC%9A"><span class="toc-text">æ„å»º 2-3 æ ‘ï¼š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-4-%E6%A0%91%EF%BC%9A"><span class="toc-text">2-3-4 æ ‘ï¼š</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-2-2-B-%E6%A0%91"><span class="toc-text">14.2.2 B æ ‘</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#B-%E6%A0%91%EF%BC%9A"><span class="toc-text">B+ æ ‘ï¼š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#B-%E6%A0%91%EF%BC%9A-2"><span class="toc-text">B* æ ‘ï¼š</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-2-3-%E5%89%8D%E7%BC%80%E6%A0%91"><span class="toc-text">14.2.3 å‰ç¼€æ ‘</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-3-%E5%9B%BE"><span class="toc-text">14.3 å›¾</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%BE%E7%9A%84%E8%A1%A8%E7%A4%BA%E6%96%B9%E5%BC%8F%EF%BC%9A"><span class="toc-text">å›¾çš„è¡¨ç¤ºæ–¹å¼ï¼š</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-3-1-%E6%B7%B1%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2-DFS"><span class="toc-text">14.3.1 æ·±åº¦ä¼˜å…ˆæœç´¢ DFS</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A4%EF%BC%9A"><span class="toc-text">æ­¥éª¤ï¼š</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-3-2-%E5%B9%BF%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2-BFS"><span class="toc-text">14.3.2 å¹¿åº¦ä¼˜å…ˆæœç´¢ BFS</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A4%EF%BC%9A-2"><span class="toc-text">æ­¥éª¤ï¼š</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%99%84%E5%BD%95"><span class="toc-text">é™„å½•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#F1-%E5%AE%9E%E7%8E%B0%E8%B5%AB%E5%A4%AB%E6%9B%BC%E7%BC%96%E7%A0%81-%E8%A7%A3%E7%A0%81"><span class="toc-text">F1 å®ç°èµ«å¤«æ›¼ç¼–ç &#x2F;è§£ç </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#F2-%E5%AE%9E%E7%8E%B0%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91"><span class="toc-text">F2 å®ç°å¹³è¡¡äºŒå‰æ ‘</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">16 å¤šçº¿ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#16-1-%E7%BA%BF%E7%A8%8B%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-text">16.1 çº¿ç¨‹çš„æ¦‚å¿µ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#16-1-1-%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-text">16.1.1 çº¿ç¨‹çš„ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-1-2-%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%8A%B6%E6%80%81"><span class="toc-text">16.1.2 çº¿ç¨‹çš„çŠ¶æ€</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-2-%E7%BA%BF%E7%A8%8B%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">16.2 çº¿ç¨‹çš„ä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#16-2-1-%E7%BB%A7%E6%89%BF-Thread-%E7%B1%BB"><span class="toc-text">16.2.1 ç»§æ‰¿ Thread ç±»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-2-2-%E5%AE%9E%E7%8E%B0-Runable-%E6%8E%A5%E5%8F%A3"><span class="toc-text">16.2.2 å®ç° Runable æ¥å£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-2-3-%E7%BB%A7%E6%89%BF-Thread-%E5%92%8C-%E5%AE%9E%E7%8E%B0-Runable-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">16.2.3 ç»§æ‰¿ Thread å’Œ å®ç° Runable çš„åŒºåˆ«</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-2-4-%E7%BA%BF%E7%A8%8B%E4%B8%AD%E6%AD%A2"><span class="toc-text">16.2.4 çº¿ç¨‹ä¸­æ­¢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-2-5-%E7%BA%BF%E7%A8%8B%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-text">16.2.5 çº¿ç¨‹å¸¸ç”¨æ–¹æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-2-6-%E7%94%A8%E6%88%B7%E7%BA%BF%E7%A8%8B%E5%92%8C%E5%AE%88%E6%8A%A4%E7%BA%BF%E7%A8%8B"><span class="toc-text">16.2.6 ç”¨æˆ·çº¿ç¨‹å’Œå®ˆæŠ¤çº¿ç¨‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-2-7-%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-text">16.2.7 çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-3-%E7%BA%BF%E7%A8%8B%E7%9A%84%E4%BA%92%E6%96%A5"><span class="toc-text">16.3 çº¿ç¨‹çš„äº’æ–¥</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#16-3-1-%E4%BA%92%E6%96%A5%E9%94%81"><span class="toc-text">16.3.1 äº’æ–¥é”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-3-2-%E7%BA%BF%E7%A8%8B%E6%AD%BB%E9%94%81"><span class="toc-text">16.3.2 çº¿ç¨‹æ­»é”</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-4-%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%90%8C%E6%AD%A5"><span class="toc-text">16.4 çº¿ç¨‹çš„åŒæ­¥</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">17 IOæµ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#17-1-%E6%96%87%E4%BB%B6"><span class="toc-text">17.1 æ–‡ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#17-1-1-%E5%B8%B8%E7%94%A8%E7%9A%84%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C"><span class="toc-text">17.1.1 å¸¸ç”¨çš„æ–‡ä»¶æ“ä½œ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-2-IO%E6%B5%81"><span class="toc-text">17.2 IOæµ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#17-2-1-IO%E6%B5%81%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-text">17.2.1 IOæµçš„åˆ†ç±»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-2-2-IO%E6%B5%81-%E5%B8%B8%E7%94%A8%E7%B1%BB"><span class="toc-text">17.2.2 IOæµ å¸¸ç”¨ç±»</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#17-2-2-1-FileInputStream%EF%BC%9A%E6%96%87%E4%BB%B6%E5%AD%97%E8%8A%82%E8%BE%93%E5%85%A5%E6%B5%81"><span class="toc-text">17.2.2.1 FileInputStreamï¼šæ–‡ä»¶å­—èŠ‚è¾“å…¥æµ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17-2-2-2-FileOutputStream%EF%BC%9A%E6%96%87%E4%BB%B6%E5%AD%97%E8%8A%82%E8%BE%93%E5%87%BA%E6%B5%81"><span class="toc-text">17.2.2.2 FileOutputStreamï¼šæ–‡ä»¶å­—èŠ‚è¾“å‡ºæµ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17-2-2-3-FileReader%EF%BC%9A%E6%96%87%E4%BB%B6%E5%AD%97%E7%AC%A6%E8%BE%93%E5%85%A5%E6%B5%81"><span class="toc-text">17.2.2.3 FileReaderï¼šæ–‡ä»¶å­—ç¬¦è¾“å…¥æµ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17-2-2-3-FileWriter%EF%BC%9A%E6%96%87%E4%BB%B6%E5%AD%97%E7%AC%A6%E8%BE%93%E5%87%BA%E6%B5%81"><span class="toc-text">17.2.2.3 FileWriterï¼šæ–‡ä»¶å­—ç¬¦è¾“å‡ºæµ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17-2-2-4-%E8%BD%AC%E6%8D%A2%E6%B5%81-InputStreamReader-%E5%92%8C-OutputStreamWriter"><span class="toc-text">17.2.2.4 è½¬æ¢æµ InputStreamReader å’Œ OutputStreamWriter</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-2-3-%E8%8A%82%E7%82%B9%E6%B5%81%E5%92%8C%E5%A4%84%E7%90%86%E6%B5%81"><span class="toc-text">17.2.3 èŠ‚ç‚¹æµå’Œå¤„ç†æµ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8A%82%E7%82%B9%E6%B5%81%E5%92%8C%E5%A4%84%E7%90%86%E6%B5%81%E7%9A%84%E5%8C%BA%E5%88%AB%E5%92%8C%E8%81%94%E7%B3%BB"><span class="toc-text">èŠ‚ç‚¹æµå’Œå¤„ç†æµçš„åŒºåˆ«å’Œè”ç³»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17-2-3-1-%E7%BC%93%E5%86%B2%E5%8C%BA%E6%B5%81"><span class="toc-text">17.2.3.1 ç¼“å†²åŒºæµ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17-2-3-2-%E6%95%B0%E6%8D%AE%E6%95%B0%E6%8D%AE%E6%B5%81"><span class="toc-text">17.2.3.2 æ•°æ®æ•°æ®æµ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17-2-3-3-%E5%AF%B9%E8%B1%A1%E6%B5%81"><span class="toc-text">17.2.3.3 å¯¹è±¡æµ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17-2-3-4-%E6%A0%87%E5%87%86%E8%BE%93%E5%85%A5-%E8%BE%93%E5%87%BA%E6%B5%81"><span class="toc-text">17.2.3.4 æ ‡å‡†è¾“å…¥ &#x2F; è¾“å‡ºæµ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17-2-3-5-%E6%89%93%E5%8D%B0%E6%B5%81-PaintStream-%E5%92%8C-PaintWriter"><span class="toc-text">17.2.3.5 æ‰“å°æµ PaintStream å’Œ PaintWriter</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17-2-3-6-Properties-%E7%B1%BB"><span class="toc-text">17.2.3.6 Properties ç±»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17-2-3-7-%E9%9A%8F%E6%9C%BA%E8%AE%BF%E9%97%AE%E6%96%87%E4%BB%B6"><span class="toc-text">17.2.3.7 éšæœºè®¿é—®æ–‡ä»¶</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">18 é¡¹ç›®ï¼šå¦å…‹å¤§æˆ˜</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E9%98%B6%E6%AE%B5%E6%AF%95%E4%B8%9A"><span class="toc-text">äºŒé˜¶æ®µæ¯•ä¸š</span></a></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background-color: transparent;"><div id="footer-wrap"><div id="ft"><div class="ft-item-1"><div class="t-top"><div class="t-t-l"><p class="ft-t t-l-t">æ ¼è¨€ğŸ§¬</p><div class="bg-ad"><div>å†çœ‹çœ‹é‚£ä¸ªå…‰ç‚¹ï¼Œå®ƒå°±åœ¨è¿™é‡Œï¼Œè¿™æ˜¯å®¶å›­ï¼Œè¿™æ˜¯æˆ‘ä»¬ â€”â€” ä½ æ‰€çˆ±çš„æ¯ä¸€ä¸ªäººï¼Œä½ è®¤è¯†çš„ä¸€ä¸ªäººï¼Œä½ å¬è¯´è¿‡çš„æ¯ä¸€ä¸ªäººï¼Œæ›¾ç»æœ‰è¿‡çš„æ¯ä¸€ä¸ªäººï¼Œéƒ½åœ¨å®ƒä¸Šé¢åº¦è¿‡ä»–ä»¬çš„ä¸€ç”Ÿâœ¨</div><div class="btn-xz-box"><a class="btn-xz" target="_blank" rel="noopener" href="https://stellarium.org/">ç‚¹å‡»å¼€å¯æ˜Ÿè¾°ä¹‹æ—…</a></div></div></div><div class="t-t-r"><p class="ft-t t-l-t">çŒœä½ æƒ³çœ‹ğŸ’¡</p><ul class="ft-links"><li><a href="/posts/eec9786.html">é­”æ”¹æŒ‡å—</a><a href="/box/nav/">ç½‘å€å¯¼èˆª</a></li><li><a href="/social/link/">æˆ‘çš„æœ‹å‹</a><a href="/comments/">ç•™ç‚¹ä»€ä¹ˆ</a></li><li><a href="/personal/about/">å…³äºä½œè€…</a><a href="/archives/">æ–‡ç« å½’æ¡£</a></li><li><a href="/categories/">æ–‡ç« åˆ†ç±»</a><a href="/tags/">æ–‡ç« æ ‡ç­¾</a></li><li><a href="/box/Gallery/">æˆ‘çš„ç”»å»Š</a><a href="/personal/bb/">æˆ‘çš„å” å¨</a></li><li><a href="/site/time/">å»ºè®¾è¿›ç¨‹</a><a href="/site/census/">ç½‘ç«™ç»Ÿè®¡</a></li></ul></div></div></div><div class="ft-item-2"><p class="ft-t">æ¨èå‹é“¾âŒ›</p><div class="ft-img-group"><div class="img-group-item"><a target="_blank" rel="noopener" href="https://www.fomal.cc/" title="FomalhautğŸ¥"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/60e5d4e39da7c077.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div></div></div></div><div class="copyright"><span><b>&copy;2022-2023</b></span><span><b>&nbsp;&nbsp;By çˆ±å­¦æŠ€æœ¯çš„å°å´ğŸµ</b></span></div><div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" title="åšå®¢æ¡†æ¶ä¸ºHexo_v6.3.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/Frame-Hexo-blue.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" title="ä¸»é¢˜ç‰ˆæœ¬Butterfly_v4.3.1"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/Theme-Butterfly-6513df.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px" title="æœ¬ç«™é‡‡ç”¨å¤šçº¿éƒ¨ç½²ï¼Œä¸»çº¿è·¯æ‰˜ç®¡äºVercel"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/Hosted-Vercel-brightgreen.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://user.51.la/" style="margin-inline:5px" title="æœ¬ç«™æ•°æ®åˆ†æå¾—ç›Šäº51laæŠ€æœ¯æ”¯æŒ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/Analytics-51la-3db1eb.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://icp.gov.moe/?keyword=20226665" style="margin-inline:5px" title="æœ¬ç«™å·²åŠ å…¥èŒICPè±ªåå¥—é¤ï¼ŒèŒICPå¤‡20226665å·"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/èŒICPå¤‡-20226665-fe1384.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://bitiful.dogecast.com/buckets" style="margin-inline:5px" title="æœ¬ç½‘ç«™ç»Service Workeråˆ†æµè‡³ç¼¤çº·äº‘å¯¹è±¡å­˜å‚¨"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=" https://sourcebucket.s3.ladydaily.com/badge/Bucket-ç¼¤çº·äº‘-9c62da.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://www.netdun.net/" style="margin-inline:5px" title="æœ¬ç«™ä½¿ç”¨ç½‘ç›¾æ˜Ÿçƒæä¾›CDNåŠ é€Ÿä¸é˜²æŠ¤"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/CDN-ç½‘ç›¾æ˜Ÿçƒ-fff2cc.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" title="æœ¬ç½‘ç«™æºç ç”±Githubæä¾›å­˜å‚¨ä»“åº“"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=" https://sourcebucket.s3.ladydaily.com/badge/Source-Github-d021d6.svg" alt=""/></a></p></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><a class="icon-V hidden" onclick="switchNightMode()" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><svg width="25" height="25" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon"></use></svg></a><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button><button class="share" type="button" title="å³é”®æ¨¡å¼" onclick="changeMouseMode()"><i class="fas fa-mouse"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog right_side"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="èŠå¤©"><i class="fas fa-sms"></i></button><button class="share" type="button" title="åˆ†äº«é“¾æ¥" onclick="share()"><i class="fas fa-share-nodes"></i></button><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i><span id="percent">0<span>%</span></span></button><button id="go-down" type="button" title="ç›´è¾¾åº•éƒ¨" onclick="btf.scrollToDest(document.body.scrollHeight, 500)"><i class="fas fa-arrow-down"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div class="js-pjax" id="rightMenu"><div class="rightMenu-group rightMenu-small"><a class="rightMenu-item" href="javascript:window.history.back();"><i class="fa fa-arrow-left"></i></a><a class="rightMenu-item" href="javascript:window.history.forward();"><i class="fa fa-arrow-right"></i></a><a class="rightMenu-item" href="javascript:window.location.reload();"><i class="fa fa-refresh"></i></a><a class="rightMenu-item" href="javascript:rmf.scrollToTop();"><i class="fa fa-arrow-up"></i></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-text"><a class="rightMenu-item" href="javascript:rmf.copySelect();"><i class="fa fa-copy"></i><span>å¤åˆ¶</span></a><a class="rightMenu-item" href="javascript:window.open(&quot;https://www.baidu.com/s?wd=&quot;+window.getSelection().toString());window.location.reload();"><i class="fa fa-search"></i><span>ç™¾åº¦æœç´¢</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-too"><a class="rightMenu-item" href="javascript:window.open(window.getSelection().toString());window.location.reload();"><i class="fa fa-link"></i><span>è½¬åˆ°é“¾æ¥</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-paste"><a class="rightMenu-item" href="javascript:rmf.paste()"><i class="fa fa-copy"></i><span>ç²˜è´´</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-post"><a class="rightMenu-item" href="#post-comment"><i class="fas fa-comment"></i><span>ç©ºé™è¯„è®º</span></a><a class="rightMenu-item" href="javascript:rmf.copyWordsLink()"><i class="fa fa-link"></i><span>å¤åˆ¶æœ¬æ–‡åœ°å€</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-to"><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>æ–°çª—å£æ‰“å¼€</span></a><a class="rightMenu-item" id="menu-too" href="javascript:rmf.open()"><i class="fa fa-link"></i><span>è½¬åˆ°é“¾æ¥</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>å¤åˆ¶é“¾æ¥</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-img"><a class="rightMenu-item" href="javascript:rmf.saveAs()"><i class="fa fa-download"></i><span>ä¿å­˜å›¾ç‰‡</span></a><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>åœ¨æ–°çª—å£æ‰“å¼€</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>å¤åˆ¶å›¾ç‰‡é“¾æ¥</span></a></div><div class="rightMenu-group rightMenu-line"><a class="rightMenu-item" href="javascript:randomPost()"><i class="fa fa-paper-plane"></i><span>éšä¾¿é€›é€›</span></a><a class="rightMenu-item" href="javascript:switchNightMode();"><i class="fa fa-moon"></i><span>æ˜¼å¤œåˆ‡æ¢</span></a><a class="rightMenu-item" href="/personal/about/"><i class="fa fa-info-circle"></i><span>å…³äºåšå®¢</span></a><a class="rightMenu-item" href="javascript:toggleWinbox();"><i class="fas fa-cog"></i><span>ç¾åŒ–è®¾ç½®</span></a><a class="rightMenu-item" href="javascript:rmf.fullScreen();"><i class="fas fa-expand"></i><span>åˆ‡æ¢å…¨å±</span></a><a class="rightMenu-item" href="javascript:window.print();"><i class="fa-solid fa-print"></i><span>æ‰“å°é¡µé¢</span></a></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.staticfile.org/fancyapps-ui/4.0.31/fancybox.umd.min.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/instant.page/5.1.0/instantpage.min.js" type="module"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/vanilla-lazyload/17.3.1/lazyload.iife.min.js"></script><script src="/js/search/local-search.js"></script><script async="async">var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())
setTimeout(function(){preloader.endLoading();}, 5000);
document.getElementById('loading-box').addEventListener('click',()=> {preloader.endLoading()})</script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.2
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container:not\([display]\)').forEach(node => {
            const target = node.parentNode
            if (target.nodeName.toLowerCase() === 'li') {
              target.parentNode.classList.add('has-jax')
            } else {
              target.classList.add('has-jax')
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'qRHraBhVfBon4UW97vUo6c6k-gzGzoHsz',
      appKey: 'KcuRFd21A85bofYWkqw7bO5M',
      placeholder: '',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: true,
      path: window.location.pathname,
      requiredFields: ["nick,mail"],
      master: ''.split(','),
      friends: ''.split(','),
      tagMeta: 'åšä¸»,å°ä¼™ä¼´,è®¿å®¢'.split(','),
      metaPlaceholder: {},
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdnjs.cloudflare.com/ajax/libs/valine/1.4.18/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !true) {
  if (true) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script src="https://cdn.staticfile.org/jquery/3.6.3/jquery.min.js"></script><script async src="https://cdn1.tianli0.top/npm/vue@2.6.14/dist/vue.min.js"></script><script async src="https://cdn1.tianli0.top/npm/element-ui@2.15.6/lib/index.js"></script><script async src="https://cdn.bootcdn.net/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script><script defer type="text/javascript" src="https://cdn1.tianli0.top/npm/sweetalert2@8.19.0/dist/sweetalert2.all.js"></script><script async src="//npm.elemecdn.com/pace-js@1.2.4/pace.min.js"></script><script defer src="https://cdn1.tianli0.top/gh/nextapps-de/winbox/dist/winbox.bundle.min.js"></script><script async src="//at.alicdn.com/t/c/font_3586335_hsivh70x0fm.js"></script><script async src="//at.alicdn.com/t/c/font_3636804_gr02jmjr3y9.js"></script><script async src="//at.alicdn.com/t/c/font_3612150_kfv55xn3u2g.js"></script><script async src="https://cdn.wpon.cn/2022-sucai/Gold-ingot.js"></script><canvas id="universe"></canvas><canvas id="snow"></canvas><script defer src="/js/fomal.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdnjs.cloudflare.com/ajax/libs/butterfly-extsrc/1.1.3/fireworks.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdnjs.cloudflare.com/ajax/libs/butterfly-extsrc/1.1.3/canvas-fluttering-ribbon.min.js"></script><script src="//code.tidio.co/s6lf1eubpeuqxvderp74uj8qlp7dx0qc.js" async="async"></script><script>function onTidioChatApiReady() {
  window.tidioChatApi.hide();
  window.tidioChatApi.on("close", function() {
    window.tidioChatApi.hide();
  });
}
if (window.tidioChatApi) {
  window.tidioChatApi.on("ready", onTidioChatApiReady);
} else {
  document.addEventListener("tidioChat-ready", onTidioChatApiReady);
}

var chatBtnFn = () => {
  document.getElementById("chat_btn").addEventListener("click", function(){
    window.tidioChatApi.show();
    window.tidioChatApi.open();
  });
}
chatBtnFn()
</script><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.js"></script><script src="https://cdn1.tianli0.top/npm/js-heo@1.0.12/metingjs/Meting.min.js"></script><script src="https://lib.baomitu.com/pjax/0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show","#web_bg",".js-pjax","#bibi","body > title","#app","#tag-echarts","#posts-echart","#categories-echarts"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --> <script data-pjax>if(document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    var parent = document.getElementById('recent-posts');
    var child = '<div class="recent-post-item" style="width:100%;height: auto"><div id="catalog_magnet"><div class="magnet_item"><a class="magnet_link" href="https://w-zx.cc/categories/ç®—æ³•/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ¡ ç®—æ³•å­¦ä¹ ç¬”è®° (3)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://w-zx.cc/categories/C/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ‰ C++ç¬”è®° (5)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://w-zx.cc/categories/MyBatis/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ¨ MyBatisç¬”è®° (2)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://w-zx.cc/categories/MySql/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ¥ MySqlç¬”è®° (2)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://w-zx.cc/categories/JVM/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸƒ JVMç¬”è®° (4)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://w-zx.cc/categories/SpringBoot/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ‘ SpringBootç¬”è®° (4)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://w-zx.cc/categories/SpringCloud/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ¥­ SpringCloudç¬”è®° (4)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://w-zx.cc/categories/SSM/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸƒ SSMç¬”è®° (3)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://w-zx.cc/categories/Redis/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ‚ Redisç¬”è®° (3)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://w-zx.cc/categories/JavaWeb/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ JavaWebç¬”è®° (7)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://w-zx.cc/categories/å‰ç«¯/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸŒ¹ å‰ç«¯ç¬”è®° (5)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item" style="visibility: hidden"></div><a class="magnet_link_more"  href="https://w-zx.cc/categories/" style="flex:1;text-align: center;margin-bottom: 10px;">æŸ¥çœ‹æ›´å¤š...</a></div></div>';
    console.log('å·²æŒ‚è½½magnet')
    parent.insertAdjacentHTML("afterbegin",child)}
     </script><style>#catalog_magnet{flex-wrap: wrap;display: flex;width:100%;justify-content:space-between;padding: 10px 10px 0 10px;align-content: flex-start;}.magnet_item{flex-basis: calc(33.333333333333336% - 5px);background: #e9e9e9;margin-bottom: 10px;border-radius: 8px;transition: all 0.2s ease-in-out;}.magnet_item:hover{background: var(--text-bg-hover)}.magnet_link_more{color:#555}.magnet_link{color:black}.magnet_link:hover{color:white}@media screen and (max-width: 600px) {.magnet_item {flex-basis: 100%;}}.magnet_link_context{display:flex;padding: 10px;font-size:16px;transition: all 0.2s ease-in-out;}.magnet_link_context:hover{padding: 10px 20px;}</style>
    <style></style><script data-pjax>
    function butterfly_categories_card_injector_config(){
      var parent_div_git = document.getElementById('recent-posts');
      var item_html = '<style>li.categoryBar-list-item{width:32.3%;}.categoryBar-list{max-height: 190px;overflow:auto;}.categoryBar-list::-webkit-scrollbar{width:0!important}@media screen and (max-width: 650px){.categoryBar-list{max-height: 160px;}}</style><div class="recent-post-item" style="height:auto;width:100%;padding:0px;"><div id="categoryBar"><ul class="categoryBar-list"><li class="categoryBar-list-item" style="background:url(https://img.gejiba.com/images/f4ff8066a7ba7ab5adc730e776aadbc3.md.jpg);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/ç»“æ„/&quot;);" href="javascript:void(0);">ç»“æ„</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr">è®¡ç®—æœºçŸ¥è¯†çš„å­¦ä¹ </span></li><li class="categoryBar-list-item" style="background:url(https://img.gejiba.com/images/f38fc3400758385eff9bf77265ca2509.md.jpg);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/C/&quot;);" href="javascript:void(0);">C++</a><span class="categoryBar-list-count">5</span><span class="categoryBar-list-descr">C++</span></li><li class="categoryBar-list-item" style="background:url(https://img.gejiba.com/images/a8436f6a4af0bec512f29f9a8c71d86d.md.jpg);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/SpringCloud/&quot;);" href="javascript:void(0);">SpringCloud</a><span class="categoryBar-list-count">4</span><span class="categoryBar-list-descr">SpringCloud</span></li><li class="categoryBar-list-item" style="background:url(https://img.gejiba.com/images/c562fbb36709afc81f1068deacea08fd.md.png);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/JAVA/&quot;);" href="javascript:void(0);">JAVA</a><span class="categoryBar-list-count">5</span><span class="categoryBar-list-descr">JAVA</span></li><li class="categoryBar-list-item" style="background:url(https://img.gejiba.com/images/0fd95029a75de05623edc2512e94b0b8.md.jpg);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/JVM/&quot;);" href="javascript:void(0);">JVM</a><span class="categoryBar-list-count">4</span><span class="categoryBar-list-descr">JVM</span></li><li class="categoryBar-list-item" style="background:url(https://img.gejiba.com/images/8e17d3ab324aecc1164680e55d2b316e.md.jpg);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/JavaWeb/&quot;);" href="javascript:void(0);">JavaWeb</a><span class="categoryBar-list-count">7</span><span class="categoryBar-list-descr">JavaWeb</span></li><li class="categoryBar-list-item" style="background:url(https://img.gejiba.com/images/6675847a2f316263e92d7cacb5fee143.md.jpg);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/Redis/&quot;);" href="javascript:void(0);">Redis</a><span class="categoryBar-list-count">3</span><span class="categoryBar-list-descr">Redis</span></li><li class="categoryBar-list-item" style="background:url(https://img.gejiba.com/images/0b571a5a0b0e91f4289ddeb7fe643f66.md.jpg);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/MyBatis/&quot;);" href="javascript:void(0);">MyBatis</a><span class="categoryBar-list-count">2</span><span class="categoryBar-list-descr">MyBatis</span></li><li class="categoryBar-list-item" style="background:url(https://img.gejiba.com/images/987d0ff1c8f1f402cc76df347b79f660.md.png);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/MySql/&quot;);" href="javascript:void(0);">MySql</a><span class="categoryBar-list-count">2</span><span class="categoryBar-list-descr">MySql</span></li><li class="categoryBar-list-item" style="background:url(https://img.gejiba.com/images/96a9486dfa9f0d06b9dd3aae8bca1c1d.md.jpg);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/SSM/&quot;);" href="javascript:void(0);">SSM</a><span class="categoryBar-list-count">3</span><span class="categoryBar-list-descr">SSM</span></li><li class="categoryBar-list-item" style="background:url(https://img.gejiba.com/images/168c6a1a28074990a9919f48dc0b9abd.md.png);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/SpringBoot/&quot;);" href="javascript:void(0);">SpringBoot</a><span class="categoryBar-list-count">4</span><span class="categoryBar-list-descr">SpringBoot</span></li><li class="categoryBar-list-item" style="background:url(https://img.gejiba.com/images/3df36772603dcb3ec71392a2ed49543e.md.png);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/ç®—æ³•/&quot;);" href="javascript:void(0);">ç®—æ³•</a><span class="categoryBar-list-count">3</span><span class="categoryBar-list-descr">ç®—æ³•</span></li><li class="categoryBar-list-item" style="background:url(undefined);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/å‰ç«¯/&quot;);" href="javascript:void(0);">å‰ç«¯</a><span class="categoryBar-list-count">5</span><span class="categoryBar-list-descr"></span></li></ul></div></div>';
      console.log('å·²æŒ‚è½½butterfly_categories_card')
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      }
    if( document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    butterfly_categories_card_injector_config()
    }
  </script><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/shujuku02.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27062" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-23</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/shujuku02.html&quot;);" href="javascript:void(0);" alt="">MYSQL</a><div class="blog-slider__text">æ•°æ®åº“çš„åŸºç¡€å­¦ä¹ </div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/shujuku02.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/shujuku01.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27065" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-04-23</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/shujuku01.html&quot;);" href="javascript:void(0);" alt="">MYSQL</a><div class="blog-slider__text">æ•°æ®åº“çš„åŸºç¡€å­¦ä¹ </div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/shujuku01.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/sjms01.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27065" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-09</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/sjms01.html&quot;);" href="javascript:void(0);" alt="">è®¾è®¡æ¨¡å¼</a><div class="blog-slider__text">äº†è§£æ¯ä¸ªæ¨¡å¼å¼€å‘çš„ä½¿ç”¨ç¯å¢ƒ</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/sjms01.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/javaShuJu.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27056" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-04-17</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/javaShuJu.html&quot;);" href="javascript:void(0);" alt="">Javaæ•°æ®ç»“æ„</a><div class="blog-slider__text">äº†è§£ç»“æ„</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/javaShuJu.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/own01.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27056" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-28</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/own01.html&quot;);" href="javascript:void(0);" alt="">ä¸ªäººå­¦ä¹ è·¯çº¿</a><div class="blog-slider__text">è‡ªå·±çš„å­¦ä¹ æ–¹å‘ä»¥åŠä¸ªäººä¸€äº›æ„Ÿæ‚Ÿ</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/own01.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/javawl.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27050" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-04-19</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/javawl.html&quot;);" href="javascript:void(0);" alt="">Javaç½‘ç»œç¼–ç¨‹</a><div class="blog-slider__text">JAVAè¿›é˜¶æ¨¡å—,äº†è§£ç½‘ç»œ</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/javawl.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/hc01.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27061" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-22</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/hc01.html&quot;);" href="javascript:void(0);" alt="">WebApi</a><div class="blog-slider__text">HTML+CSSå¤ä¹ </div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/hc01.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/css01.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27069" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-22</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/css01.html&quot;);" href="javascript:void(0);" alt="">CSS</a><div class="blog-slider__text">ç½‘é¡µæ¸²æŸ“åŸºç¡€çŸ¥è¯†</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/css01.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/js02.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27050" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-22</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/js02.html&quot;);" href="javascript:void(0);" alt="">JS</a><div class="blog-slider__text">JavaScriptè¿›é˜¶æ•™ç¨‹</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/js02.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/js01.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27069" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-22</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/js01.html&quot;);" href="javascript:void(0);" alt="">JS</a><div class="blog-slider__text">JavaScriptæ•™ç¨‹</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/js01.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/html01.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27055" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-22</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/html01.html&quot;);" href="javascript:void(0);" alt="">HTML</a><div class="blog-slider__text">ç½‘é¡µåˆ¶ä½œåŸºç¡€çŸ¥è¯†</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/html01.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/ES01.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27063" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-28</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/ES01.html&quot;);" href="javascript:void(0);" alt="">ElasticSearch</a><div class="blog-slider__text">æœç´ å¼•æ“ï¼Œå…·å¤‡éå¸¸å¼ºå¤§çš„åŠŸèƒ½ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬ä»æµ·é‡æ•°æ®ä¸­å¿«é€Ÿæ‰¾åˆ°éœ€è¦çš„å†…å®¹</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/ES01.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/MQ01.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27056" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-27</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/MQ01.html&quot;);" href="javascript:void(0);" alt="">MeassagerQueue</a><div class="blog-slider__text">æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå­—é¢æ„æ€å°±æ˜¯å­˜æ”¾æ¶ˆæ¯çš„é˜Ÿåˆ—ï¼Œä¹Ÿå°±æ˜¯äº‹ä»¶é©±åŠ¨ä¸­çš„Broker</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/MQ01.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/ruiji01.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27067" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-19</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/ruiji01.html&quot;);" href="javascript:void(0);" alt="">ç‘å‰å¤–å–</a><div class="blog-slider__text">SpringBooté¡¹ç›®</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/ruiji01.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/ruiji02.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27058" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-19</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/ruiji02.html&quot;);" href="javascript:void(0);" alt="">ç‘å‰å¤–å–ä¼˜åŒ–</a><div class="blog-slider__text">SpringBooté¡¹ç›®</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/ruiji02.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/redis03.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27050" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-15</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/redis03.html&quot;);" href="javascript:void(0);" alt="">Redisé«˜çº§</a><div class="blog-slider__text">ä¸€ä¸ªåŸºäºå†…å­˜çš„`key-value`ç»“æ„æ•°æ®åº“</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/redis03.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/springcloud01.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27058" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-19</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/springcloud01.html&quot;);" href="javascript:void(0);" alt="">SpringCloud</a><div class="blog-slider__text">æŒ‡å®šä¸€å¥—è¡Œä¹‹æœ‰æ•ˆçš„æ ‡å‡†æ¥çº¦æ•°åˆ†å¸ƒå¼æ¶æ„</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/springcloud01.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/ssm01.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27069" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-15</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/ssm01.html&quot;);" href="javascript:void(0);" alt="">ssmæ•´åˆ</a><div class="blog-slider__text">ä¸‰ä¸ªæ¡†æ¶æ•´åˆåœ¨ä¸€èµ·ï¼Œæ¥å®Œæˆæˆ‘ä»¬çš„ä¸šåŠ¡åŠŸèƒ½å¼€å‘</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/ssm01.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/springboot01.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27056" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-16</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/springboot01.html&quot;);" href="javascript:void(0);" alt="">SpringBoot</a><div class="blog-slider__text">åŸºäºSpringBootçš„å®ŒæˆSSMæ•´åˆé¡¹ç›®å¼€å‘</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/springboot01.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/git01.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27060" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-15</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/git01.html&quot;);" href="javascript:void(0);" alt="">Git</a><div class="blog-slider__text">åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼Œä¸»è¦ç”¨äºç®¡ç†å¼€å‘è¿‡ç¨‹ä¸­çš„æºä»£ç æ–‡ä»¶</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/git01.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/jdbc01.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27067" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-16</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/jdbc01.html&quot;);" href="javascript:void(0);" alt="">JDBC</a><div class="blog-slider__text">æ•°æ®åº“è¿æ¥æ± ,æŒæ¡æ•°æ®åº“çš„ä½¿ç”¨</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/jdbc01.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/redis02.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27055" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-15</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/redis02.html&quot;);" href="javascript:void(0);" alt="">RedisåŸºç¡€</a><div class="blog-slider__text">ä¸€ä¸ªåŸºäºå†…å­˜çš„`key-value`ç»“æ„æ•°æ®åº“</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/redis02.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/maven01.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27068" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-15</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/maven01.html&quot;);" href="javascript:void(0);" alt="">Maven</a><div class="blog-slider__text">ä»“åº“çš„ä½¿ç”¨, é¡¹ç›®çš„ä¼˜åŒ–å¤„ç†, åˆ†æ¨¡å—å¼€å‘</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/maven01.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/redis01.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27067" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-15</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/redis01.html&quot;);" href="javascript:void(0);" alt="">Rediså…¥é—¨</a><div class="blog-slider__text">ä¸€ä¸ªåŸºäºå†…å­˜çš„`key-value`ç»“æ„æ•°æ®åº“</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/redis01.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/linux01.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27065" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-15</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/linux01.html&quot;);" href="javascript:void(0);" alt="">Linux</a><div class="blog-slider__text">æ“ä½œç³»ç»Ÿ</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/linux01.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/doceker01.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27050" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-19</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/doceker01.html&quot;);" href="javascript:void(0);" alt="">Docker</a><div class="blog-slider__text">å†³å¤§å‹é¡¹ç›®ä¾èµ–å…³ç³»å¤æ‚ï¼Œä¸åŒç»„ä»¶ä¾èµ–çš„å…¼å®¹æ€§é—®é¢˜</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/doceker01.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/SpringBootds.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27059" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-07</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/SpringBootds.html&quot;);" href="javascript:void(0);" alt="">SpringBootç”µå•†é¡¹ç›®</a><div class="blog-slider__text">äº†è§£SpringBoot+Mybatisç­‰çš„ç»“æ„</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/SpringBootds.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/SpringMVC01.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27062" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-07</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/SpringMVC01.html&quot;);" href="javascript:void(0);" alt="">SpringMVC</a><div class="blog-slider__text">SSMä¸­çš„MVCåŸºæœ¬ä½¿ç”¨</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/SpringMVC01.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/C02.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27068" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-10</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/C02.html&quot;);" href="javascript:void(0);" alt="">C++é«˜çº§</a><div class="blog-slider__text">C++æ·±å…¥çš„ç ”ç©¶</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/C02.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/MyBatis01.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27068" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-05</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/MyBatis01.html&quot;);" href="javascript:void(0);" alt="">MyBatis</a><div class="blog-slider__text">æ•°æ®åº“Value-keysçš„åŸºæœ¬ä½¿ç”¨</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/MyBatis01.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/MyBatis02.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27057" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-05</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/MyBatis02.html&quot;);" href="javascript:void(0);" alt="">MyBatis - Plus</a><div class="blog-slider__text">MyBatisçš„åŠ å¼ºç‰ˆæœ¬</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/MyBatis02.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/C04.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27055" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-10</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/C04.html&quot;);" href="javascript:void(0);" alt="">C++è¿›é˜¶ä½¿ç”¨</a><div class="blog-slider__text">C++çš„ä½¿ç”¨</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/C04.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/C05.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27062" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-10</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/C05.html&quot;);" href="javascript:void(0);" alt="">C++é€šè®¯ç®¡ç†é¡¹ç›®</a><div class="blog-slider__text">C++çš„ä½¿ç”¨</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/C05.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/C07.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27065" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-10</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/C07.html&quot;);" href="javascript:void(0);" alt="">C++èŒå·¥ç³»ç»Ÿé¡¹ç›®</a><div class="blog-slider__text">C++èŒå·¥ç³»ç»Ÿé¡¹ç›®, æ›´å¥½çš„äº†è§£é¢å‘å¯¹è±¡çš„çŸ¥è¯†</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/C07.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/C01.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27069" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-10</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/C01.html&quot;);" href="javascript:void(0);" alt="">C++å…¥é—¨</a><div class="blog-slider__text">äº†è§£C++çš„åŸºæœ¬è¯­æ³•å’Œä½¿ç”¨æ–¹æ³•</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/C01.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/SFzhdl.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27069" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-03</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/SFzhdl.html&quot;);" href="javascript:void(0);" alt="">æ ˆå’Œé˜Ÿåˆ—</a><div class="blog-slider__text">ç®—æ³•ç»“æ„</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/SFzhdl.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/javaWeb03.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27057" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-04-28</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/javaWeb03.html&quot;);" href="javascript:void(0);" alt="">JavaWab(ä¸‰)</a><div class="blog-slider__text">æ­£å¼çš„å¼€å¯è½¯ä»¶çš„å¤§é—¨</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/javaWeb03.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/javaWeb02.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27065" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-04-27</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/javaWeb02.html&quot;);" href="javascript:void(0);" alt="">JavaWab(äºŒ)</a><div class="blog-slider__text">æ­£å¼çš„å¼€å¯è½¯ä»¶çš„å¤§é—¨</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/javaWeb02.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/SFecs.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27068" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-01</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/SFecs.html&quot;);" href="javascript:void(0);" alt="">äºŒå‰æ ‘</a><div class="blog-slider__text">ç®—æ³•ç»“æ„</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/SFecs.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/SFhs.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27064" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-02</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/SFhs.html&quot;);" href="javascript:void(0);" alt="">å›æº¯</a><div class="blog-slider__text">ç®—æ³•ç»“æ„</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/SFhs.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/javaWeb04.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27065" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-04-29</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/javaWeb04.html&quot;);" href="javascript:void(0);" alt="">JavaWab(å››)</a><div class="blog-slider__text">æ­£å¼çš„å¼€å¯è½¯ä»¶çš„å¤§é—¨</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/javaWeb04.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/JVM04.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27059" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-07</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/JVM04.html&quot;);" href="javascript:void(0);" alt="">JVMç±»åŠ è½½</a><div class="blog-slider__text">JAVAä¸­ç±»çš„åŠ è½½è¿‡ç¨‹</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/JVM04.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/javaWeb01.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27069" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-04-26</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/javaWeb01.html&quot;);" href="javascript:void(0);" alt="">JavaWab(ä¸€)</a><div class="blog-slider__text">æ­£å¼çš„å¼€å¯è½¯ä»¶çš„å¤§é—¨</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/javaWeb01.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/JVM03.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27057" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-06</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/JVM03.html&quot;);" href="javascript:void(0);" alt="">JVMåƒåœ¾å›æ”¶</a><div class="blog-slider__text">JVMåƒåœ¾å›æ”¶æœºåˆ¶</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/JVM03.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/JVM01.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27053" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-04</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/JVM01.html&quot;);" href="javascript:void(0);" alt="">JVMå¯¼å­¦</a><div class="blog-slider__text">JVMå…¥é—¨å¯¼å­¦</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/JVM01.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/JVM02.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27059" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-05</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/JVM02.html&quot;);" href="javascript:void(0);" alt="">JVMå†…å­˜ç»“æ„</a><div class="blog-slider__text">JVMçš„å†…å­˜ç»“æ„</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/JVM02.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/JVM05.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27063" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-08</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/JVM05.html&quot;);" href="javascript:void(0);" alt="">JAVAå†…å­˜æ¨¡å‹</a><div class="blog-slider__text">JAVAçš„å†…å­˜æ¨¡å‹</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/JVM05.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/javadx.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27053" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-04-15</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/javadx.html&quot;);" href="javascript:void(0);" alt="">Javaé¢å‘å¯¹è±¡</a><div class="blog-slider__text">è¿›è¡Œæ·±å…¥å­¦ä¹ </div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/javadx.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/java.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27064" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-04-14</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/java.html&quot;);" href="javascript:void(0);" alt="">Java</a><div class="blog-slider__text">è¿›è¡Œä¸€äº›åŸºç¡€çš„å­¦ä¹ </div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/java.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/Spring01.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://imgbed.link/file/27065" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-05</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/Spring01.html&quot;);" href="javascript:void(0);" alt="">Spring</a><div class="blog-slider__text">æ¡†æ¶çš„æ­å»ºä»¥åŠä¸€äº›åŸºæœ¬ä½¿ç”¨æ–¹æ³•</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/Spring01.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('å·²æŒ‚è½½butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = '/';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><script data-pjax src="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.js"></script><script data-pjax>
  function gitcalendar_injector_config(){
      var parent_div_git = document.getElementById('gitZone');
      var item_html = '<div class="recent-post-item" id="gitcalendarBar" style="width:100%;height:auto;padding:10px;"><style>#git_container{min-height: 320px}@media screen and (max-width:650px) {#git_container{min-height: 0px}}</style><div id="git_loading" style="width:10%;height:100%;margin:0 auto;display: block;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animatetransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animatetransform></path></svg><style>#git_container{display: none;}</style></div><div id="git_container"></div></div>';
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      console.log('å·²æŒ‚è½½gitcalendar')
      }

    if( document.getElementById('gitZone') && (location.pathname ==='/site/census/'|| '/site/census/' ==='all')){
        gitcalendar_injector_config()
        GitCalendarInit("/api?null",['#d9e0df', '#c6e0dc', '#a8dcd4', '#9adcd2', '#89ded1', '#77e0d0', '#5fdecb', '#47dcc6', '#39dcc3', '#1fdabe', '#00dab9'],'null')
    }
  </script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false});</script></body></html>